<html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="https://flo.uri.sh/template/91601/v10/static/style.css">
		<base target="_top">
	<title>Flourish template: Hierarchy</title><style id="flourish-page-styles" type="text/css">html { 
 font-size:62.5%; 
 -webkit-font-smoothing: antialiased; 
 -moz-osx-font-smoothing: auto; } 


@media(min-width: 380px) {
html { font-size:75%; }
}

@media(min-width: 580px) {
html { font-size:87.5%; }
}

@media(min-width: 1080px) {
html { font-size:100%; }
}

@media(min-width: 1280px) {
html { font-size:120%; }
}

</style><style type="text/css">.flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }</style><style class="fl-ui-styles-controls">.fl-control.hidden {
	display: none;
}

.fl-control {
	vertical-align: middle;
	position: relative;
	font-size: 1rem;
	font-weight: bold;
}

.fl-controls-title {
	font-size: 1rem;
	font-weight: bold;
	vertical-align: middle;
}

.fl-control.fl-control .button {
	height: 2rem;
	padding: 0 0.5em;
}

.fl-control-dropdown select {
	height: 2rem;
	font-size: 1rem;
	font-weight: bold;
	padding: 0 0.2rem;
}

.fl-control-slider .slider-end-labels {
	font-size: 1rem;
	font-weight: bold;
}

.fl-control-slider {
	height: 2rem;
}

</style><style class="fl-ui-styles-dropdown">.fl-control-dropdown .heading {
	margin-bottom: 0.4em;
}

.fl-control-dropdown {
	pointer-events: all;
}

.fl-control-dropdown select {
	display: inline-block;
	cursor: pointer;
	overflow: hidden;
	white-space: nowrap;
	position: relative;
	font-family: inherit;
	background-color: transparent;
	color: #333333;
	border: 1px solid transparent;
	border-bottom: 1px solid rgba(51, 51, 51, 0.25);
}

.fl-control-dropdown:after {
	color: #333333;
}

.fl-control-dropdown .main .current {
	line-height: 1em;
	height: 100%;
	max-width: 88%;
	display: inline-block;
	overflow: hidden;
	vertical-align: top;
}

.fl-control-dropdown .list {
	top: 2px;
	min-width: 100%;
	padding: 2px;
	display: none;
	max-height: 200px;
	overflow-y: auto;
	box-shadow: 0 1px 4px rgba(0, 0, 0, .1);
	margin-top: 2px;
}

.fl-control-dropdown .list .list-item {
	line-height: 1em;
	cursor: pointer;
	font-weight: normal;
	color: #333333;
}

.fl-control-dropdown.open .list {
	display: block;
	border: 1px solid rgba(51, 51, 51, 0.25);
	background-color: transparent;
	z-index: 1;
	animation: dropdown-out 200ms;
}

.fl-control-dropdown .list-item:hover {
	opacity: 0.6;
}

.fl-control-dropdown .list-item.selected, .fl-control-dropdown .list-item.selected:hover {
	opacity: 1;
	cursor: default;
}

.fl-control-dropdown .main {
	padding-left: 0;
	padding-right: 0.1rem;
}

</style><style class="fl-ui-styles-button">.fl-control-buttons.fl-control.hidden {
	display: none;
}

.fl-control-buttons.fl-control .button {
	overflow: hidden;
	white-space: nowrap;
	margin: 0 2px 0 0 !important;
	background-color: #ffffff;
	color: #333333;
	border: 1px solid rgba(51, 51, 51, 0.25);
	border-radius: 3px;
}

.fl-control-buttons.fl-control .button:hover {
	background-color: #ffffff;
	color: #333333;
}

.fl-control-buttons.fl-control .button.selected {
	background-color: #333333;
	color: #ffffff;
}

.fl-control-buttons.grouped.fl-control .button {
	border-right: none;
	border-radius: 0;
	margin: 0;
}

.fl-control-buttons.grouped.fl-control .button:first-child {
	border-radius: 3px 0 0 3px;
}

.fl-control-buttons.grouped.fl-control .button:last-child {
	border-radius: 0 3px 3px 0;
	border-right: 1px solid rgba(51, 51, 51, 0.25);
}

.fl-control-buttons.grouped.fl-control.fixed-width:not(.hidden) {
	width: undefined%;
}

</style><style class="fl-ui-styles-slider">.fl-control-slider .fl-controls-slider {
	height: 28px;
}

.fl-control-slider .slider-play {
	fill: #333333;
	width: 14px;
	height: 14px;
}

.fl-control-slider .slider-label {
	padding-inline-start: 0.3rem;
	box-sizing: content-box;
	color: #333333;
}

.fl-control-slider input[type=range] {
	-webkit-appearance: none;
	color: currentColor;
	background-color: transparent;
}

.fl-control-slider input[type=range]::-webkit-slider-runnable-track {
	-webkit-appearance: none;
	background: #dddddd;
	border-radius: 100px;
	height: 2.8000000000000003px;
}

.fl-control-slider input[type=range]::-webkit-slider-thumb {
	-webkit-appearance: none;
	width: 14px;
	height: 14px;
	border-radius: 100px;
	background: #333333;
	margin-top: -5.6px;
}

.fl-control-slider input[type=range]::-moz-range-track {
	-webkit-appearance: none;
	background: #dddddd;
	border-radius: 100px;
	height: 2.8000000000000003px;
}

.fl-control-slider input[type=range]::-moz-range-thumb {
	-webkit-appearance: none;
	width: 14px;
	height: 14px;
	border-radius: 100px;
	border: none;
	background: #333333;
}

</style><style id="legend-styles" type="text/css">.fl-legend-container.interactive .fl-legend-item {
	cursor: pointer;
}

.fl-legend-container.interactive .fl-legend-item:hover {
	opacity: 0.75;
}

.fl-legend-container.interactive .fl-legend-item:focus-visible {
	border-radius: 4px;
	outline: 2.5px solid #4d90fe;
	outline-offset: -2.25px;
}

.fl-legend-sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

</style><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700" class="layout-font"><style type="text/css" class="flourish-controls">.fl-controls-container {
	display: inline-block;
	line-height: 1em;
}

.fl-controls-title {
	display: inline-block;
	margin-inline-end: 0.5rem;
}

.fl-controls-container, .fl-controls-container * {
	box-sizing: border-box;
}

.slider-holder {
	margin-bottom: 20px;
}

.fl-controls-slider, .slider-play {
	pointer-events: all;
	display: inline-block;
	vertical-align: middle;
}

.slider-play svg {
	height: 100%;
	width: 100%;
	display: block;
	cursor:  pointer;
}

.fl-controls-slider svg {
	display: block;
}

.slider-play:hover {
	opacity: 0.6;
}

.fl-control-slider {
	width: 100%;
	bottom: 0;
	align-items: center;
}

.fl-control {
	position: relative;
}

.fl-control.hidden {
	display: none;
}

.fl-control .button {
	display: inline-flex;
	align-items: center;
	background: #eee;
	padding: 0 0.5em;
	margin-right: 0.25em;
	margin-bottom: 0.25em;
	line-height: 1em;
	box-sizing: border-box;
}

.fl-control.grouped:not(.hidden) {
	display: inline-table;
	table-layout: fixed;
}

.fl-control.grouped:not(.hidden) .button {
	display: table-cell;
	vertical-align: middle;
	margin: 0;
	text-align: center;
}

.fl-control .button.selected {
	background: #ddd;
}

.fl-control-dropdown {
	line-height: 1em;
	position: relative;
}

.fl-control-dropdown::after {
	display: block;
	content: '';
	width: 10px;
	height: 10px;
	background: transparent;
	position: absolute;
	right: 5px;
	left: auto;
	top: 50%;
	pointer-events: none;
	transform: translateY(calc(-50% + 3px));
	border-left: 5px solid transparent;
	border-right: 5px solid transparent;
	border-top: 5px solid;
	box-sizing: border-box;
}

.is-rtl .fl-control-dropdown::after {
	left: 5px;
	right: auto;
}

.fl-control-dropdown select {
	-webkit-appearance: none;
	width: 100%;
}

</style><style id="popup-styles">.flourish-panel .flourish-panel-shadow {
	pointer-events: none;
	position: absolute;
	display: none;
	top: 0;
	right: 0;
	bottom: 0;
	left: 0;
	width: 100%;
	height: 100%;
	z-index: -1;
	overflow: hidden;
}

.flourish-panel .flourish-panel-shadow:before {
	content: '';
	display: block;
	position: absolute;
	width: 100%;
	height: 100%;
	border-radius: 50%;
	background: rgba(0,0,0,0.3);
	bottom: 0;
	left: 0;
	top: 0;
	right: 0;
	filter: blur(15px);
}

.flourish-panel-inner:focus-visible {
	outline: none !important;
}

.flourish-panel:focus-visible {
	outline: none !important;
}

.flourish-panel-close:focus {
	outline: none;
}

.flourish-panel-close:focus-visible {
	outline: -webkit-focus-ring-color auto 5px;
}

.flourish-popup {
	pointer-events: none;
}

.flourish-popup .flourish-popup-content {
	pointer-events: auto;
	max-width: 18rem !important;
}

.flourish-popup header, .flourish-panel header {
	margin: 0;
}

.flourish-popup header {
	font-weight: bold;
	color: #ffffff;
	background: rgb(51, 51, 51);
	padding: 0.5rem;
	border-radius: 0.2rem 0.2rem 0 0;
}

.flourish-popup header:not(:last-child) {
}

.flourish-popup header:not(:last-child) {
}

.flourish-panel .flourish-panel-content-inner {
	overflow: auto;
}

.flourish-panel header {
	font-weight: bold;
	margin-bottom: 0.5em;
	padding-right: 1rem;
}

.flourish-popup .main-content {
	padding: 0.5rem;
}

.flourish-popup header + .main-content {
	padding: 0.5rem;
}

.flourish-popup h3, .flourish-panel h3 {
	font-size: 1em;
	margin: 0;
}

.flourish-popup h3, .flourish-popup h4, .flourish-popup ul li {
	text-align: start;
}

.flourish-panel h3, .flourish-panel h4, .flourish-panel ul li {
	text-align: start;
}

.flourish-popup h4, .flourish-panel h4 {
	font-size: 1em;
	margin: 0;
	opacity: 0.6;
	font-weight: normal;
}

.flourish-popup h4:empty, .flourish-panel h4:empty, .flourish-popup h3:empty, .flourish-panel h3:empty, .flourish-popup p:empty, .flourish-panel p:empty {
	display: none;
}

.flourish-popup p, .flourish-panel p {
	margin: 0;
	font-size: inherit;
	font-weight: normal;
}

.flourish-popup table, .flourish-panel table {
	margin: 0;
	width: 100%;
	border-collapse: collapse;
	table-layout: auto;
}

.flourish-popup table tr, .flourish-panel table tr {
	border-top: 1px solid #eee;
}

.flourish-popup table tr:first-child, .flourish-panel table tr:first-child {
	border-top: none;
}

.flourish-popup table tr td, .flourish-panel table tr td {
	padding: 0.25em 0 0.25em 0;
	padding-inline-end: 0.25em;
	vertical-align: top;
	font-size: inherit;
	text-align: start;
	font-weight: normal;
	overflow: hidden;
	text-overflow: ellipsis;
}

.flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td {
	padding-bottom: 0;
}

.flourish-popup .data-heading {
	font-weight: normal;
	display: inline-block;
}

.flourish-panel .data-heading {
	font-weight: normal;
	display: inline-block;
}

.flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value {
	text-align: end;
	padding: 0.25em 0 0.25em 0;
	padding-inline-end: 0.25em;
}

.flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value {
	padding-bottom: 0;
}

.flourish-popup ul, .flourish-panel ul {
	padding: 0;
	margin: 0;
}

.flourish-popup ul li, .flourish-panel ul li {
	font-size: inherit;
	list-style-type: none;
}

</style></head>
	<body class="fl-fonts-loaded" dir="ltr" style="font-family: &quot;Source Sans Pro&quot;; background-color: rgb(255, 255, 255); background-image: url(&quot;https://public.flourish.studio/uploads/1815566/0309ffd5-7597-492d-b1a3-75c324c0a67d.jpg&quot;); background-size: auto; background-repeat: no-repeat; background-position: center center;">
	

<script>window.Flourish = {"static_prefix":"https://flo.uri.sh/template/91601/v10/static","environment":"live","is_read_only":true};</script><script>var template=function(t){"use strict";var e="http://www.w3.org/1999/xhtml",n={svg:"http://www.w3.org/2000/svg",xhtml:e,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function r(t){var e=t+="",r=e.indexOf(":");return r>=0&&"xmlns"!==(e=t.slice(0,r))&&(t=t.slice(r+1)),n.hasOwnProperty(e)?{space:n[e],local:t}:t}function i(t){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===e&&n.documentElement.namespaceURI===e?n.createElement(t):n.createElementNS(r,t)}}function a(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function o(t){var e=r(t);return(e.local?a:i)(e)}function l(){}function s(t){return null==t?l:function(){return this.querySelector(t)}}function u(){return[]}function c(t){return null==t?u:function(){return this.querySelectorAll(t)}}function d(t){return function(){return this.matches(t)}}function f(t){return new Array(t.length)}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function h(t,e,n,r,i,a){for(var o,l=0,s=e.length,u=a.length;l<u;++l)(o=e[l])?(o.__data__=a[l],r[l]=o):n[l]=new p(t,a[l]);for(;l<s;++l)(o=e[l])&&(i[l]=o)}function b(t,e,n,r,i,a,o){var l,s,u,c={},d=e.length,f=a.length,h=new Array(d);for(l=0;l<d;++l)(s=e[l])&&(h[l]=u="$"+o.call(s,s.__data__,l,e),u in c?i[l]=s:c[u]=s);for(l=0;l<f;++l)(s=c[u="$"+o.call(t,a[l],l,a)])?(r[l]=s,s.__data__=a[l],c[u]=null):n[l]=new p(t,a[l]);for(l=0;l<d;++l)(s=e[l])&&c[h[l]]===s&&(i[l]=s)}function g(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function _(t){return function(){this.removeAttribute(t)}}function y(t){return function(){this.removeAttributeNS(t.space,t.local)}}function m(t,e){return function(){this.setAttribute(t,e)}}function v(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function k(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function M(t){return function(){this.style.removeProperty(t)}}function z(t,e,n){return function(){this.style.setProperty(t,e,n)}}function A(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function T(t,e){return t.style.getPropertyValue(e)||k(t).getComputedStyle(t,null).getPropertyValue(e)}function C(t){return function(){delete this[t]}}function E(t,e){return function(){this[t]=e}}function S(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function N(t){return t.trim().split(/^|\s+/)}function F(t){return t.classList||new L(t)}function L(t){this._node=t,this._names=N(t.getAttribute("class")||"")}function O(t,e){for(var n=F(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function j(t,e){for(var n=F(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function $(t){return function(){O(this,t)}}function D(t){return function(){j(this,t)}}function P(t,e){return function(){(e.apply(this,arguments)?O:j)(this,t)}}function U(){this.textContent=""}function B(t){return function(){this.textContent=t}}function q(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function H(){this.innerHTML=""}function Y(t){return function(){this.innerHTML=t}}function R(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function I(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function V(){return null}function G(){var t=this.parentNode;t&&t.removeChild(this)}function X(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Z(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}L.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var J={},Q=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(J={mouseenter:"mouseover",mouseleave:"mouseout"}));function K(t,e,n){return t=tt(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function tt(t,e,n){return function(r){var i=Q;Q=r;try{t.call(this,this.__data__,e,n)}finally{Q=i}}}function et(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function nt(t,e,n){var r=J.hasOwnProperty(t.type)?K:tt;return function(i,a,o){var l,s=this.__on,u=r(e,a,o);if(s)for(var c=0,d=s.length;c<d;++c)if((l=s[c]).type===t.type&&l.name===t.name)return this.removeEventListener(l.type,l.listener,l.capture),this.addEventListener(l.type,l.listener=u,l.capture=n),void(l.value=e);this.addEventListener(t.type,u,n),l={type:t.type,name:t.name,value:e,listener:u,capture:n},s?s.push(l):this.__on=[l]}}function rt(t,e,n){var r=k(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function it(t,e){return function(){return rt(this,t,e)}}function at(t,e){return function(){return rt(this,t,e.apply(this,arguments))}}var ot=[null];function lt(t,e){this._groups=t,this._parents=e}function st(){return new lt([[document.documentElement]],ot)}function ut(t){return"string"==typeof t?new lt([[document.querySelector(t)]],[document.documentElement]):new lt([[t]],ot)}lt.prototype=st.prototype={constructor:lt,select:function(t){"function"!=typeof t&&(t=s(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,l=e[i],u=l.length,c=r[i]=new Array(u),d=0;d<u;++d)(a=l[d])&&(o=t.call(a,a.__data__,d,l))&&("__data__"in a&&(o.__data__=a.__data__),c[d]=o);return new lt(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,l=e[a],s=l.length,u=0;u<s;++u)(o=l[u])&&(r.push(t.call(o,o.__data__,u,l)),i.push(o));return new lt(r,i)},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,s=r[i]=[],u=0;u<l;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&s.push(a);return new lt(r,this._parents)},data:function(t,e){if(!t)return p=new Array(this.size()),u=-1,this.each((function(t){p[++u]=t})),p;var n=e?b:h,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=r[u],d=i[u],f=d.length,p=t.call(c,c&&c.__data__,u,r),g=p.length,_=l[u]=new Array(g),y=o[u]=new Array(g);n(c,d,_,y,s[u]=new Array(f),p,e);for(var m,v,w=0,x=0;w<g;++w)if(m=_[w]){for(w>=x&&(x=w+1);!(v=y[x])&&++x<g;);m._next=v||null}}return(o=new lt(o,r))._enter=l,o._exit=s,o},enter:function(){return new lt(this._enter||this._groups.map(f),this._parents)},exit:function(){return new lt(this._exit||this._groups.map(f),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,u=e[l],c=n[l],d=u.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=u[p]||c[p])&&(f[p]=s);for(;l<r;++l)o[l]=e[l];return new lt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=g);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,l=n[a],s=l.length,u=i[a]=new Array(s),c=0;c<s;++c)(o=l[c])&&(u[c]=o);u.sort(e)}return new lt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,l=a.length;o<l;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=r(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?y:_:"function"==typeof e?n.local?x:w:n.local?v:m)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?M:"function"==typeof e?A:z)(t,e,null==n?"":n)):T(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?C:"function"==typeof e?S:E)(t,e)):this.node()[t]},classed:function(t,e){var n=N(t+"");if(arguments.length<2){for(var r=F(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?P:e?$:D)(n,e))},text:function(t){return arguments.length?this.each(null==t?U:("function"==typeof t?q:B)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?H:("function"==typeof t?R:Y)(t)):this.node().innerHTML},raise:function(){return this.each(I)},lower:function(){return this.each(W)},append:function(t){var e="function"==typeof t?t:o(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:o(t),r=null==e?V:"function"==typeof e?e:s(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(G)},clone:function(t){return this.select(t?Z:X)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(l=e?nt:et,null==n&&(n=!1),r=0;r<o;++r)this.each(l(a[r],e,n));return this}var l=this.node().__on;if(l)for(var s,u=0,c=l.length;u<c;++u)for(r=0,s=l[u];r<o;++r)if((i=a[r]).type===s.type&&i.name===s.name)return s.value},dispatch:function(t,e){return this.each(("function"==typeof e?at:it)(t,e))}};var ct=new Date,dt=new Date;function ft(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o,l=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return l;do{l.push(o=new Date(+n)),e(n,a),t(n)}while(o<n&&n<r);return l},i.filter=function(n){return ft((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return ct.setTime(+e),dt.setTime(+r),t(ct),t(dt),Math.floor(n(ct,dt))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var pt=864e5,ht=6048e5,bt=ft((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/pt}),(function(t){return t.getDate()-1}));function gt(t){return ft((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/ht}))}bt.range;var _t=gt(0),yt=gt(1),mt=gt(2),vt=gt(3),wt=gt(4),xt=gt(5),kt=gt(6);_t.range,yt.range,mt.range,vt.range,wt.range,xt.range,kt.range;var Mt=ft((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Mt.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ft((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null},Mt.range;var zt=ft((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/pt}),(function(t){return t.getUTCDate()-1}));function At(t){return ft((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/ht}))}zt.range;var Tt=At(0),Ct=At(1),Et=At(2),St=At(3),Nt=At(4),Ft=At(5),Lt=At(6);Tt.range,Ct.range,Et.range,St.range,Nt.range,Ft.range,Lt.range;var Ot=ft((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));function jt(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function $t(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Dt(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}Ot.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ft((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null},Ot.range;var Pt,Ut,Bt,qt={"-":"",_:" ",0:"0"},Ht=/^\s*\d+/,Yt=/^%/,Rt=/[\\^$*+?|[\]().{}]/g;function It(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Wt(t){return t.replace(Rt,"\\$&")}function Vt(t){return new RegExp("^(?:"+t.map(Wt).join("|")+")","i")}function Gt(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function Xt(t,e,n){var r=Ht.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Zt(t,e,n){var r=Ht.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Jt(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Qt(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Kt(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function te(t,e,n){var r=Ht.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ee(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ne(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function re(t,e,n){var r=Ht.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ie(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ae(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function oe(t,e,n){var r=Ht.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function le(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function se(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ue(t,e,n){var r=Ht.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ce(t,e,n){var r=Ht.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function de(t,e,n){var r=Ht.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function fe(t,e,n){var r=Yt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function pe(t,e,n){var r=Ht.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function he(t,e,n){var r=Ht.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function be(t,e){return It(t.getDate(),e,2)}function ge(t,e){return It(t.getHours(),e,2)}function _e(t,e){return It(t.getHours()%12||12,e,2)}function ye(t,e){return It(1+bt.count(Mt(t),t),e,3)}function me(t,e){return It(t.getMilliseconds(),e,3)}function ve(t,e){return me(t,e)+"000"}function we(t,e){return It(t.getMonth()+1,e,2)}function xe(t,e){return It(t.getMinutes(),e,2)}function ke(t,e){return It(t.getSeconds(),e,2)}function Me(t){var e=t.getDay();return 0===e?7:e}function ze(t,e){return It(_t.count(Mt(t)-1,t),e,2)}function Ae(t){var e=t.getDay();return e>=4||0===e?wt(t):wt.ceil(t)}function Te(t,e){return t=Ae(t),It(wt.count(Mt(t),t)+(4===Mt(t).getDay()),e,2)}function Ce(t){return t.getDay()}function Ee(t,e){return It(yt.count(Mt(t)-1,t),e,2)}function Se(t,e){return It(t.getFullYear()%100,e,2)}function Ne(t,e){return It((t=Ae(t)).getFullYear()%100,e,2)}function Fe(t,e){return It(t.getFullYear()%1e4,e,4)}function Le(t,e){var n=t.getDay();return It((t=n>=4||0===n?wt(t):wt.ceil(t)).getFullYear()%1e4,e,4)}function Oe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+It(e/60|0,"0",2)+It(e%60,"0",2)}function je(t,e){return It(t.getUTCDate(),e,2)}function $e(t,e){return It(t.getUTCHours(),e,2)}function De(t,e){return It(t.getUTCHours()%12||12,e,2)}function Pe(t,e){return It(1+zt.count(Ot(t),t),e,3)}function Ue(t,e){return It(t.getUTCMilliseconds(),e,3)}function Be(t,e){return Ue(t,e)+"000"}function qe(t,e){return It(t.getUTCMonth()+1,e,2)}function He(t,e){return It(t.getUTCMinutes(),e,2)}function Ye(t,e){return It(t.getUTCSeconds(),e,2)}function Re(t){var e=t.getUTCDay();return 0===e?7:e}function Ie(t,e){return It(Tt.count(Ot(t)-1,t),e,2)}function We(t){var e=t.getUTCDay();return e>=4||0===e?Nt(t):Nt.ceil(t)}function Ve(t,e){return t=We(t),It(Nt.count(Ot(t),t)+(4===Ot(t).getUTCDay()),e,2)}function Ge(t){return t.getUTCDay()}function Xe(t,e){return It(Ct.count(Ot(t)-1,t),e,2)}function Ze(t,e){return It(t.getUTCFullYear()%100,e,2)}function Je(t,e){return It((t=We(t)).getUTCFullYear()%100,e,2)}function Qe(t,e){return It(t.getUTCFullYear()%1e4,e,4)}function Ke(t,e){var n=t.getUTCDay();return It((t=n>=4||0===n?Nt(t):Nt.ceil(t)).getUTCFullYear()%1e4,e,4)}function tn(){return"+0000"}function en(){return"%"}function nn(t){return+t}function rn(t){return Math.floor(+t/1e3)}function an(t){throw new TypeError("Expected a value of type string but got a value of type "+typeof t)}function on(t){return function(e){return"string"!=typeof e&&an(e),(e=e.trim())?t(e):null}}Pt=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,s=t.shortMonths,u=Vt(i),c=Gt(i),d=Vt(a),f=Gt(a),p=Vt(o),h=Gt(o),b=Vt(l),g=Gt(l),_=Vt(s),y=Gt(s),m={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:be,e:be,f:ve,g:Ne,G:Le,H:ge,I:_e,j:ye,L:me,m:we,M:xe,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:nn,s:rn,S:ke,u:Me,U:ze,V:Te,w:Ce,W:Ee,x:null,X:null,y:Se,Y:Fe,Z:Oe,"%":en},v={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:je,e:je,f:Be,g:Je,G:Ke,H:$e,I:De,j:Pe,L:Ue,m:qe,M:He,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:nn,s:rn,S:Ye,u:Re,U:Ie,V:Ve,w:Ge,W:Xe,x:null,X:null,y:Ze,Y:Qe,Z:tn,"%":en},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=f[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=y[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:ae,e:ae,f:de,g:ee,G:te,H:le,I:le,j:oe,L:ce,m:ie,M:se,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1},q:re,Q:pe,s:he,S:ue,u:Zt,U:Jt,V:Qt,w:Xt,W:Kt,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:ee,Y:te,Z:ne,"%":fe};function x(t,e){return function(n){var r,i,a,o=[],l=-1,s=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===t.charCodeAt(l)&&(o.push(t.slice(s,l)),null!=(i=qt[r=t.charAt(++l)])?r=t.charAt(++l):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),s=l+1);return o.push(t.slice(s,l)),o.join("")}}function k(t,e){return function(n){var r,i,a=Dt(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=$t(Dt(a.y,0,1))).getUTCDay(),r=i>4||0===i?Ct.ceil(r):Ct(r),r=zt.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=jt(Dt(a.y,0,1))).getDay(),r=i>4||0===i?yt.ceil(r):yt(r),r=bt.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?$t(Dt(a.y,0,1)).getUTCDay():jt(Dt(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,$t(a)):jt(a)}}function M(t,e,n,r){for(var i,a,o=0,l=e.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in qt?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return m.x=x(n,m),m.X=x(r,m),m.c=x(e,m),v.x=x(n,v),v.X=x(r,v),v.c=x(e,v),{format:function(t){var e=x(t+="",m);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Pt.format,Pt.parse,Ut=Pt.utcFormat,Bt=Pt.utcParse;var ln=new Date(1972,3,27,19,45,5),sn={"%b %d":[{regex:/^june\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[1])}},{regex:/^july\s(3[01]|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[1])}},{regex:/^sept\s(30|[12][0-9]|0?[1-9])$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[1])}}],"%d %b":[{regex:/^(0?[1-9]|[1-9][0-9])\sjune$/i,toDate:function(t){return new Date(null,5,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\sjuly$/i,toDate:function(t){return new Date(null,6,t.split(/\s/)[0])}},{regex:/^(0?[1-9]|[1-9][0-9])\ssept$/i,toDate:function(t){return new Date(null,8,t.split(/\s/)[0])}}]};function un(t){return function(e){var n=null;return t.forEach((function(t){e.match(t.regex)&&(n=t.toDate(e))})),n}}function cn(t,e){var n,r=Bt(t),i=Ut(t);return n=on("function"==typeof e?function(t){return e(t,null!==r(t))}:function(t){return null!==r(t)}),Object.freeze({test:n,parse:on((function(e){return r(e)||(sn[t]?un(sn[t])(e):null)})),format:function(t){return i(t)},type:"datetime",description:t,id:"datetime$"+t,example:i(ln)})}var dn=Object.freeze([cn("%Y-%m-%dT%H:%M:%S.%LZ"),cn("%Y-%m-%d %H:%M:%S"),cn("%Y-%m-%dT%H:%M:%S"),cn("%Y-%m-%dT%H:%M:%SZ"),cn("%d/%m/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),cn("%d/%m/%Y %H:%M",(function(t,e){if(!e)return!1;var n=t.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),cn("%d/%m/%y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),cn("%m/%d/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),cn("%m/%d/%Y %H:%M",(function(t,e){if(!e)return!1;var n=t.split(/[/ :]/).map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3&&n[3]>=0&&n[3]<24&&n[4]>=0&&n[4]<60})),cn("%m/%d/%y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),cn("%Y/%m/%d",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),cn("%d-%m-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),cn("%d-%m-%y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&!isNaN(n[2])})),cn("%d.%m.%Y",(function(t,e){if(!e)return!1;var n=t.split(".").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12&&n[2]>=1e3})),cn("%m.%d.%y",(function(t,e){if(!e)return!1;var n=t.split(".").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),cn("%m-%d-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&n[2]>=1e3})),cn("%m-%d-%y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>0&&n[1]<=31&&!isNaN(n[2])})),cn("%Y-%m-%d",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12&&n[2]>0&&n[2]<=31})),cn("%Y-%m",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),cn("%Y%m",(function(t,e){if(!e)return!1;var n=parseFloat(t.slice(0,4)),r=parseFloat(t.slice(4));return n>1e3&&r>0&&r<=12})),cn("%d %b %Y",(function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d %B %Y",(function(t,e){if(!e)return!1;var n=t.split(" ").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d %b %y"),cn("%-d %b ’%y"),cn("%d %B %y"),cn("%d-%b-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d-%B-%Y",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[2]>=1e3})),cn("%d-%b-%y"),cn("%d-%B-%y"),cn("%m/%Y",(function(t,e){if(!e)return!1;var n=t.split("/").map(parseFloat);return n[0]>0&&n[0]<=12&&n[1]>=1e3})),cn("%m/%y"),cn("%b %Y",(function(t,e){return!!e&&t.split(" ").map(parseFloat)[1]>=1e3})),cn("%B %Y",(function(t,e){return!!e&&t.split(" ").map(parseFloat)[1]>=1e3})),cn("%b-%y"),cn("%b %y"),cn("%B %y"),cn("%b '%y"),cn("%b ’%y"),cn("%B %-d %Y"),cn("%d %b",(function(t,e){return!!e||!!un(sn["%d %b"])(t)})),cn("%d %B"),cn("%b %d",(function(t,e){return!!e||!!un(sn["%b %d"])(t)})),cn("%B %d"),cn("%d-%m",(function(t,e){if(!e)return!1;var n=t.split("-").map(parseFloat);return n[0]>0&&n[0]<=31&&n[1]>0&&n[1]<=12})),cn("%m-%d"),cn("%d/%m"),cn("%m/%d"),cn("%b %d %Y"),cn("%b %d %Y, %-I.%M%p"),cn("%Y",(function(t,e){if(!e)return!1;var n=parseFloat(t);return n>1499&&n<2200})),cn("%B"),cn("%b"),cn("%X"),cn("%I:%M %p"),cn("%-I.%M%p"),cn("%H:%M",(function(t,e){if(!e)return!1;var n=t.split(":").map(parseFloat);return n[0]>=0&&n[0]<24})),cn("%H:%M:%S"),cn("%M:%S"),cn("%-I%p"),cn("Q%q %Y",(function(t,e){return!!e&&6===t.replace(/\s/g,"").length})),cn("%Y Q%q",(function(t,e){return!!e&&6===t.replace(/\s/g,"").length})),cn("%YM%m",(function(t,e){if(!e)return!1;var n=t.split("M").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=12})),cn("%YQ%q",(function(t,e){if(!e)return!1;var n=t.split("Q").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=4})),cn("%YÁ%q",(function(t,e){if(!e)return!1;var n=t.split("Á").map(parseFloat);return n[0]>=1e3&&n[1]>0&&n[1]<=4}))]);function fn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function pn(t){return(t=fn(Math.abs(t)))?t[1]:NaN}var hn,bn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function gn(t){if(!(e=bn.exec(t)))throw new Error("invalid format: "+t);var e;return new _n({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function _n(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function yn(t,e){var n=fn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}gn.prototype=_n.prototype,_n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var mn={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return yn(100*t,e)},r:yn,s:function(t,e){var n=fn(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(hn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+fn(t,Math.max(0,e+a-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function vn(t){return t}var wn,xn,kn,Mn=Array.prototype.map,zn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function An(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?vn:(e=Mn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),a.push(t.substring(i-=l,i+l)),!((s+=l+1)>r));)l=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?vn:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(Mn.call(t.numerals,String)),s=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"-":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=gn(t)).fill,n=t.align,d=t.sign,f=t.symbol,p=t.zero,h=t.width,b=t.comma,g=t.precision,_=t.trim,y=t.type;"n"===y?(b=!0,y="g"):mn[y]||(void 0===g&&(g=12),_=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var m="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===f?a:/[%p]/.test(y)?s:"",w=mn[y],x=/[defgprs%]/.test(y);function k(t){var i,a,s,f=m,k=v;if("c"===y)k=w(t)+k,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:w(Math.abs(t),g),_&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),M&&0==+t&&"+"!==d&&(M=!1),f=(M?"("===d?d:u:"-"===d||"("===d?"":d)+f,k=("s"===y?zn[8+hn/3]:"")+k+(M&&"("===d?")":""),x)for(i=-1,a=t.length;++i<a;)if(48>(s=t.charCodeAt(i))||s>57){k=(46===s?o+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}b&&!p&&(t=r(t,1/0));var z=f.length+t.length+k.length,A=z<h?new Array(h-z+1).join(e):"";switch(b&&p&&(t=r(A+t,A.length?h-k.length:1/0),A=""),n){case"<":t=f+t+k+A;break;case"=":t=f+A+t+k;break;case"^":t=A.slice(0,z=A.length>>1)+f+t+k+A.slice(z);break;default:t=A+f+t+k}return l(t)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:d,formatPrefix:function(t,e){var n=d(((t=gn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(pn(e)/3))),i=Math.pow(10,-r),a=zn[8+r/3];return function(t){return n(i*t)+a}}}}!function(t){wn=An(t),xn=wn.format,kn=wn.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var Tn={test:on((function(t){return/^(\+|-)?\d{1,3}(,\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:on((function(t){return parseFloat(t.replace(/,/g,""))})),description:"Comma thousand separator, point decimal mark",thousand_separator:",",decimal_mark:".",id:"number$comma_point",example:"12,235.56"},Cn={test:on((function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:on((function(t){return parseFloat(t.replace(/\s/g,""))})),description:"Space thousand separator, point decimal mark",thousand_separator:" ",decimal_mark:".",id:"number$space_point",example:"12 235.56"},En={test:on((function(t){return/^(\+|-)?\d+(\.\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:on((function(t){return parseFloat(t)})),description:"No thousand separator, point decimal mark",thousand_separator:"",decimal_mark:".",id:"number$none_point",example:"12235.56"},Sn={test:on((function(t){return/^(\+|-)?\d{1,3}(\.\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:on((function(t){return parseFloat(t.replace(/\./g,"").replace(/,/,"."))})),description:"Point thousand separator, comma decimal mark",thousand_separator:".",decimal_mark:",",id:"number$point_comma",example:"12.235,56"},Nn={test:on((function(t){return/^(\+|-)?\d{1,3}(\s\d{3})*(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:on((function(t){return parseFloat(t.replace(/\s/g,"").replace(/,/,"."))})),description:"Space thousand separator, comma decimal mark",thousand_separator:" ",decimal_mark:",",id:"number$space_comma",example:"12 235,56"},Fn={test:on((function(t){return/^(\+|-)?\d+(,\d+)?((e|E)(\+|-)?\d+)?$/.test(t.trim())})),parse:on((function(t){return parseFloat(t.replace(/,/,"."))})),description:"No thousand separator, comma decimal mark",thousand_separator:"",decimal_mark:",",id:"number$none_comma",example:"12235,56"},Ln=Object.freeze([Tn,Cn,Sn,Nn,En,Fn]);Ln.forEach((function(t){t.type="number",t.format=function(t){var e,n,r=An({decimal:t.decimal_mark,thousands:t.thousand_separator,grouping:[3],currency:["",""]});return function(t,i){return null===t?"":(i||(i=",.2f"),i!==n&&(n=i,e=r.format(n)),e(t))}}(t),Object.freeze(t)}));var On,jn=Object.freeze({test:function(t){return"string"==typeof t||an(t)},parse:function(t){return"string"==typeof t?t:an(t)},format:function(t){if("string"==typeof t)return t},type:"string",description:"Arbitrary string",id:"string$arbitrary_string"}),$n=Object.freeze({datetime:dn,number:Ln}),Dn=Object.freeze(["datetime","number","string"]),Pn=Object.freeze({n_max:250,n_failing_values:0,failure_fraction:.05,sort:!0}),Un=Object.freeze(Object.keys(Pn));function Bn(t,e){return t.index-e.index}function qn(t,e){return e.n_success-t.n_success||Bn(t,e)}function Hn(t){return(""+t).trim()}function Yn(t){return void 0===t?function(t){return Hn(t)}:"function"==typeof t?function(e,n){return Hn(t(e,n))}:function(e){return Hn(e[""+t])}}function Rn(t){t?Array.isArray(t)||(t=[t]):t=Dn;var e=t.reduce((function(t,e){var n=$n[e];return n&&Array.prototype.push.apply(t,n),t}),[]),n=-1!==t.indexOf("string"),r=Un.reduce((function(t,e){return t[e]=Pn[e],t}),{}),i=function(t,i){i=Yn(i);var a=t.map(i).filter(Boolean);if(!a.length)return n?[jn]:[];var o=Math.min(r.n_max,a.length),l=Math.floor(o*r.failure_fraction),s=r.n_failing_values,u=r.sort?qn:Bn,c=e.slice().reduce((function(t,e,n){for(var r=c=0,i=[],u=!1,c=0;c<o;c++){var d=a[c];if(!e.test(d)&&(++r>l?u=!0:-1===i.indexOf(d)&&(i.push(d),i.length>s&&(u=!0)),u))break}return u||t.push({interp:e,n_success:o-r,index:n}),t}),[]).sort(u).map((function(t){return t.interp}));return n&&c.push(jn),c};return Un.forEach((function(t){var e;i[(e=t,e.replace(/_(\w)/g,(function(t,e){return e.toUpperCase()})))]=function(e){return void 0===e?r[t]:(r[t]=e,i)}})),i}Rn.DATETIME_IDS=Object.freeze(dn.map((function(t){return t.id}))),Rn.NUMBER_IDS=Object.freeze(Ln.map((function(t){return t.id}))),Rn.STRING_IDS=Object.freeze([jn.id]),Rn.getInterpretation=(On=dn.concat(Ln,jn).reduce((function(t,e){return t[e.id]=e,t}),{}),function(t){return On[t]}),Rn._createAccessorFunction=Yn;const In=Rn.getInterpretation,Wn=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk",show_positive_sign:!1});function Vn(t,e){const n=In(e);if(!n)throw new Error(`format_id ${e} not recognised`);if("number"!==n.type)throw new Error(`format_id ${e}not a number format`);const r=n.format,i=n.decimal_mark,a=n.thousand_separator,o=Math.trunc(t.n_dec),l=(a?",":"")+"."+Math.max(0,o)+"f",s=t.strip_zeros&&o>0?new RegExp("\\"+i+"?0+$"):null,u=t.strip_separator&&a,c=t.negative_sign,d=t.show_positive_sign,f=function(t){let e=1;return t.transform_labels&&(e="multiply"===t.transform?t.multiply_divide_constant:"divide"===t.transform?1/t.multiply_divide_constant:Math.pow(10,t.exponentiate_constant)),function(t){return t*e}}(t);return function(e){if(null===e)return"";const n=function(t,e){const n=t=>Math.round(Math.abs(t))*Math.sign(t);if(!(e=e>0?Math.floor(e):Math.ceil(e)))return n(t);const r=Math.pow(10,Math.abs(e));return e>0?n(t*r)/r:n(t/r)*r}(f(e),o),i=n<0,p=Math.abs(n),h=u&&a&&p>=1e3&&p<1e4;let b=r(p,l);return s&&(b=b.replace(s,"")),h&&(b=b.replace(a,"")),!i&&"$-nk"===c&&d?t.prefix+"+"+b+t.suffix:!i&&"-$nk"===c&&d?"+"+t.prefix+b+t.suffix:i&&"none"!==c?"-$nk"===c?"-"+t.prefix+b+t.suffix:"$-nk"===c?t.prefix+"-"+b+t.suffix:"($nk)"===c?"("+t.prefix+b+t.suffix+")":t.prefix+"("+b+")"+t.suffix:t.prefix+b+t.suffix}}function Gn(t){for(let e in Wn)void 0===t[e]&&(t[e]=Wn[e]);return function(e){return Vn(t,e)}}function Xn(t){const e=Rn.getInterpretation(t);if(!e)throw new Error(`format_id ${t} not recognised`);return function(){return e.format(...arguments)}}function Zn(){return this.declarations=[],this}function Jn(t){return this.selector=t,this.styles=[],this}Zn.prototype.select=function(t){if(!t)return this;var e=new Jn(t);return e.parent=this,this.addDeclaration(e),e},Zn.prototype.addDeclaration=function(t){return this.declarations.push(t),this},Zn.prototype.print=function(){var t="";return this.declarations.forEach((function(e){t+=e.selector+" {\n",e.styles.forEach((function(e){t+="\t"+e[0]+": "+e[1]+";\n"})),t+="}\n\n"})),t},Zn.prototype.clear=function(){return this.declarations=[],this},Jn.prototype.style=function(t,e){var n="function"==typeof value_?e():e;return""!==n&&null!=n&&this.styles.push([t,n]),this},Jn.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};var Qn=!1;function Kn(){if(!Qn&&"undefined"!=typeof document){var t,e=((t=new Zn).select(".fl-controls-container").style("display","inline-block").style("line-height","1em"),t.select(".fl-controls-title").style("display","inline-block").style("margin-inline-end","0.5rem"),t.select(".fl-controls-container, .fl-controls-container *").style("box-sizing","border-box"),t.select(".slider-holder").style("margin-bottom","20px"),t.select(".fl-controls-slider, .slider-play").style("pointer-events","all").style("display","inline-block").style("vertical-align","middle"),t.select(".slider-play svg").style("height","100%").style("width","100%").style("display","block").style("cursor"," pointer",""),t.select(".fl-controls-slider svg").style("display","block"),t.select(".slider-play:hover").style("opacity","0.6"),t.select(".fl-control-slider").style("width","100%").style("bottom","0").style("align-items","center"),t.select(".fl-control").style("position","relative"),t.select(".fl-control.hidden").style("display","none"),t.select(".fl-control .button").style("display","inline-flex").style("align-items","center").style("background","#eee").style("padding","0 0.5em").style("margin-right","0.25em").style("margin-bottom","0.25em").style("line-height","1em").style("box-sizing","border-box"),t.select(".fl-control.grouped:not(.hidden)").style("display","inline-table").style("table-layout","fixed").select(".button").style("display","table-cell").style("vertical-align","middle").style("margin","0").style("text-align","center"),t.select(".fl-control .button.selected").style("background","#ddd"),t.select(".fl-control-dropdown").style("line-height","1em").style("position","relative"),t.select(".fl-control-dropdown::after").style("display","block").style("content","''").style("width","10px").style("height","10px").style("background","transparent").style("position","absolute").style("right","5px").style("left","auto").style("top","50%").style("pointer-events","none").style("transform","translateY(calc(-50% + 3px))").style("border-left","5px solid transparent").style("border-right","5px solid transparent").style("border-top","5px solid").style("box-sizing","border-box"),t.select(".is-rtl .fl-control-dropdown::after").style("left","5px").style("right","auto"),t.select(".fl-control-dropdown select").style("-webkit-appearance","none").style("width","100%"),t.print()),n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",r.className="flourish-controls",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),Qn=!0}}function tr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function er(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function nr(){}var rr=.7,ir=1/rr,ar="\\s*([+-]?\\d+)\\s*",or="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sr=/^#([0-9a-f]{3,8})$/,ur=new RegExp("^rgb\\("+[ar,ar,ar]+"\\)$"),cr=new RegExp("^rgb\\("+[lr,lr,lr]+"\\)$"),dr=new RegExp("^rgba\\("+[ar,ar,ar,or]+"\\)$"),fr=new RegExp("^rgba\\("+[lr,lr,lr,or]+"\\)$"),pr=new RegExp("^hsl\\("+[or,lr,lr]+"\\)$"),hr=new RegExp("^hsla\\("+[or,lr,lr,or]+"\\)$"),br={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function gr(){return this.rgb().formatHex()}function _r(){return this.rgb().formatRgb()}function yr(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sr.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?mr(e):3===n?new kr(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?vr(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?vr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ur.exec(t))?new kr(e[1],e[2],e[3],1):(e=cr.exec(t))?new kr(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=dr.exec(t))?vr(e[1],e[2],e[3],e[4]):(e=fr.exec(t))?vr(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=pr.exec(t))?Tr(e[1],e[2]/100,e[3]/100,1):(e=hr.exec(t))?Tr(e[1],e[2]/100,e[3]/100,e[4]):br.hasOwnProperty(t)?mr(br[t]):"transparent"===t?new kr(NaN,NaN,NaN,0):null}function mr(t){return new kr(t>>16&255,t>>8&255,255&t,1)}function vr(t,e,n,r){return r<=0&&(t=e=n=NaN),new kr(t,e,n,r)}function wr(t){return t instanceof nr||(t=yr(t)),t?new kr((t=t.rgb()).r,t.g,t.b,t.opacity):new kr}function xr(t,e,n,r){return 1===arguments.length?wr(t):new kr(t,e,n,null==r?1:r)}function kr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Mr(){return"#"+Ar(this.r)+Ar(this.g)+Ar(this.b)}function zr(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ar(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Tr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Sr(t,e,n,r)}function Cr(t){if(t instanceof Sr)return new Sr(t.h,t.s,t.l,t.opacity);if(t instanceof nr||(t=yr(t)),!t)return new Sr;if(t instanceof Sr)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=e===a?(n-r)/l+6*(n<r):n===a?(r-e)/l+2:(e-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new Sr(o,l,s,t.opacity)}function Er(t,e,n,r){return 1===arguments.length?Cr(t):new Sr(t,e,n,null==r?1:r)}function Sr(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Nr(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}tr(nr,yr,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:gr,formatHex:gr,formatHsl:function(){return Cr(this).formatHsl()},formatRgb:_r,toString:_r}),tr(kr,xr,er(nr,{brighter:function(t){return t=null==t?ir:Math.pow(ir,t),new kr(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?rr:Math.pow(rr,t),new kr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Mr,formatHex:Mr,formatRgb:zr,toString:zr})),tr(Sr,Er,er(nr,{brighter:function(t){return t=null==t?ir:Math.pow(ir,t),new Sr(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?rr:Math.pow(rr,t),new Sr(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new kr(Nr(t>=240?t-240:t+120,i,r),Nr(t,i,r),Nr(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Fr=Math.PI/180,Lr=180/Math.PI,Or=.96422,jr=.82521,$r=4/29,Dr=6/29,Pr=3*Dr*Dr,Ur=Dr*Dr*Dr;function Br(t){if(t instanceof Hr)return new Hr(t.l,t.a,t.b,t.opacity);if(t instanceof Gr)return Xr(t);t instanceof kr||(t=wr(t));var e,n,r=Wr(t.r),i=Wr(t.g),a=Wr(t.b),o=Yr((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=o:(e=Yr((.4360747*r+.3850649*i+.1430804*a)/Or),n=Yr((.0139322*r+.0971045*i+.7141733*a)/jr)),new Hr(116*o-16,500*(e-o),200*(o-n),t.opacity)}function qr(t,e,n,r){return 1===arguments.length?Br(t):new Hr(t,e,n,null==r?1:r)}function Hr(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Yr(t){return t>Ur?Math.pow(t,1/3):t/Pr+$r}function Rr(t){return t>Dr?t*t*t:Pr*(t-$r)}function Ir(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Wr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Vr(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Gr)return new Gr(t.h,t.c,t.l,t.opacity);if(t instanceof Hr||(t=Br(t)),0===t.a&&0===t.b)return new Gr(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Lr;return new Gr(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Gr(t,e,n,null==r?1:r)}function Gr(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Xr(t){if(isNaN(t.h))return new Hr(t.l,0,0,t.opacity);var e=t.h*Fr;return new Hr(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}tr(Hr,qr,er(nr,{brighter:function(t){return new Hr(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Hr(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new kr(Ir(3.1338561*(e=Or*Rr(e))-1.6168667*(t=1*Rr(t))-.4906146*(n=jr*Rr(n))),Ir(-.9787684*e+1.9161415*t+.033454*n),Ir(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),tr(Gr,Vr,er(nr,{brighter:function(t){return new Gr(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Gr(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Xr(this).rgb()}}));var Zr=-.14861,Jr=1.78277,Qr=-.29227,Kr=-.90649,ti=1.97294,ei=ti*Kr,ni=ti*Jr,ri=Jr*Qr-Kr*Zr;function ii(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof ai)return new ai(t.h,t.s,t.l,t.opacity);t instanceof kr||(t=wr(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(ri*r+ei*e-ni*n)/(ri+ei-ni),a=r-i,o=(ti*(n-i)-Qr*a)/Kr,l=Math.sqrt(o*o+a*a)/(ti*i*(1-i)),s=l?Math.atan2(o,a)*Lr-120:NaN;return new ai(s<0?s+360:s,l,i,t.opacity)}(t):new ai(t,e,n,null==r?1:r)}function ai(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}tr(ai,ii,er(nr,{brighter:function(t){return t=null==t?ir:Math.pow(ir,t),new ai(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?rr:Math.pow(rr,t),new ai(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Fr,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new kr(255*(e+n*(Zr*r+Jr*i)),255*(e+n*(Qr*r+Kr*i)),255*(e+n*(ti*r)),this.opacity)}}));var oi="$";function li(){}function si(t,e){var n=new li;if(t instanceof li)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function ui(){var t,e,n,r=[],i=[];function a(n,i,o,l){if(i>=r.length)return null!=t&&n.sort(t),null!=e?e(n):n;for(var s,u,c,d=-1,f=n.length,p=r[i++],h=si(),b=o();++d<f;)(c=h.get(s=p(u=n[d])+""))?c.push(u):h.set(s,[u]);return h.each((function(t,e){l(b,e,a(t,i,o,l))})),b}function o(t,n){if(++n>r.length)return t;var a,l=i[n-1];return null!=e&&n>=r.length?a=t.entries():(a=[],t.each((function(t,e){a.push({key:e,values:o(t,n)})}))),null!=l?a.sort((function(t,e){return l(t.key,e.key)})):a}return n={object:function(t){return a(t,0,ci,di)},map:function(t){return a(t,0,fi,pi)},entries:function(t){return o(a(t,0,fi,pi),0)},key:function(t){return r.push(t),n},sortKeys:function(t){return i[r.length-1]=t,n},sortValues:function(e){return t=e,n},rollup:function(t){return e=t,n}}}function ci(){return{}}function di(t,e,n){t[e]=n}function fi(){return si()}function pi(t,e,n){t.set(e,n)}function hi(){}li.prototype=si.prototype={constructor:li,has:function(t){return oi+t in this},get:function(t){return this[oi+t]},set:function(t,e){return this[oi+t]=e,this},remove:function(t){var e=oi+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===oi&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===oi&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===oi&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===oi&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===oi&&++t;return t},empty:function(){for(var t in this)if(t[0]===oi)return!1;return!0},each:function(t){for(var e in this)e[0]===oi&&t(this[e],e.slice(1),this)}};var bi=si.prototype;function gi(t,e){var n=new hi;if(t instanceof hi)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}hi.prototype=gi.prototype={constructor:hi,has:bi.has,add:function(t){return this[oi+(t+="")]=t,this},remove:bi.remove,clear:bi.clear,values:bi.keys,size:bi.size,empty:bi.empty,each:bi.each};var _i,yi,mi=(_i=document.createElement("canvas").getContext("2d"),function(t,e){return _i.font=e||"10px sans-serif",_i.measureText(t).width});function vi(t,e,n){var r,i,a,o,l,s={},u=ut(n).append("div").attr("class","fl-control fl-control-slider").style("flex","1"),c=u.append("div").attr("class","slider-play").attr("role","button").attr("aria-label","play-button").attr("cursor","pointer").attr("tabindex",0),d=u.append("div").attr("class","fl-controls-slider").style("display","none").style("align-items","center"),f=null;const p=d.append("input").attr("type","range").attr("id","slider-range").attr("name","slider-range").attr("value",0),h=d.append("label").attr("class","slider-label").attr("for","slider-range");var b=function(){clearTimeout(f),f=null},g=function(e){var n=a[e];n.options_index!==t.index()&&(t.index(n.options_index),t.trigger("change"))},_=function(){b(),u.classed("playing",!1),c.html(r).attr("aria-label","play-button"),t._isPlaying_(!1),l=!1},y=function(){var n=t.getSortedIndex(),r=o[n],i=t.n_options-1,a=n<i?n+1:0;f=setTimeout((function(){g(a),e.slider_loop||a<i?y():_()}),r)},m=function(){u.classed("playing",!0),c.html(i).attr("aria-label","pause-button"),y(),t._isPlaying_(!0),l=!0};c.on("click",(function(){null===f?m():_()})).on("keyup",(function(){"Space"!==Q.code&&"Enter"!==Q.code||(Q.preventDefault(),null===f?m():_())}));var v=function(t){const n=Math.min(Math.ceil(t),yi(e.slider_max_label_width))+"px";return h.style("width",n).style("flex-shrink",0),u.style("display","inline-flex"),p.style("width",yi(e.slider_width)+"px"),r='<svg aria-hidden="true" width="25px" height="30px" viewBox="0 0 25 30"> <polygon stroke="none" points="25 15 0 30 0 0"></polygon> </svg>',i='<svg aria-hidden="true" width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1"quarter><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>',c.html(f?i:r),s},w=function(){return _(),u.style("display","none"),s};return s.show=v,s.hide=w,s.update=function(n,r){if(d.style("display","flex"),a=n,!t.n_options||"slider"!==e.control_type)return w(),s;var i=window.getComputedStyle(h.node()).fontSize,c=window.getComputedStyle(h.node()).fontFamily,x=window.getComputedStyle(u.node()).fontWeight;let k=0;const M=x+" "+i+" "+c+", sans-serif";a.forEach((function(t){const e=mi(t.display,M);k=Math.max(k,e)})),r?v(k):w();var z=t.n_options,A=e.slider_loop;o=a.map((function(t,n){return 1e3*(e.slider_step_time+(A&&n===z-1?e.slider_restart_pause:0))}));var T=t.getSortedIndex(),C=a[T],E=a[0].display,S=a[a.length-1].display;return p.attr("min",0).attr("max",z-1).attr("step",1).attr("aria-valuenow",C.display).attr("aria-valuemin",E).attr("aria-valuemax",S).on("input",(function(){var t=null!==f;t&&b(),g(this.value),t&&y()})),p.node().value=T,h.html(C.display),t._isPlaying_()&&!l?m():!t._isPlaying_()&&l&&_(),s},s}var wi=Object.freeze({alignment:"start",controls_spacing:1});function xi(t){for(var e in this._state=t,wi)void 0===this._state[e]&&(this._state[e]=wi[e]);return this}xi.prototype.appendTo=function(t){return this._container=ut(t).append("div").node(),this},xi.prototype.add=function(t){return this._controls=Array.isArray(t)?t:[t],this._controls.forEach((function(t){t&&"function"==typeof t.appendTo?t.appendTo(this._container):console.warn("Please pass valid controls instances to .add()")}),this),this},xi.prototype.update=function(){this._controls.forEach((function(t){t&&"function"==typeof t.update&&t.update()}));var t=this._state.alignment,e="center"==t?t:"flex-"+t,n=window.template||void 0,r=n?n.state.layout:void 0,i=r&&r.read_direction||ut("body").node().dir||"ltr",a=t;"rtl"===i&&"center"!==t&&(a="start"===t?"end":"start"),ut(this._container).classed("is-rtl","rtl"==i).style("display","flex").style("flex-wrap","wrap").style("justify-content",e);var o,l,s=ut(this._container).selectAll(".fl-controls-container"),u=this._state.controls_spacing;switch(a){case"end":o=u+"em",l=0;break;case"center":o=.5*u+"em",l=.5*u+"em";break;default:o=0,l=u+"em"}return s.style("margin-left",o).style("margin-right",l),this};var ki=Object.freeze({control_type:"dropdown",control_title:"",dropdown_width_mode:"auto",dropdown_width_fixed:20,button_group:!0,button_group_width_mode:"auto",button_group_width_fixed:20,slider_width:15,slider_max_label_width:20,slider_handle_height:1,slider_track_height:.2,slider_margin:4.5,slider_play_button:!0,slider_step_time:2,slider_loop:!0,slider_restart_pause:0,sort:!1,_index_:null,_is_playing_:!1});function Mi(t){return t}function zi(t){return null==t?"":t.toString()}function Ai(t,e){var n={},r=Mi,i=zi,a=[],o=!0,l=[],s=[],u=[],c=document.createElement("div");c.setAttribute("class","fl-controls-container");var d=ut(c).append("div").attr("class","fl-controls-title"),f=function(t,e,n){var r={},i=ut(n).append("div").attr("class","fl-control fl-control-dropdown").style("display","none");const a=i.append("select").on("change",(function(){const e=a.select("option:checked").datum().options_index;t.index(e),t.trigger("change")}));var o=function(t){var r="100%";"auto"==e.dropdown_width_mode?r=Math.min(t+40,yi(20))+yi(1)+"px":"fixed"==e.dropdown_width_mode&&(r=yi(e.dropdown_width_fixed)+"px"),n.style.width="full"==e.dropdown_width_mode?r:"",i.style("width",r).style("display","full"!==e.dropdown_width_mode?"inline-table":null)},l=function(){i.style("display","none")};return r.show=o,r.hide=l,r.update=function(n,i){var s=window.getComputedStyle(a.node()).fontSize;if(!t.n_options||"dropdown"!==e.control_type)return l(),r;const u=a.selectAll("option").data(n,(t=>t.value));u.exit().remove();var c=u.enter().append("option");u.merge(c).text((t=>t.display)).attr("value",(t=>t.value));let d=0;const f=s+" sans-serif";return"auto"===e.dropdown_width_mode&&u.merge(c).each((function(t){const e=mi(t.display,f);d=Math.max(d,e)})),a.node().value=t.value(),i?o(d):l(),r},r}(n,t,c),p=function(t,e,n){var r={},i=ut(n).append("div").attr("class","fl-control fl-control-buttons"),a=function(){i.classed("hidden",!1)},o=function(){i.classed("hidden",!0)};return r.show=a,r.hide=o,r.update=function(n,l){if(!t.n_options||"buttons"!==e.control_type)return o(),r;var s=t.index();i.classed("grouped",e.button_group),i.classed("fixed-width","fixed"==e.button_group_width_mode||"full"==e.button_group_width_mode),i.style("width",e.button_group&&"fixed"==e.button_group_width_mode?yi(e.button_group_width_fixed)+"px":"full"==e.button_group_width_mode?"100%":null);var u=function(e){var n=e.options_index;n!==t.index()&&(t.index(n),t.trigger("change"))},c=i.selectAll(".button").data(n,(function(t){return t.display})),d=c.enter().append("div").attr("class","button").style("cursor","pointer").attr("role","button").attr("tabindex",0).on("click",(function(t){u(t)})).on("keyup",(function(t){"Space"!==Q.code&&"Enter"!==Q.code||(Q.preventDefault(),u(t))}));d.append("span").text((function(t){return t.display})),c.merge(d).classed("selected",(function(t){return t.options_index===s})).attr("aria-pressed",(function(t){return t.options_index===s})),c.exit().remove(),l?a():o()},r}(n,t,c),h=vi(n,t,c);for(var b in ki)void 0===t[b]&&(t[b]=ki[b]);var g=t._index_;n.appendTo=function(t){return Kn(),ut(t).node().appendChild(c),n};n.remove=function(){return c.parentElement&&c.parentElement.removeChild(c),n},n.options=function(t){if(void 0===t)return l.slice();if(!Array.isArray(t))return n;var e=(l=t.slice()).length,r=_();return e?(null===r||r>=e)&&_(0):_(null),n},Object.defineProperty(n,"n_options",{get:function(){return l.length}});var _=function(e){return void 0===e?(t._is_playing_||(g=t._index_),g):(null===e||function(t){return l.length&&t>=0&&t<l.length}(e)?(g=e,t._is_playing_||(t._index_=g)):console.warn("Invalid index, ignoring update call"),n)};n.index=_,n.getSortedIndex=function(){var e,n=_();return"unsorted"==t.sort?n:(s.some((function(t,r){if(t.options_index===n)return e=r,!0})),e)},n.value=function(t){if(void 0===t)return l[_()];var e=l.indexOf(t);return-1!==e&&_(e),n},n.on=function(t,e){return"change"===t&&u.push(e.bind(n)),n},n.parse=function(t){return void 0===t?r:(r=null===t?Mi:t,n)},n.format=function(t,e){if(void 0===t)return i;if(null===t&&(i=zi),"string"==typeof t)try{i=Xn(t)}catch(t){i=zi,console.warn(t.message)}else i=t;return e&&Array.isArray(e)&&(a=e),n},n.visible=function(t){return void 0===t?o:(o=null===t||t,n)},n.update=function(){return function(){var t=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;yi=function(e){return e*t}}(),s=function(t,e,n,r,i){var a=t.map((function(t,e){return{value:t,options_index:e,parsed:n(t),display:i.includes(t)?t:r(t)}}));return e?a.sort((function(t,e){return function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}(t.parsed,e.parsed)})):a}(l,t.sort,r,i,a),function(e){c.style.display=e.length>1?"flex":"none",c.style.width="",c.style.alignItems="center",d.node().innerHTML=t.control_title,d.node().style.display=""===t.control_title?"none":"inline-block",h.update(e,o),f.update(e,o),p.update(e,o)}(s),n},n.trigger=function(t){var e,r;return"change"===t&&(e=_(),r=l[e],u.forEach((function(t){t(r,e)}))),n},n.getNode=function(){return c};return n._isPlaying_=function(e){if(void 0===e)return t._is_playing_;t._is_playing_=!!e,e||_(g)},n}function Ti(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ci(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Ei(){}var Si=.7,Ni=1/Si,Fi="\\s*([+-]?\\d+)\\s*",Li="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ji=/^#([0-9a-f]{3,8})$/,$i=new RegExp(`^rgb\\(${Fi},${Fi},${Fi}\\)$`),Di=new RegExp(`^rgb\\(${Oi},${Oi},${Oi}\\)$`),Pi=new RegExp(`^rgba\\(${Fi},${Fi},${Fi},${Li}\\)$`),Ui=new RegExp(`^rgba\\(${Oi},${Oi},${Oi},${Li}\\)$`),Bi=new RegExp(`^hsl\\(${Li},${Oi},${Oi}\\)$`),qi=new RegExp(`^hsla\\(${Li},${Oi},${Oi},${Li}\\)$`),Hi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Yi(){return this.rgb().formatHex()}function Ri(){return this.rgb().formatRgb()}function Ii(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ji.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Wi(e):3===n?new Zi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Vi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Vi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=$i.exec(t))?new Zi(e[1],e[2],e[3],1):(e=Di.exec(t))?new Zi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Pi.exec(t))?Vi(e[1],e[2],e[3],e[4]):(e=Ui.exec(t))?Vi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Bi.exec(t))?na(e[1],e[2]/100,e[3]/100,1):(e=qi.exec(t))?na(e[1],e[2]/100,e[3]/100,e[4]):Hi.hasOwnProperty(t)?Wi(Hi[t]):"transparent"===t?new Zi(NaN,NaN,NaN,0):null}function Wi(t){return new Zi(t>>16&255,t>>8&255,255&t,1)}function Vi(t,e,n,r){return r<=0&&(t=e=n=NaN),new Zi(t,e,n,r)}function Gi(t){return t instanceof Ei||(t=Ii(t)),t?new Zi((t=t.rgb()).r,t.g,t.b,t.opacity):new Zi}function Xi(t,e,n,r){return 1===arguments.length?Gi(t):new Zi(t,e,n,null==r?1:r)}function Zi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Ji(){return`#${ea(this.r)}${ea(this.g)}${ea(this.b)}`}function Qi(){const t=Ki(this.opacity);return`${1===t?"rgb(":"rgba("}${ta(this.r)}, ${ta(this.g)}, ${ta(this.b)}${1===t?")":`, ${t})`}`}function Ki(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function ta(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ea(t){return((t=ta(t))<16?"0":"")+t.toString(16)}function na(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new aa(t,e,n,r)}function ra(t){if(t instanceof aa)return new aa(t.h,t.s,t.l,t.opacity);if(t instanceof Ei||(t=Ii(t)),!t)return new aa;if(t instanceof aa)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,l=a-i,s=(a+i)/2;return l?(o=e===a?(n-r)/l+6*(n<r):n===a?(r-e)/l+2:(e-n)/l+4,l/=s<.5?a+i:2-a-i,o*=60):l=s>0&&s<1?0:o,new aa(o,l,s,t.opacity)}function ia(t,e,n,r){return 1===arguments.length?ra(t):new aa(t,e,n,null==r?1:r)}function aa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function oa(t){return(t=(t||0)%360)<0?t+360:t}function la(t){return Math.max(0,Math.min(1,t||0))}function sa(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Ti(Ei,Ii,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Yi,formatHex:Yi,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return ra(this).formatHsl()},formatRgb:Ri,toString:Ri}),Ti(Zi,Xi,Ci(Ei,{brighter(t){return t=null==t?Ni:Math.pow(Ni,t),new Zi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Si:Math.pow(Si,t),new Zi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Zi(ta(this.r),ta(this.g),ta(this.b),Ki(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ji,formatHex:Ji,formatHex8:function(){return`#${ea(this.r)}${ea(this.g)}${ea(this.b)}${ea(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Qi,toString:Qi})),Ti(aa,ia,Ci(Ei,{brighter(t){return t=null==t?Ni:Math.pow(Ni,t),new aa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Si:Math.pow(Si,t),new aa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Zi(sa(t>=240?t-240:t+120,i,r),sa(t,i,r),sa(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new aa(oa(this.h),la(this.s),la(this.l),Ki(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ki(this.opacity);return`${1===t?"hsl(":"hsla("}${oa(this.h)}, ${100*la(this.s)}%, ${100*la(this.l)}%${1===t?")":`, ${t})`}`}}));const ua=Math.PI/180,ca=180/Math.PI,da=.96422,fa=.82521,pa=4/29,ha=6/29,ba=3*ha*ha,ga=ha*ha*ha;function _a(t){if(t instanceof ya)return new ya(t.l,t.a,t.b,t.opacity);if(t instanceof Ma)return za(t);t instanceof Zi||(t=Gi(t));var e,n,r=xa(t.r),i=xa(t.g),a=xa(t.b),o=ma((.2225045*r+.7168786*i+.0606169*a)/1);return r===i&&i===a?e=n=o:(e=ma((.4360747*r+.3850649*i+.1430804*a)/da),n=ma((.0139322*r+.0971045*i+.7141733*a)/fa)),new ya(116*o-16,500*(e-o),200*(o-n),t.opacity)}function ya(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function ma(t){return t>ga?Math.pow(t,1/3):t/ba+pa}function va(t){return t>ha?t*t*t:ba*(t-pa)}function wa(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function xa(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ka(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof Ma)return new Ma(t.h,t.c,t.l,t.opacity);if(t instanceof ya||(t=_a(t)),0===t.a&&0===t.b)return new Ma(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ca;return new Ma(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new Ma(t,e,n,null==r?1:r)}function Ma(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function za(t){if(isNaN(t.h))return new ya(t.l,0,0,t.opacity);var e=t.h*ua;return new ya(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Aa(t,e){if("string"==typeof t&&(t=document.querySelector(t)),!t)return console.error("No valid target in createScreenshotSVG"),null;const{width:n,height:r,x:i,y:a}=t.getBoundingClientRect(),o=document.createElementNS("http://www.w3.org/2000/svg","svg");return o.id=e,o.classList.add("flourish-screenshot-svg-container"),o.style.left=i+"px",o.style.top=a+"px",o.style.width=n+"px",o.style.height=r+"px",o.style.position="absolute",t.appendChild(o),{addTextElements:function(e){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addTextElements"),null;for(const t of e){const{x:e,y:n,width:r}=t.getBoundingClientRect(),i=document.createElementNS("http://www.w3.org/2000/svg","text"),{color:a,"font-family":l,"font-size":s,"font-weight":u,"line-height":c,"padding-left":d,"padding-top":f}=window.getComputedStyle(t),p=`${u} ${s} ${l}`,h=Pa(t.innerText,p,null,Math.ceil(r)),b=isNaN(parseFloat(c))?1.2*parseFloat(s)+"px":c,g=window.getComputedStyle(t.closest("[style*='opacity']")||t).opacity;h.forEach(((t,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.innerHTML=t,r.setAttribute("dy",0===n?parseFloat(f):b),r.setAttribute("dx",parseFloat(d)),r.setAttribute("x",e),r.setAttribute("opacity",g),i.appendChild(r)})),i.style.dominantBaseline="text-before-edge",i.setAttribute("x",e+"px"),i.setAttribute("y",n+"px"),i.setAttribute("font-family",l),i.setAttribute("font-size",s),i.setAttribute("font-weight",u),i.setAttribute("fill",a),o.appendChild(i)}return this},addCircleElements:function(e){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addCircleElements"),null;for(const t of e){const e=document.createElementNS("http://www.w3.org/2000/svg","circle"),{x:n,y:r,width:i}=t.getBoundingClientRect(),a=window.getComputedStyle(t)["background-color"],l=window.getComputedStyle(t.closest("[style*='opacity']")||t).opacity,s=i/2;e.setAttribute("cx",n+s+"px"),e.setAttribute("cy",r+s+"px"),e.setAttribute("r",s+"px"),e.setAttribute("opacity",l),e.setAttribute("fill",a),"rgba(0, 0, 0, 0)"===a&&e.setAttribute("stroke","#CCC"),o.appendChild(e)}return this},addSwatchElements:function(e,n){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addSwatchElements"),null;"string"==typeof n&&(n=t.querySelectorAll(n));for(const[t,r]of e.entries()){const e=document.createElementNS("http://www.w3.org/2000/svg","rect"),{x:i,y:a,width:l,height:s}=r.getBoundingClientRect(),u=n[t]?.getBoundingClientRect()?.y,c=window.getComputedStyle(r)["background-color"],d=window.getComputedStyle(r).border,[,f,p,h,b]=d.replace(/\s/g,"").match(/rgba?\((\d+(?:\.\d+)?),(\d+(?:\.\d+)?),(\d+(?:\.\d+)?)(?:,(\d+(?:\.\d+)?))?\)/i),g=b?`rgba(${f},${p},${h},${b})`:`rgb(${f},${p},${h})`||"#000",_=d.split(" ")[0]||0;let y=window.getComputedStyle(r)["border-radius"]||0;y=parseFloat(y);const m=window.getComputedStyle(r.closest("[style*='opacity']")||r).opacity;e.setAttribute("x",i),e.setAttribute("y",u||a),e.setAttribute("width",`${l}px`),e.setAttribute("height",`${s}px`),e.setAttribute("rx",y),e.setAttribute("ry",y),e.setAttribute("opacity",m),e.setAttribute("fill",c),e.setAttribute("stroke",g),e.setAttribute("stroke-width",_),"rgba(0, 0, 0, 0)"===c&&e.setAttribute("stroke","#CCC"),o.appendChild(e)}return this},addGradient:function(e,n,r){if("string"==typeof e&&(e=t.querySelector(e)),!e)return console.error("No valid els inside addCircleElements"),null;const i=document.createElementNS("http://www.w3.org/2000/svg","g"),{x:a,y:l,width:s,height:u}=e.getBoundingClientRect(),{max:c,min:d}=r,f=c-d;for(let t=0;t<=s;t++){const e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("stroke",n(d+t*f/s)),e.setAttribute("x1",t+a),e.setAttribute("y1",l),e.setAttribute("x2",t+a),e.setAttribute("y2",u+l),i.appendChild(e)}return o.appendChild(i),this},remove:function(){o.remove()}}}function Ta(t){return"string"==typeof t&&null!=t.match(/^(https?:\/\/|data:)/i)}Ti(ya,(function(t,e,n,r){return 1===arguments.length?_a(t):new ya(t,e,n,null==r?1:r)}),Ci(Ei,{brighter(t){return new ya(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new ya(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Zi(wa(3.1338561*(e=da*va(e))-1.6168667*(t=1*va(t))-.4906146*(n=fa*va(n))),wa(-.9787684*e+1.9161415*t+.033454*n),wa(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),Ti(Ma,ka,Ci(Ei,{brighter(t){return new Ma(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Ma(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return za(this).rgb()}}));const Ca="undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement&&"function"==typeof document.body?.appendChild&&"undefined"!=typeof HTMLElement,Ea=document.createElement("canvas"),Sa=Ea.getContext("2d"),Na=document.createElementNS("http://www.w3.org/2000/svg","svg"),Fa=document.createElementNS("http://www.w3.org/2000/svg","text");Na.appendChild(Fa),Ca&&(Ea.style.position="fixed",Ea.style.left="1000vw",Na.style.position="fixed",Na.style.left="1000vw",document.body.appendChild(Ea),document.body.appendChild(Na));let La=null;function Oa(t){var e,n;return window.innerWidth!==e&&(e=window.innerWidth,n=parseFloat(getComputedStyle(document.documentElement).fontSize)),t*n}function ja(t,e){return function(t,e){Sa.font=e||"10px sans-serif";var n=Sa.measureTextWithTnums(t);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}(t,e).width}function $a(){return window.getComputedStyle(document.body).direction||"ltr"}function Da(t,e){var n=function(t,e){if("string"!=typeof t)return!1;var n=Ii(t);return n.opacity=void 0!==e?e:1,n}(t,e);return!!n&&n.toString()}function Pa(t,e,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];"string"!=typeof t&&(t=String(t));const a=t=>Sa.measureTextWithTnums(t).width>r,o=(t,e)=>{let n=Sa.measureText(t).width;if(n<=e)return t;let r=1,i=t;do{i=t.substring(0,t.length-r)+"…",n=Sa.measureTextWithTnums(i).width}while(n>e&&++r<t.length);return i.length<1&&(i=t.substring(0,1)+"…"),i};Sa.font=e;let l=[];if(Object.defineProperty(l,"widest_line",{value:0,enumerable:!0,writable:!0}),Object.defineProperty(l,"has_truncated",{value:!1,enumerable:!0,writable:!0}),void 0===t||Number.isInteger(n)&&n<=0)return l;if(0===t.length)return l.push(""),l;if(r<=0)return t.length>0&&(l.push(t.slice(0,1)+"…"),l.widest_line=Sa.measureTextWithTnums(l[0]).width),l;if(!t||0===t.length||0===n||r<=0)return l;const s=t.split(/\s+/g);if(!a(t))return l.push(t),l.widest_line=Sa.measureTextWithTnums(t).width,l.has_truncated=!1,l;let u=new String(s[0]);if(u&&a(u))return i?u=o(u,r):s.length>1&&(u+="…"),l.push(u),l.widest_line=Sa.measureTextWithTnums(u).width,l.has_truncated=!0,l;let c="",d=!1;if(s.forEach((t=>{if(!d)if(a(c+(c?" ":"")+t)){if(c){Sa.measureTextWithTnums(c).width>r&&(c=o(c,r),d=!0),l.push(c),c=""}c=t}else c+=(c?" ":"")+t})),c&&!d&&l.push(o(c,r)),l.length>n){if(l.length>n&&Number.isInteger(n)){l.splice(n,l.length-n);let t=l[l.length-1];a(t+"…")&&(t=o(t,r-Sa.measureTextWithTnums("…").width)),"…"!==t.slice(-1)&&(t+="…"),l[l.length-1]=t,d=!0}}return l.widest_line=Math.max(...l.map((t=>Sa.measureTextWithTnums(t).width))),l.has_truncated=d,l}var Ua,Ba,qa;function Ha(){document.body.querySelector(".font-samples").innerHTML=""}function Ya(t){qa||(qa=t||["normal","bold"]);var e="";["mobile_big","tablet","desktop","big_screen"].forEach((function(t){var n="@media(min-width: "+ku["breakpoint_"+t]+"px) {\n",r="html { font-size:"+ku["font_size_"+t]+"%; }";e+=n+r+"\n}\n\n"}));var n="html { \n font-size:"+ku.font_size_mobile_small+"%; \n -webkit-font-smoothing: antialiased; \n -moz-osx-font-smoothing: auto; } \n\n\n";Ua.innerHTML=n+e;var r=[ku.body_font,ku.title_font,ku.subtitle_font,ku.footer_font];r.forEach((function(t){if(t){for(var e=!1,n=document.head.querySelectorAll("link.layout-font"),r=0;r<n.length;r++){n[r].href==t.url&&(e=!0)}if(!e){var i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("href",t.url),i.className="layout-font",document.head.appendChild(i),function(t){document.body.querySelector(".font-samples")||((Ba=document.createElement("div")).className="font-samples",Ba.style.visibility="hidden",Ba.style.overflow="hidden",Ba.style.height=0,document.body.appendChild(Ba)),qa.forEach((function(e){var n=document.createElement("div");n.className="font-sample-el",n.innerText=t.name,n.style.fontFamily=t.name,n.style.fontWeight=e,Ba.appendChild(n)}))}(t)}}}));for(var i=document.head.querySelectorAll("link.layout-font"),a=0;a<i.length;a++){var o=i[a],l=!1;r.forEach((function(t){t&&t.url==o.href&&(l=!0)})),l||o.parentElement.removeChild(o)}document.body.style.fontFamily=ku.body_font.name}Sa.measureTextWithTnums=function(t){if(!Ca)return Sa.measureText(t);const e=window.getComputedStyle(this.canvas);if(!((e.fontFeatureSettings||"").includes("tnum")||(e.fontVariantNumeric||"").includes("tabular-nums")))return this.measureText(t);if(null===La&&function(){const t="0123456789.,£",e=document.createElement("canvas"),n=document.createElement("canvas"),r=e.getContext("2d"),i=n.getContext("2d");e.setAttribute("style","font-feature-settings: normal; font-variant-numeric: normal; position: fixed; left: 1000vw;"),n.setAttribute("style",'font-feature-settings: "tnum" 1; font-variant-numeric: tabular-nums; position: fixed; left: 1000vw;'),r.font=i.font=Sa.font,document.body.appendChild(e),document.body.appendChild(n);const a=r.measureText(t).width,o=i.measureText(t).width;La=a!==o,document.body.removeChild(e),document.body.removeChild(n)}(),La)return this.measureText(t);Fa.textContent=t,Fa.setAttribute("style",`font: ${Sa.font}; font-feature-settings: 'tnum' 1; font-variant-numeric: tabular-nums; position: fixed; left: 1000vw;`);let n=Fa.getBBox().width;return{...this.measureText(t),width:n}};var Ra,Ia,Wa,Va,Ga,Xa,Za,Ja,Qa,Ka,to=Object.freeze({"stack-default":["header","controls","legend","primary","footer"],"stack-2":["primary","header","controls","legend","footer"],"stack-3":["header","primary","controls","legend","footer"],"stack-4":["controls","primary","header","legend","footer"],"stack-5":["header","controls","primary","legend","footer"],"stack-6":["header","legend","primary","controls","footer"],"grid-1":{wrapper:{display:"grid","grid-template-rows":"min-content min-content minmax(min-content,auto) min-content","grid-template-columns":"1fr 2fr"},header:{"grid-column-start":1},legend:{"grid-column-start":1},controls:{"grid-column-start":1},primary:{"grid-column-start":2,"grid-row":"1 / -1"},footer:{"grid-column-start":"1","grid-row-start":4}}});function eo(t){return window.innerWidth!==Ra&&(Ra=window.innerWidth,Ia=parseFloat(getComputedStyle(document.documentElement).fontSize)),t*Ia}function no(t){return"justify"==t?"":"left"==t?"start":"right"==t?"end":"center"==t?"center":void 0}function ro(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"http://"+t:t}function io(){return ku.header_logo_enabled&&ku.header_logo_src}function ao(){var t="top"==ku.header_border||"top_and_bottom"==ku.header_border,e="bottom"==ku.header_border||"top_and_bottom"==ku.header_border;Wa.style.textAlign=no(ku.header_align),Wa.style.margin=0,Wa.style.borderTop=t?ku.header_border_width+"px "+ku.header_border_style+" "+ku.header_border_color:null,Wa.style.borderBottom=e?ku.header_border_width+"px "+ku.header_border_style+" "+ku.header_border_color:null,Wa.style.paddingTop=t?ku.header_border_space+"rem":"",Wa.style.paddingBottom=e?ku.header_border_space+"rem":"",Va.innerHTML=ku.title?ku.title:"",Va.setAttribute("id","flourish-header-title"),Va.style.fontFamily=ku.title_font?ku.title_font.name:"inherit",Va.style.fontSize=("custom"!=ku.title_size?ku.title_size:ku.title_size_custom)+"rem",Va.style.lineHeight=ku.title_line_height,Va.style.fontWeight=ku.title_weight,Va.style.color=ku.title_color||ku.font_color,Va.style.margin=0,Va.style.paddingTop=ku.title?("custom"==ku.title_space_above?ku.title_space_above_custom:ku.title_space_above)+"rem":0,Ga.innerHTML=ku.subtitle?ku.subtitle:"",Ga.setAttribute("id","flourish-header-subtitle"),Ga.style.fontFamily=ku.subtitle_font?ku.subtitle_font.name:"inherit",Ga.style.fontSize=("custom"!=ku.subtitle_size?ku.subtitle_size:ku.subtitle_size_custom)+"rem",Ga.style.lineHeight=ku.subtitle_line_height,Ga.style.fontWeight=ku.subtitle_weight,Ga.style.color=ku.subtitle_color||ku.font_color,Ga.style.margin=0,Ga.style.paddingTop=ku.subtitle?("custom"==ku.subtitle_space_above?ku.subtitle_space_above_custom:ku.subtitle_space_above)+"rem":0,Xa.innerHTML=ku.header_text?ku.header_text:"",Xa.setAttribute("id","flourish-header-text"),Xa.style.fontSize=("custom"!=ku.header_text_size?ku.header_text_size:ku.header_text_size_custom)+"rem",Xa.style.lineHeight=ku.header_text_line_height,Xa.style.fontWeight=ku.header_text_weight,Xa.style.margin=0,Xa.style.color=ku.header_text_color||ku.font_color,Xa.style.paddingTop=ku.header_text?("custom"==ku.header_text_space_above?ku.header_text_space_above_custom:ku.header_text_space_above)+"rem":0,Za.style.clear="both",Ja.innerHTML="",io()&&((Qa=Qa||document.createElement("img")).className="flourish-header-logo",Qa.src=ro(ku.header_logo_src),Qa.alt=ku.header_logo_alt,Qa.style.position="inside"==ku.header_logo_align?"":"fixed",Qa.style.height=ku.header_logo_height+"rem",Qa.style.top="outside"==ku.header_logo_align?0:"",Qa.style.left="outside"==ku.header_logo_align&&"left"==ku.header_logo_position_outside?0:"",Qa.style.right="outside"==ku.header_logo_align&&"right"==ku.header_logo_position_outside?0:"",Qa.style.marginTop=ku.header_logo_margin_top+"rem",Qa.style.marginBottom=ku.header_logo_margin_bottom+"rem",Qa.style.marginLeft=ku.header_logo_margin_left+"rem",Qa.style.marginRight=ku.header_logo_margin_right+"rem",Qa.style.float="top"==ku.header_logo_position_inside||"outside"==ku.header_logo_align?"":ku.header_logo_position_inside,Qa.style.width="auto",ku.header_logo_link_url?((Ka=document.createElement("a")).target="_blank",Ka.appendChild(Qa),Ja.appendChild(Ka),Qa.style.cursor="pointer",Ka.href=ro(ku.header_logo_link_url)):Ja.appendChild(Qa))}
/** @preserve
  /////    SAPC APCA - Advanced Perceptual Contrast Algorithm
  /////           Beta 0.1.9 W3 • contrast function only
  /////           DIST: W3 • Revision date: July 3, 2022
  /////    Function to parse color values and determine Lc contrast
  /////    Copyright © 2019-2022 by Andrew Somers. All Rights Reserved.
  /////    LICENSE: W3 LICENSE
  /////    CONTACT: Please use the ISSUES or DISCUSSIONS tab at:
  /////    https://github.com/Myndex/SAPC-APCA/
  /////
  ///////////////////////////////////////////////////////////////////////////////
  /////
  /////    MINIMAL IMPORTS:
  /////      import { APCAcontrast, sRGBtoY, displayP3toY,
  /////               calcAPCA, fontLookupAPCA } from 'apca-w3';
  /////      import { colorParsley } from 'colorparsley';
  /////
  /////    FORWARD CONTRAST USAGE:
  /////      Lc = APCAcontrast( sRGBtoY( TEXTcolor ) , sRGBtoY( BACKGNDcolor ) );
  /////    Where the colors are sent as an rgba array [255,255,255,1]
  /////
  /////    Retrieving an array of font sizes for the contrast:
  /////      fontArray = fontLookupAPCA(Lc);
  /////
  /////    Live Demonstrator at https://www.myndex.com/APCA/
  // */
const oo={mainTRC:2.4,get mainTRCencode(){return 1/this.mainTRC},sRco:.2126729,sGco:.7151522,sBco:.072175,normBG:.56,normTXT:.57,revTXT:.62,revBG:.65,blkThrs:.022,blkClmp:1.414,scaleBoW:1.14,scaleWoB:1.14,loBoWoffset:.027,loWoBoffset:.027,deltaYmin:5e-4,loClip:.1,mFactor:1.9468554433171,get mFactInv(){return 1/this.mFactor},mOffsetIn:.0387393816571401,mExpAdj:.283343396420869,get mExp(){return this.mExpAdj/this.blkClmp},mOffsetOut:.312865795870758};function lo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];function e(t){return Math.pow(t/255,oo.mainTRC)}return oo.sRco*e(t[0])+oo.sGco*e(t[1])+oo.sBco*e(t[2])}function so(t,e){if("string"!=typeof t)return!1;var n=Ii(t);return n.opacity=1,n}function uo(t,e){if(!t||!e)return void console.warn("No valid color",t,e);const n=lo(Object.values(so(t))),r=lo(Object.values(so(e)));return Math.abs(function(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;const r=[0,1.1];if(isNaN(t)||isNaN(e)||Math.min(t,e)<r[0]||Math.max(t,e)>r[1])return 0;let i=0,a=0,o="BoW";return t=t>oo.blkThrs?t:t+Math.pow(oo.blkThrs-t,oo.blkClmp),e=e>oo.blkThrs?e:e+Math.pow(oo.blkThrs-e,oo.blkClmp),Math.abs(e-t)<oo.deltaYmin?0:(e>t?(i=(Math.pow(e,oo.normBG)-Math.pow(t,oo.normTXT))*oo.scaleBoW,a=i<oo.loClip?0:i-oo.loBoWoffset):(o="WoB",i=(Math.pow(e,oo.revBG)-Math.pow(t,oo.revTXT))*oo.scaleWoB,a=i>-oo.loClip?0:i+oo.loWoBoffset),n<0?100*a:0==n?Math.round(100*Math.abs(a))+"<sub>"+o+"</sub>":Number.isInteger(n)?(100*a).toFixed(n):0)}(n,r))}function co(t){if(!t)return void console.warn("No valid color",t);const e=uo("#000000",t);return uo("#ffffff",t)<e}const fo=new Date,po=new Date;function ho(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,a)=>{const o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;let l;do{o.push(l=new Date(+n)),e(n,a),t(n)}while(l<n&&n<r);return o},i.filter=n=>ho((e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),((t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})),n&&(i.count=(e,r)=>(fo.setTime(+e),po.setTime(+r),t(fo),t(po),Math.floor(n(fo,po))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t==0:e=>i.count(0,e)%t==0):i:null)),i}const bo=6e4,go=864e5,_o=6048e5,yo=ho((t=>t.setHours(0,0,0,0)),((t,e)=>t.setDate(t.getDate()+e)),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bo)/go),(t=>t.getDate()-1));yo.range;const mo=ho((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/go),(t=>t.getUTCDate()-1));mo.range;const vo=ho((t=>{t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+e)}),((t,e)=>(e-t)/go),(t=>Math.floor(t/go)));function wo(t){return ho((e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),((t,e)=>{t.setDate(t.getDate()+7*e)}),((t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*bo)/_o))}vo.range;const xo=wo(0),ko=wo(1),Mo=wo(2),zo=wo(3),Ao=wo(4),To=wo(5),Co=wo(6);function Eo(t){return ho((e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)}),((t,e)=>(e-t)/_o))}xo.range,ko.range,Mo.range,zo.range,Ao.range,To.range,Co.range;const So=Eo(0),No=Eo(1),Fo=Eo(2),Lo=Eo(3),Oo=Eo(4),jo=Eo(5),$o=Eo(6);So.range,No.range,Fo.range,Lo.range,Oo.range,jo.range,$o.range;const Do=ho((t=>{t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,e)=>{t.setFullYear(t.getFullYear()+e)}),((t,e)=>e.getFullYear()-t.getFullYear()),(t=>t.getFullYear()));Do.every=t=>isFinite(t=Math.floor(t))&&t>0?ho((e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,n)=>{e.setFullYear(e.getFullYear()+n*t)})):null,Do.range;const Po=ho((t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)}),((t,e)=>e.getUTCFullYear()-t.getUTCFullYear()),(t=>t.getUTCFullYear()));function Uo(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bo(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function qo(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}Po.every=t=>isFinite(t=Math.floor(t))&&t>0?ho((e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null,Po.range;var Ho,Yo,Ro={"-":"",_:" ",0:"0"},Io=/^\s*\d+/,Wo=/^%/,Vo=/[\\^$*+?|[\]().{}]/g;function Go(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function Xo(t){return t.replace(Vo,"\\$&")}function Zo(t){return new RegExp("^(?:"+t.map(Xo).join("|")+")","i")}function Jo(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Qo(t,e,n){var r=Io.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ko(t,e,n){var r=Io.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function tl(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function el(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function nl(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function rl(t,e,n){var r=Io.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function il(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function al(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function ol(t,e,n){var r=Io.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function ll(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function sl(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ul(t,e,n){var r=Io.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function cl(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function dl(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function fl(t,e,n){var r=Io.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function pl(t,e,n){var r=Io.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function hl(t,e,n){var r=Io.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function bl(t,e,n){var r=Wo.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function gl(t,e,n){var r=Io.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function _l(t,e,n){var r=Io.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function yl(t,e){return Go(t.getDate(),e,2)}function ml(t,e){return Go(t.getHours(),e,2)}function vl(t,e){return Go(t.getHours()%12||12,e,2)}function wl(t,e){return Go(1+yo.count(Do(t),t),e,3)}function xl(t,e){return Go(t.getMilliseconds(),e,3)}function kl(t,e){return xl(t,e)+"000"}function Ml(t,e){return Go(t.getMonth()+1,e,2)}function zl(t,e){return Go(t.getMinutes(),e,2)}function Al(t,e){return Go(t.getSeconds(),e,2)}function Tl(t){var e=t.getDay();return 0===e?7:e}function Cl(t,e){return Go(xo.count(Do(t)-1,t),e,2)}function El(t){var e=t.getDay();return e>=4||0===e?Ao(t):Ao.ceil(t)}function Sl(t,e){return t=El(t),Go(Ao.count(Do(t),t)+(4===Do(t).getDay()),e,2)}function Nl(t){return t.getDay()}function Fl(t,e){return Go(ko.count(Do(t)-1,t),e,2)}function Ll(t,e){return Go(t.getFullYear()%100,e,2)}function Ol(t,e){return Go((t=El(t)).getFullYear()%100,e,2)}function jl(t,e){return Go(t.getFullYear()%1e4,e,4)}function $l(t,e){var n=t.getDay();return Go((t=n>=4||0===n?Ao(t):Ao.ceil(t)).getFullYear()%1e4,e,4)}function Dl(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Go(e/60|0,"0",2)+Go(e%60,"0",2)}function Pl(t,e){return Go(t.getUTCDate(),e,2)}function Ul(t,e){return Go(t.getUTCHours(),e,2)}function Bl(t,e){return Go(t.getUTCHours()%12||12,e,2)}function ql(t,e){return Go(1+mo.count(Po(t),t),e,3)}function Hl(t,e){return Go(t.getUTCMilliseconds(),e,3)}function Yl(t,e){return Hl(t,e)+"000"}function Rl(t,e){return Go(t.getUTCMonth()+1,e,2)}function Il(t,e){return Go(t.getUTCMinutes(),e,2)}function Wl(t,e){return Go(t.getUTCSeconds(),e,2)}function Vl(t){var e=t.getUTCDay();return 0===e?7:e}function Gl(t,e){return Go(So.count(Po(t)-1,t),e,2)}function Xl(t){var e=t.getUTCDay();return e>=4||0===e?Oo(t):Oo.ceil(t)}function Zl(t,e){return t=Xl(t),Go(Oo.count(Po(t),t)+(4===Po(t).getUTCDay()),e,2)}function Jl(t){return t.getUTCDay()}function Ql(t,e){return Go(No.count(Po(t)-1,t),e,2)}function Kl(t,e){return Go(t.getUTCFullYear()%100,e,2)}function ts(t,e){return Go((t=Xl(t)).getUTCFullYear()%100,e,2)}function es(t,e){return Go(t.getUTCFullYear()%1e4,e,4)}function ns(t,e){var n=t.getUTCDay();return Go((t=n>=4||0===n?Oo(t):Oo.ceil(t)).getUTCFullYear()%1e4,e,4)}function rs(){return"+0000"}function is(){return"%"}function as(t){return+t}function os(t){return Math.floor(+t/1e3)}!function(t){Ho=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,l=t.months,s=t.shortMonths,u=Zo(i),c=Jo(i),d=Zo(a),f=Jo(a),p=Zo(o),h=Jo(o),b=Zo(l),g=Jo(l),_=Zo(s),y=Jo(s),m={a:function(t){return o[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return s[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:null,d:yl,e:yl,f:kl,g:Ol,G:$l,H:ml,I:vl,j:wl,L:xl,m:Ml,M:zl,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:as,s:os,S:Al,u:Tl,U:Cl,V:Sl,w:Nl,W:Fl,x:null,X:null,y:Ll,Y:jl,Z:Dl,"%":is},v={a:function(t){return o[t.getUTCDay()]},A:function(t){return a[t.getUTCDay()]},b:function(t){return s[t.getUTCMonth()]},B:function(t){return l[t.getUTCMonth()]},c:null,d:Pl,e:Pl,f:Yl,g:ts,G:ns,H:Ul,I:Bl,j:ql,L:Hl,m:Rl,M:Il,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:as,s:os,S:Wl,u:Vl,U:Gl,V:Zl,w:Jl,W:Ql,x:null,X:null,y:Kl,Y:es,Z:rs,"%":is},w={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=b.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return M(t,e,n,r)},d:sl,e:sl,f:hl,g:il,G:rl,H:cl,I:cl,j:ul,L:pl,m:ll,M:dl,p:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:ol,Q:gl,s:_l,S:fl,u:Ko,U:tl,V:el,w:Qo,W:nl,x:function(t,e,r){return M(t,n,e,r)},X:function(t,e,n){return M(t,r,e,n)},y:il,Y:rl,Z:al,"%":bl};function x(t,e){return function(n){var r,i,a,o=[],l=-1,s=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++l<u;)37===t.charCodeAt(l)&&(o.push(t.slice(s,l)),null!=(i=Ro[r=t.charAt(++l)])?r=t.charAt(++l):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),s=l+1);return o.push(t.slice(s,l)),o.join("")}}function k(t,e){return function(n){var r,i,a=qo(1900,void 0,1);if(M(a,t,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(e&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(i=(r=Bo(qo(a.y,0,1))).getUTCDay(),r=i>4||0===i?No.ceil(r):No(r),r=mo.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(i=(r=Uo(qo(a.y,0,1))).getDay(),r=i>4||0===i?ko.ceil(r):ko(r),r=yo.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Bo(qo(a.y,0,1)).getUTCDay():Uo(qo(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Bo(a)):Uo(a)}}function M(t,e,n,r){for(var i,a,o=0,l=e.length,s=n.length;o<l;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=w[i in Ro?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return m.x=x(n,m),m.X=x(r,m),m.c=x(e,m),v.x=x(n,v),v.X=x(r,v),v.c=x(e,v),{format:function(t){var e=x(t+="",m);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",v);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}(t),Yo=Ho.format,Ho.parse,Ho.utcFormat,Ho.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ls=Uint8Array,ss=Uint16Array,us=Int32Array,cs=new ls([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ds=new ls([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fs=new ls([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ps=function(t,e){for(var n=new ss(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];var i=new us(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},hs=ps(cs,2),bs=hs.b,gs=hs.r;bs[28]=258,gs[258]=28;for(var _s=ps(ds,0).r,ys=new ss(32768),ms=0;ms<32768;++ms){var vs=(43690&ms)>>1|(21845&ms)<<1;vs=(61680&(vs=(52428&vs)>>2|(13107&vs)<<2))>>4|(3855&vs)<<4,ys[ms]=((65280&vs)>>8|(255&vs)<<8)>>1}var ws=function(t,e,n){for(var r=t.length,i=0,a=new ss(e);i<r;++i)t[i]&&++a[t[i]-1];var o,l=new ss(e);for(i=1;i<e;++i)l[i]=l[i-1]+a[i-1]<<1;if(n){o=new ss(1<<e);var s=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],d=l[t[i]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)o[ys[d]>>s]=u}else for(o=new ss(r),i=0;i<r;++i)t[i]&&(o[i]=ys[l[t[i]-1]++]>>15-t[i]);return o},xs=new ls(288);for(ms=0;ms<144;++ms)xs[ms]=8;for(ms=144;ms<256;++ms)xs[ms]=9;for(ms=256;ms<280;++ms)xs[ms]=7;for(ms=280;ms<288;++ms)xs[ms]=8;var ks=new ls(32);for(ms=0;ms<32;++ms)ks[ms]=5;var Ms=ws(xs,9,0),zs=ws(ks,5,0),As=function(t){return(t+7)/8|0},Ts=function(t,e,n){return(null==n||n>t.length)&&(n=t.length),new ls(t.subarray(e,n))},Cs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Es=function(t,e,n){var r=new Error(e||Cs[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Es),!n)throw r;return r},Ss=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Ns=function(t,e,n){n<<=7&e;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Fs=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,a=n.slice();if(!i)return{t:Us,l:0};if(1==i){var o=new ls(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var l=n[0],s=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:l.f+s.f,l:l,r:s};c!=i-1;)l=n[n[u].f<n[d].f?u++:d++],s=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:l.f+s.f,l:l,r:s};var f=a[0].s;for(r=1;r<i;++r)a[r].s>f&&(f=a[r].s);var p=new ss(f+1),h=Ls(n[c-1],p,0);if(h>e){r=0;var b=0,g=h-e,_=1<<g;for(a.sort((function(t,e){return p[e.s]-p[t.s]||t.f-e.f}));r<i;++r){var y=a[r].s;if(!(p[y]>e))break;b+=_-(1<<h-p[y]),p[y]=e}for(b>>=g;b>0;){var m=a[r].s;p[m]<e?b-=1<<e-p[m]++-1:++r}for(;r>=0&&b;--r){var v=a[r].s;p[v]==e&&(--p[v],++b)}h=e}return{t:new ls(p),l:h}},Ls=function(t,e,n){return-1==t.s?Math.max(Ls(t.l,e,n+1),Ls(t.r,e,n+1)):e[t.s]=n},Os=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ss(++e),r=0,i=t[0],a=1,o=function(t){n[r++]=t},l=1;l<=e;++l)if(t[l]==i&&l!=e)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=t[l]}return{c:n.subarray(0,r),n:e}},js=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},$s=function(t,e,n){var r=n.length,i=As(e+2);t[i]=255&r,t[i+1]=r>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<r;++a)t[i+a+4]=n[a];return 8*(i+4+r)},Ds=function(t,e,n,r,i,a,o,l,s,u,c){Ss(e,c++,n),++i[256];for(var d=Fs(i,15),f=d.t,p=d.l,h=Fs(a,15),b=h.t,g=h.l,_=Os(f),y=_.c,m=_.n,v=Os(b),w=v.c,x=v.n,k=new ss(19),M=0;M<y.length;++M)++k[31&y[M]];for(M=0;M<w.length;++M)++k[31&w[M]];for(var z=Fs(k,7),A=z.t,T=z.l,C=19;C>4&&!A[fs[C-1]];--C);var E,S,N,F,L=u+5<<3,O=js(i,xs)+js(a,ks)+o,j=js(i,f)+js(a,b)+o+14+3*C+js(k,A)+2*k[16]+3*k[17]+7*k[18];if(s>=0&&L<=O&&L<=j)return $s(e,c,t.subarray(s,s+u));if(Ss(e,c,1+(j<O)),c+=2,j<O){E=ws(f,p,0),S=f,N=ws(b,g,0),F=b;var $=ws(A,T,0);Ss(e,c,m-257),Ss(e,c+5,x-1),Ss(e,c+10,C-4),c+=14;for(M=0;M<C;++M)Ss(e,c+3*M,A[fs[M]]);c+=3*C;for(var D=[y,w],P=0;P<2;++P){var U=D[P];for(M=0;M<U.length;++M){var B=31&U[M];Ss(e,c,$[B]),c+=A[B],B>15&&(Ss(e,c,U[M]>>5&127),c+=U[M]>>12)}}}else E=Ms,S=xs,N=zs,F=ks;for(M=0;M<l;++M){var q=r[M];if(q>255){Ns(e,c,E[(B=q>>18&31)+257]),c+=S[B+257],B>7&&(Ss(e,c,q>>23&31),c+=cs[B]);var H=31&q;Ns(e,c,N[H]),c+=F[H],H>3&&(Ns(e,c,q>>5&8191),c+=ds[H])}else Ns(e,c,E[q]),c+=S[q]}return Ns(e,c,E[256]),c+S[256]},Ps=new us([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Us=new ls(0),Bs=function(){for(var t=new Int32Array(256),e=0;e<256;++e){for(var n=e,r=9;--r;)n=(1&n&&-306674912)^n>>>1;t[e]=n}return t}(),qs=function(){var t=-1;return{p:function(e){for(var n=t,r=0;r<e.length;++r)n=Bs[255&n^e[r]]^n>>>8;t=n},d:function(){return~t}}},Hs=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),o=new ls(a.length+t.length);o.set(a),o.set(t,a.length),t=o,i.w=a.length}return function(t,e,n,r,i,a){var o=a.z||t.length,l=new ls(r+o+5*(1+Math.ceil(o/7e3))+i),s=l.subarray(r,l.length-i),u=a.l,c=7&(a.r||0);if(e){c&&(s[0]=a.r>>3);for(var d=Ps[e-1],f=d>>13,p=8191&d,h=(1<<n)-1,b=a.p||new ss(32768),g=a.h||new ss(h+1),_=Math.ceil(n/3),y=2*_,m=function(e){return(t[e]^t[e+1]<<_^t[e+2]<<y)&h},v=new us(25e3),w=new ss(288),x=new ss(32),k=0,M=0,z=a.i||0,A=0,T=a.w||0,C=0;z+2<o;++z){var E=m(z),S=32767&z,N=g[E];if(b[S]=N,g[E]=S,T<=z){var F=o-z;if((k>7e3||A>24576)&&(F>423||!u)){c=Ds(t,s,0,v,w,x,M,A,C,z-C,c),A=k=M=0,C=z;for(var L=0;L<286;++L)w[L]=0;for(L=0;L<30;++L)x[L]=0}var O=2,j=0,$=p,D=S-N&32767;if(F>2&&E==m(z-D))for(var P=Math.min(f,F)-1,U=Math.min(32767,z),B=Math.min(258,F);D<=U&&--$&&S!=N;){if(t[z+O]==t[z+O-D]){for(var q=0;q<B&&t[z+q]==t[z+q-D];++q);if(q>O){if(O=q,j=D,q>P)break;var H=Math.min(D,q-2),Y=0;for(L=0;L<H;++L){var R=z-D+L&32767,I=R-b[R]&32767;I>Y&&(Y=I,N=R)}}}D+=(S=N)-(N=b[S])&32767}if(j){v[A++]=268435456|gs[O]<<18|_s[j];var W=31&gs[O],V=31&_s[j];M+=cs[W]+ds[V],++w[257+W],++x[V],T=z+O,++k}else v[A++]=t[z],++w[t[z]]}}for(z=Math.max(z,T);z<o;++z)v[A++]=t[z],++w[t[z]];c=Ds(t,s,u,v,w,x,M,A,C,z-C,c),u||(a.r=7&c|s[c/8|0]<<3,c-=7,a.h=g,a.p=b,a.i=z,a.w=T)}else{for(z=a.w||0;z<o+u;z+=65535){var G=z+65535;G>=o&&(s[c/8|0]=u,G=o),c=$s(s,c+1,t.subarray(z,G))}a.i=o}return Ts(l,0,r+As(c)+i)}(t,null==e.level?6:e.level,null==e.mem?i.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,r,i)},Ys=function(t,e){var n={};for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n},Rs=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8};function Is(t,e){return Hs(t,e||{},0,0)}var Ws=function(t,e,n,r){for(var i in t){var a=t[i],o=e+i,l=r;Array.isArray(a)&&(l=Ys(r,a[1]),a=a[0]),a instanceof ls?n[o]=[a,l]:(n[o+="/"]=[new ls(0),l],Ws(a,o,n,r))}},Vs="undefined"!=typeof TextEncoder&&new TextEncoder,Gs="undefined"!=typeof TextDecoder&&new TextDecoder;try{Gs.decode(Us,{stream:!0})}catch(t){}function Xs(t,e){if(Vs)return Vs.encode(t);for(var n=t.length,r=new ls(t.length+(t.length>>1)),i=0,a=function(t){r[i++]=t},o=0;o<n;++o){if(i+5>r.length){var l=new ls(i+8+(n-o<<1));l.set(r),r=l}var s=t.charCodeAt(o);s<128||e?a(s):s<2048?(a(192|s>>6),a(128|63&s)):s>55295&&s<57344?(a(240|(s=65536+(1047552&s)|1023&t.charCodeAt(++o))>>18),a(128|s>>12&63),a(128|s>>6&63),a(128|63&s)):(a(224|s>>12),a(128|s>>6&63),a(128|63&s))}return Ts(r,0,i)}var Zs=function(t){var e=0;if(t)for(var n in t){var r=t[n].length;r>65535&&Es(9),e+=r+4}return e},Js=function(t,e,n,r,i,a,o,l){var s=r.length,u=n.extra,c=l&&l.length,d=Zs(u);Rs(t,e,null!=o?33639248:67324752),e+=4,null!=o&&(t[e++]=20,t[e++]=n.os),t[e]=20,e+=2,t[e++]=n.flag<<1|(a<0&&8),t[e++]=i&&8,t[e++]=255&n.compression,t[e++]=n.compression>>8;var f=new Date(null==n.mtime?Date.now():n.mtime),p=f.getFullYear()-1980;if((p<0||p>119)&&Es(10),Rs(t,e,p<<25|f.getMonth()+1<<21|f.getDate()<<16|f.getHours()<<11|f.getMinutes()<<5|f.getSeconds()>>1),e+=4,-1!=a&&(Rs(t,e,n.crc),Rs(t,e+4,a<0?-a-2:a),Rs(t,e+8,n.size)),Rs(t,e+12,s),Rs(t,e+14,d),e+=16,null!=o&&(Rs(t,e,c),Rs(t,e+6,n.attrs),Rs(t,e+10,o),e+=14),t.set(r,e),e+=s,d)for(var h in u){var b=u[h],g=b.length;Rs(t,e,+h),Rs(t,e+2,g),t.set(b,e+4),e+=4+g}return c&&(t.set(l,e),e+=c),e};function Qs(t,e){e||(e={});var n={},r=[];Ws(t,"",n,e);var i=0,a=0;for(var o in n){var l=n[o],s=l[0],u=l[1],c=0==u.level?0:8,d=(k=Xs(o)).length,f=u.comment,p=f&&Xs(f),h=p&&p.length,b=Zs(u.extra);d>65535&&Es(11);var g=c?Is(s,u):s,_=g.length,y=qs();y.p(s),r.push(Ys(u,{size:s.length,crc:y.d(),c:g,f:k,m:p,u:d!=o.length||p&&f.length!=h,o:i,compression:c})),i+=30+d+b+_,a+=76+2*(d+b)+(h||0)+_}for(var m=new ls(a+22),v=i,w=a-i,x=0;x<r.length;++x){var k=r[x];Js(m,k.o,k,k.f,k.u,k.c.length);var M=30+k.f.length+Zs(k.extra);m.set(k.c,k.o+M),Js(m,i,k,k.f,k.u,k.c.length,k.o,k.m),i+=16+M+(k.m?k.m.length:0)}return function(t,e,n,r,i){Rs(t,e,101010256),Rs(t,e+8,n),Rs(t,e+10,n),Rs(t,e+12,r),Rs(t,e+16,i)}(m,i,r.length,w,v),m}function Ks(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t;return"datetime"===e&&Boolean(r)&&(r=function(t,e){let n=e;/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}.\d{3}Z$/.test(e)?n=new Date(e):"string"==typeof e&&(n=Rn.getInterpretation(t).parse(n));return Xn(t)(n)}(n,r)),"number"===e&&Boolean(r)&&(r=function(t,e){const n=parseFloat(e),r=`,.${(e.toString().split(".")[1]||"").length}f`;let i=Xn(t)(e,r);const a={none:"",comma:",",point:".",space:" "},o=t.split("$")[1].split("_")[1];return Number.isInteger(n)&&(i=i.split(a[o])[0]),i}(n,r)),(String(r).includes(",")||String(r).includes('"')||String(r).includes("\r")||String(r).includes("\n"))&&(r=`"${String(r).replace(/"/g,'""')}"`),r}function tu(t){const e=Object.keys(t);let n={};const r=["lines","order","labels","colors","regions_geometry","geo_regions"],i=e.filter((e=>!r.includes(e)&&0!==t[e].length));return i.forEach((e=>{const r=function(t,e){const n=JSON.parse(JSON.stringify(t[e]));return n.column_names=t[e].column_names||{},n.metadata=t[e].metadata||{},n.forEach((t=>{Object.keys(t).forEach((e=>{Object.keys(n.column_names).includes(e)||delete t[e]}))})),n}(t,e);n[e]=r})),{formatted_datasets:n,datasets_to_download:i}}function eu(t,e){const n=t[e],{headers:r,header_index_lookup:i}=function(t){const e=[],n={};for(const r in t.column_names)t.column_names[r]&&((Array.isArray(t.column_names[r])?t.column_names[r]:[t.column_names[r]]).forEach((t=>{let n=Ks(t);e.includes(n)||e.push(n)})),Array.isArray(t.column_names[r])?n[r]=t.column_names[r].map((t=>e.indexOf(Ks(t)))):n[r]=e.indexOf(Ks(t.column_names[r])));return{headers:e,header_index_lookup:n}}(n),a=function(t,e,n){const r=[];return t.forEach((e=>{const i=[];for(const r in e){const a=e[r],o=n[r];let l=t.metadata?t.metadata[r]?.type:null,s=t.metadata?t.metadata[r]?.type_id:null;Array.isArray(a)?a.forEach(((e,n)=>{l=t.metadata[r][n]?.type,s=t.metadata[r][n]?.type_id,i[o[n]]=Ks(e,l,s)})):i[o]=Ks(a,l,s)}r.push(i)})),[e.join(",")].concat(r.map((t=>t.join(",")))).join("\n")}(n,r,i);return a}var nu="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function ru(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){lu(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function iu(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function au(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var ou=nu.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),lu=nu.saveAs||("object"!=typeof window||window!==nu?function(){}:"download"in HTMLAnchorElement.prototype&&!ou?function(t,e,n){var r=nu.URL||nu.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener","string"==typeof t?(i.href=t,i.origin!==location.origin?iu(i.href)?ru(t,e,n):au(i,i.target="_blank"):au(i)):(i.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){au(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(iu(t))ru(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){au(r)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return ru(t,e,n);var i="application/octet-stream"===t.type,a=/constructor/i.test(nu.HTMLElement)||nu.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a||ou)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var s=nu.URL||nu.webkitURL,u=s.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout((function(){s.revokeObjectURL(u)}),4e4)}});let su,uu,cu,du,fu;nu.saveAs=lu.saveAs=lu;let pu=!1;function hu(){var t;return(t=document.createElement("style")).type="text/css",t.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(t),su=document.createElement("footer"),su.className="flourish-footer",uu=document.createElement("div"),uu.className="flourish-footer-text",uu.setAttribute("id","flourish-footer-text"),cu=document.createElement("div"),cu.className="flourish-footer-logo-container",su.appendChild(uu),su.appendChild(cu),su}function bu(){var t=ku.footer_logo_src?ku.footer_logo_src:"";return ku.footer_logo_src_light&&ku.background_color_enabled&&!co(ku.background_color)&&(t=ku.footer_logo_src_light),t}function gu(){return ku.footer_logo_enabled&&bu()}function _u(){var t=[{name:ku.source_name,url:ku.source_url},{name:ku.multiple_sources?ku.source_name_2:"",url:ku.multiple_sources?ku.source_url_2:""},{name:ku.multiple_sources?ku.source_name_3:"",url:ku.multiple_sources?ku.source_url_3:""}].filter((function(t){return t.name||t.url}));pu=t.length>0||ku.footer_note||ku.footer_note_secondary||gu();var e,n="top"==ku.footer_border||"top_and_bottom"==ku.footer_border,r="bottom"==ku.footer_border||"top_and_bottom"==ku.footer_border;su.style.display="flex",su.style.height=pu?null:0,su.style.width="100%",su.style.paddingTop=n?ku.footer_border_space+"rem":"",su.style.paddingBottom=r?ku.footer_border_space+"rem":"",su.style.borderTop=n?ku.footer_border_width+"px "+ku.footer_border_style+" "+ku.footer_border_color:"",su.style.borderBottom=r?ku.footer_border_width+"px "+ku.footer_border_style+" "+ku.footer_border_color:"",su.style.fontFamily=ku.footer_font?ku.footer_font.name:"inherit",su.style.fontWeight=ku.footer_text_weight,su.style.justifyContent="justify"==(e=ku.footer_align)?"space-between":"left"==e?"flex-start":"right"==e?"flex-end":"center"==e?"center":void 0,su.style.fontSize=ku.footer_text_size+"rem",su.style.color=ku.footer_text_color||ku.font_color,su.style.alignItems=ku.footer_align_vertical;var i=document.createElement("span");t.forEach((function(t,e){var n=document.createElement("p");if(e>0&&(n.innerText=", "),t.url){var r=document.createElement("a");r.innerText=t.name||t.url,r.href=ro(t.url),r.target="_blank",n.appendChild(r)}else n.innerText+=t.name||t.url;i.innerHTML+=n.innerHTML})),uu.style.order="left"==ku.footer_logo_order?2:"",uu.style.textAlign=no(ku.footer_align);const a=""!==i.innerHTML?`${ku.source_label} ${i.innerHTML}`:"",o=ku.footer_note?(""!==i.innerHTML?" • ":"")+yu("primary"):"",l=ku.footer_note_secondary?`<br /><p>${yu("secondary")}</p>`:"";uu.innerHTML=`<p>${a}${o}</p>${l}`,cu.innerHTML="",gu()&&(du=du||document.createElement("img"),du.className="flourish-footer-logo",du.src=ro(bu()),du.alt=ku.footer_logo_alt,du.style.height=ku.footer_logo_height+"rem",du.style.marginRight="left"==ku.footer_logo_order?ku.footer_logo_margin+"rem":"",du.style.marginLeft="right"==ku.footer_logo_order?ku.footer_logo_margin+"rem":"",du.style.verticalAlign=ku.footer_align_vertical,du.style.display=gu()?"":"none",ku.footer_logo_link_url?(fu=document.createElement("a"),fu.target="_blank",fu.appendChild(du),cu.appendChild(fu),du.style.cursor="pointer",fu.href=ro(ku.footer_logo_link_url)):cu.appendChild(du)),document.querySelectorAll(".fl-data-download-button").forEach((t=>{t.addEventListener("click",(async t=>{t.preventDefault();const{file_name:e,blob:n}=await async function(){const t={},{formatted_datasets:e,datasets_to_download:n}=tu(window.template?.data);if(1===n.length){const t=n[0],r=`Flourish-data_${t}.csv`,i=eu(e,t);return{file_name:r,blob:new Blob([i],{type:"text/csv"})}}if(n.length>1){n.forEach((n=>{const r=eu(e,n);t[`${n}.csv`]=Xs(r)}));const r="Flourish-data.zip",i=Qs(t);return{file_name:r,blob:new Blob([i],{type:"application/zip"})}}return Flourish.warn("There is no data to download"),null}();try{lu(n,e)}catch(t){console.error("An error occurred while saving the file:",t)}}))}))}function yu(t){const e=("primary"===t?ku.footer_note:ku.footer_note_secondary).replace(/{{([^}]+)}}/g,((t,e)=>{if("data_last_updated"===e){return function(t,e){let n="n/a";null!==t&&(n=Yo(e)(t));return n}(function(t){const e="data_last_updated"===t?"last_updated":t,n=Object.keys(window.template?.data);if(n.length>0){const t=n.map((t=>window.template.data[t].timestamps?.[e]||null)).filter((t=>null!==t));if(0===t.length)return null;return Math.max(...t)}return null}(e),ku.footer_timestamp_format)}if(e.includes("download_data")){return!!window.template.data&&(window.template.data.length||Object.keys(window.template.data).length)?function(t){const e=[...document.querySelectorAll(".fl-data-download-button")],n=[...document.querySelectorAll("#flourish-header-title, #flourish-header-subtitle, #flourish-header-text")].find((t=>Boolean(t.textContent.trim()))),r=`fl-data-download-button-${e.length}`,i=n?`aria-labelledby='${n.id} ${r}'`:"";let a="Download data";if(t.includes('"')){const e=t.indexOf('"'),n=t.lastIndexOf('"');a=t.slice(e+1,n)}return`<a id='${r}' ${i} href='#' class='fl-data-download-button'>${a}</a>`}(e):(Flourish.warn("There is no data to download"),"")}return""}));return e}function mu(){Ya(),ao(),_u(),document.body.style.backgroundColor=ku.background_color_enabled?ku.background_color:"transparent",document.body.style.backgroundImage=ku.background_image_enabled?"url("+ku.background_image_src+")":"",document.body.style.backgroundSize=ku.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=ku.background_image_position;var t=Tu.wrapper.style;t.display="flex",t.height="100vh",t.color=ku.font_color,t.maxWidth="wrapper"==ku.max_width_target?ku.max_width+"px":"",t.marginLeft="wrapper"==ku.max_width_target&&"left"!=ku.max_width_align?"auto":"",t.marginRight="wrapper"==ku.max_width_target&&"right"!=ku.max_width_align?"auto":"",t.padding=ku.margin_top+"rem "+ku.margin_right+"rem "+ku.margin_bottom+"rem "+ku.margin_left+"rem",t.borderTop=ku.border.enabled?ku.border.top.width+"px "+ku.border.top.style+" "+ku.border.top.color:"",t.borderRight=ku.border.enabled?ku.border.right.width+"px "+ku.border.right.style+" "+ku.border.right.color:"",t.borderBottom=ku.border.enabled?ku.border.bottom.width+"px "+ku.border.bottom.style+" "+ku.border.bottom.color:"",t.borderLeft=ku.border.enabled?ku.border.left.width+"px "+ku.border.left.style+" "+ku.border.left.color:"";var e=Tu.primary.outer.style,n=Tu.legend.outer.style,r=vu();if("stack"==r.mode)r.elements.forEach((function(t,e){Tu[t].outer.style.order=10*e}));else for(var i in r.elements)for(var a in r.elements[i]){var o=Tu[i].outer||Tu[i];o.style[a]=r.elements[i][a],o.style.order=""}Tu.header.outer.style.display="",Tu.footer.outer.style.display="",Tu.controls.outer.style.display="",e.display="flex",n.display="",e.flex="1 1 auto",e.height=null,Tu.primary.outer.style.maxWidth="primary"==ku.max_width_target?ku.max_width+"px":"",Tu.primary.outer.style.marginLeft="primary"==ku.max_width_target&&"left"!=ku.max_width_align?"auto":"",Tu.primary.outer.style.marginRight="primary"==ku.max_width_target&&"right"!=ku.max_width_align?"auto":"";var l=""!=ku.screenreader_text_primary.trim(),s=document.getElementById("fl-layout-primary-description");Tu.primary.outer.setAttribute("aria-label","primary visualisation container"),s.innerText=ku.screenreader_text_primary,l?Tu.primary.outer.setAttribute("aria-describedBy","fl-layout-primary-description"):Tu.primary.outer.removeAttribute("aria-describedBy"),ku.screenreader_hide_primary?Tu.primary.inner.setAttribute("aria-hidden",!0):Tu.primary.inner.removeAttribute("aria-hidden"),""!=ku.screenreader_label.trim()?Nu().setAttribute("aria-label",ku.screenreader_label):Nu().removeAttribute("aria-label"),Au.map((function(t){var e=Tu[t],n=e.outer.style;return{name:t,height:Eu(e.inner),order:parseFloat(n.order),style:n}})).sort((function(t,e){return t.order-e.order})).filter((function(t){if(t.height||"primary"==t.name)return!0;t.style.paddingBottom="",t.style.paddingTop="",t.style.display="none"})).forEach((function(t,e,n){t.style.width="100%",t.style.paddingTop=e?wu("padding"):"",t.style.paddingBottom=e<n.length-1?wu("padding"):""})),Tu.wrapper.style.gridColumnGap=wu("gap"),Tu.wrapper.style.gridRowGap=wu("gap"),document.body.setAttribute("dir",ku.read_direction),Tu.wrapper.setAttribute("dir",ku.read_direction),document.getElementById("fl-layout-wrapper-outer").setAttribute("dir","ltr")}function vu(){var t=window.innerWidth<ku.breakpoint_mobile_big,e=ku.layout_order.indexOf("grid")>-1,n={id:ku.layout_order,mode:e?"grid":"stack",elements:to[ku.layout_order]};return t&&e&&(n.id="stack-default",n.mode="stack",n.elements=to["stack-default"]),n}function wu(t){var e,n=vu();return e="custom"==ku.space_between_sections?ku.space_between_sections_custom:ku.space_between_sections,"grid"==n.mode?"gap"==t?e+"rem":"":"gap"==t?"":e/2+"rem"}var xu=Object.freeze({body_font:{name:"Canva Sans Variable",url:"https://public.flourish.studio/resources/fonts/canva-sans.css"},title_font:null,subtitle_font:null,footer_font:null,read_direction:"ltr",border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:1,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:600,max_width_target:"none",max_width_align:"center",breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_color:"#333333",font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_border_space:.5,header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_alt:"Header logo",header_logo_link_url:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:2,title_size_custom:1.6,title_line_height:1.2,title_color:null,title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,title_styling:!1,subtitle:"",subtitle_size:1.4,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:null,subtitle_weight:"normal",subtitle_space_above:.5,subtitle_space_above_custom:1.5,subtitle_styling:!1,header_text:"",header_text_size:1.2,header_text_size_custom:1.2,header_text_line_height:1.2,header_text_color:null,header_text_weight:"normal",header_text_space_above:.5,header_text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_note_secondary:"",footer_text_size:1,footer_text_color:null,footer_styling:!1,footer_text_weight:"normal",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_border_space:.5,footer_logo_enabled:!1,footer_logo_src:"",footer_logo_src_light:"",footer_logo_alt:"Footer logo",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right",footer_timestamp_format:"%H:%M:%S",screenreader_hide_primary:!0,screenreader_text_primary:"",screenreader_label:""});var ku;function Mu(t,e,n){Ya(n),t=function(t){return function(){return document.body.classList.add("fl-fonts-loaded"),t.apply(this,arguments)}}(t=t||window.template.update);var r=setTimeout(t,isNaN(e)?500:e),i=[];document.fonts&&i.push(document.fonts.ready),gu()&&i.push(function(){if(gu())return new Promise((function(t){var e=ro(bu());function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+e),t()}du=du||document.createElement("img"),du.onload=function(){t()},du.onerror=n,du.oncancel=n,du.src=e}))}()),io()&&i.push(function(){if(io())return new Promise((function(t){var e=ro(ku.header_logo_src);function n(){"undefined"!=typeof Flourish&&Flourish.warn&&Flourish.warn("flourish-layout unable to load image: "+e),t()}(Qa=Qa||document.createElement("img")).onload=function(){t()},Qa.onerror=n,Qa.oncancel=n,Qa.src=e}))}()),i.length&&(document.fonts||i.push(new Promise((function(t){setTimeout(t,500)}))),Promise.all(i).then((function(e){document.fonts&&e[0].size&&(clearTimeout(r),t(),Ha()),document.fonts.addEventListener("loadingdone",(function(){clearTimeout(r),t(),Ha()}))})))}var zu,Au=["header","controls","legend","primary","footer"],Tu={};function Cu(t){return t.getBoundingClientRect().width}function Eu(t){return t.getBoundingClientRect().height}function Su(t,e){var n="fl-layout-"+t,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=e;var i=document.createElement("div");return i.className="fl-layout-inner",i.id=n,i.style.width="100%",i.style.position="relative","primary"==t&&(r.style.display="flex",function(t){var e=document.createElement("p");e.id="fl-layout-primary-description";var n=e.style;n.border="0",n.height="1px",n.width="1px",n.margin="-1px",n.overflow="hidden",n.padding="0",n.position="absolute",n.clip="rect(0 0 0 0)",t.appendChild(e)}(r)),r.appendChild(i),Tu.wrapper.appendChild(r),{outer:r,inner:i}}function Nu(){return Tu.wrapper}function Fu(){return Tu.sidebar}function Lu(t){return-1!==Au.indexOf(t)?Tu[t].inner:null}function Ou(t){return Tu[t]||void 0===t?Cu("wrapper"==t||void 0===t?Tu.wrapper:Tu[t].outer):null}function ju(t){return Tu[t]||void 0===t?"wrapper"==t||void 0===t?Cu(Tu.wrapper)-Yu("horizontal")-Ru("horizontal"):Cu(Tu[t].inner):null}function $u(t){return Tu[t]||void 0===t?Eu("wrapper"==t||void 0===t?Tu.wrapper:Tu[t].outer):null}function Du(t){return Tu[t]||void 0===t?"wrapper"==t||void 0===t?Eu(Tu.wrapper)-Yu("vertical")-Ru("vertical"):Eu(Tu[t].inner):null}function Pu(){var t="grid"==vu().mode?0:qu(Tu.primary.outer);return Eu(Tu.primary.outer)-t}function Uu(){return Cu(Tu.primary.inner)}function Bu(){return ku.screenreader_hide_primary?"hidden":"readable"}function qu(t){return"grid"==vu().mode?parseFloat(getComputedStyle(Tu.wrapper).gap)||0:(parseFloat(getComputedStyle(t).paddingTop)||0)+(parseFloat(getComputedStyle(t).paddingBottom)||0)}function Hu(){var t=function(){if(Flourish.fixed_height)return window.innerHeight;var t=window.innerWidth;return t>999?650:t>599?575:400}()-Yu("vertical")-Ru("vertical"),e=function(){var t=vu(),e="grid-1"==t.id?[]:["header","controls","legend","footer"];return e.reduce((function(e,n){var r=$u(n);return r>0&&"grid"==t.mode&&(r+=qu()),e+r}),0)}();return t-e-("grid"==vu().mode?0:qu(Tu.primary.outer))}function Yu(t){var e;return"left"==t?e=ku.margin_left:"right"==t?e=ku.margin_right:"top"==t?e=ku.margin_top:"bottom"==t?e=ku.margin_bottom:"horizontal"==t?e=ku.margin_left+ku.margin_right:"vertical"==t&&(e=ku.margin_top+ku.margin_bottom),eo(e)}function Ru(t){return ku.border.enabled?"vertical"==t?ku.border.top.width+ku.border.bottom.width:"horizontal"==t?ku.border.left.width+ku.border.right.width:null:0}function Iu(t){var e=Tu.primary;if(Flourish.fixed_height||void 0===Flourish.fixed_height)e.inner.style.height="";else{var n=null===t,r=n?Hu():t;r+qu(Tu.primary.outer)!==parseFloat(e.outer.style.height)&&(Tu.wrapper.style.height="",e.outer.style.flex="",e.inner.style.height=r+"px",Flourish.setHeight(n?null:$u()))}}function Wu(t){var e=zu.querySelector(".fl-layout-overlay-message");if(t){zu.style.display="block";var n="string"==typeof t?t:"Your web browser does not support the features used by this content. Consider updating to a modern browser.";e.innerHTML=n}else e.textContent="",zu.style.display="none"}function Vu(){return zu}let Gu;function Xu(){Gu&&Zu(),Gu=Aa(this.getWrapper(),"fl-layout-svg-screenshot-container"),Gu.addTextElements("#fl-layout-header-container h2"),Gu.addTextElements("#fl-layout-header-container h3"),Gu.addTextElements("#fl-layout-header-container p"),Gu.addTextElements("#fl-layout-footer .flourish-footer-text")}function Zu(){Gu.remove(),Gu=null}function Ju(t){for(var e in ku=t,xu)void 0===ku[e]&&(ku[e]=xu[e]);return(Ua=document.createElement("style")).id="flourish-page-styles",Ua.type="text/css",document.head.appendChild(Ua),Tu.wrapper=function(){var t=document.createElement("div");t.id="fl-layout-wrapper-outer",t.style.display="flex";var e=document.createElement("main");e.id="fl-layout-wrapper",e.style.display="flex",e.style.flexGrow="1",e.style.flexDirection="column",e.style.boxSizing="border-box",e.style.overflow="hidden";var n=document.createElement("aside");return n.id="fl-layout-sidebar",n.style.position="relative",Tu.sidebar=n,t.appendChild(e),t.appendChild(n),document.body.appendChild(t),e}(),Au.forEach((function(t,e){Tu[t]=Su(t,e)})),Lu("header").appendChild(function(){(Wa=document.createElement("header")).className="flourish-header";var t=document.createElement("hgroup");return Va=document.createElement("h2"),Ga=document.createElement("h3"),Xa=document.createElement("p"),(Za=document.createElement("div")).className="clearfix",(Ja=document.createElement("div")).className="flourish-header-logo-container",Wa.appendChild(Ja),Wa.appendChild(t),t.appendChild(Va),t.appendChild(Ga),Wa.appendChild(Xa),Wa.appendChild(Za),Wa}()),Lu("footer").appendChild(hu()),Tu.primary.outer.style.overflow="hidden",function(){var t=Tu.primary.outer;t.style.position="relative",(zu=document.createElement("div")).id="fl-layout-overlay";var e=zu.style;e.position="absolute",e.display="none",e.width="100%",e.height="100%",e.top=0,e.left=0,e.backgroundColor="rgb(200,200,200)",e.zIndex=999999,e.pointerEvents="none";var n=document.createElement("p");n.className="fl-layout-overlay-message",(e=n.style).color="#333333",e.fontSize="1.5rem",e.paddingLeft="15%",e.paddingRight="15%",e.width="100%",e.boxSizing="border-box",e.position="absolute",e.top="50%",e.transform="translate(0, -50%)",e.margin="0",e.textAlign="center",zu.appendChild(n),t.appendChild(zu)}(),{update:mu,getWrapper:Nu,getSidebar:Fu,getSection:Lu,getOuterWidth:Ou,getInnerWidth:ju,getOuterHeight:$u,getInnerHeight:Du,getPrimaryHeight:Pu,getPrimaryWidth:Uu,getDefaultPrimaryHeight:Hu,getPrimaryScreenReadability:Bu,setHeight:Iu,showOverlay:Wu,remToPx:eo,getOverlay:Vu,awaitFonts:Mu,prepareScreenshotSVG:Xu,clearScreenshotSVG:Zu}}var Qu,Ku,tc={aggregation_type:"Sum",hierarchy_layout:"treemap",color:{},stroke_color:null,label_color:null,axis_label_color:null,radial_tree_link_color:"#dddddd",legend_mode:"off",legend_container:{},legend_categorical:{title_mode:"custom",max_width:100},cellPadding:"low",num_of_visible_levels:2,auto_set_height:!0,treemap_aspect_ratio_narrow:100,treemap_aspect_ratio_normal:66,responsive_narrow_breakpoint:500,label_size:.9,min_label_size:.5,max_label_size:1.5,label_padding:.3,multi_line_labels:!0,label_case:"topUpperCase",label_weight:"topBold",show_value_labels:!1,value_label_relative_size:.75,value_label_bold:!0,sort_by:"value",treemap_type:"treemapBinary",treemap_ratio:2,sunburst_inner_radius:33,sunburst_outer_radius:100,sunburst_show_zoomed_node_in_center:!0,sunburst_depth_fade:.75,sunburst_labelling:"auto",bar_min_bar_thickness:30,bar_max_bar_thickness:50,bar_bar_padding:10,bar_axis_label_size:1,bar_axis_labels_above:!0,bar_max_value:null,bar_axis_label_space:8,bar_value_label_space:6,radial_tree_outer_radius:55,radial_tree_bar_length:20,radial_tree_bar_width:40,radial_tree_rotation:0,popup:{mode:"popup"},popup_show_title:!1,popup_separator:">",popup_title:"",popup_hide_value:!1,popup_active_levels:"all_levels",filter:null,size_by:null,controls_container:{},filter_control:{},filter_control_visibility:"always",size_by_control:{},size_by_control_visibility:"always",controls_padding:0,filter_include_all:!0,filter_all_label:"All",controls_style:{},dropdown_style:{},button_style:{},slider_style:{},ascend_button_visibility:"always",animation_duration:1,zoom_out_button_color:"#f3f3f3",zoom_out_arrow_color:"#000000",zoomed_node_id:null,size_by_number_formatter:{},filter_number_formatter:{},layout:{screenreader_hide_primary:!1},url_state:{}};function ec(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var nc,rc,ic=(1===(nc=ec).length&&(rc=nc,nc=function(t,e){return ec(rc(t),e)}),{left:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;nc(t[i],e)<0?n=i+1:r=i}return n},right:function(t,e,n,r){for(null==n&&(n=0),null==r&&(r=t.length);n<r;){var i=n+r>>>1;nc(t[i],e)>0?r=i:n=i+1}return n}}),ac=ic.right;function oc(t){return null===t?NaN:+t}function lc(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function sc(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}var uc=Math.sqrt(50),cc=Math.sqrt(10),dc=Math.sqrt(2);function fc(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=uc?10:a>=cc?5:a>=dc?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=uc?10:a>=cc?5:a>=dc?2:1)}function pc(t,e,n){if(null==n&&(n=oc),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}}function hc(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r}var bc="0.2em";function gc(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}var _c=0,yc=Object.freeze({show_legend:!0,title_mode:"auto",title:"",max_width:100,swatch_width:.75,swatch_height:1,swatch_radius:3,swatch_outline:!1,swatch_outline_color:null,legend_items_padding:.5,icon_height:1,icon_color:"#777777",icon_fill_opacity:1,icon_stroke_opacity:1,order_override:"",orientation:"horizontal"});function mc(t){for(var e in this._state=t,yc)void 0===this._state[e]&&(this._state[e]=yc[e]);return this._colorFunction=void 0,this._formatFunction=void 0,this._legend_items=[],this._filtered_items=[],this._eventListeners=[],this._id="fl-legend-discrete-color-"+_c,this._visible=!0,this._auto_title="",this._last_clicked_item=null,this._container=ut(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id),this._container.append("p").attr("class","fl-legend-title"),_c++,this}function vc(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function wc(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}mc.prototype.appendTo=function(t){if(t.appendChild(this._container.node()),!document.querySelector("#legend-styles")){var e=document.createElement("style"),n=new Zn;n.select(".fl-legend-container.interactive .fl-legend-item").style("cursor","pointer"),n.select(".fl-legend-container.interactive .fl-legend-item:hover").style("opacity",.75),n.select(".fl-legend-container.interactive .fl-legend-item:focus-visible").style("border-radius","4px").style("outline","2.5px solid #4d90fe").style("outline-offset","-2.25px"),n.select(".fl-legend-sr-only").style("position","absolute").style("width","1px").style("height","1px").style("padding","0").style("margin","-1px").style("overflow","hidden").style("clip","rect(0, 0, 0, 0)").style("white-space","nowrap").style("border","0"),e.id="legend-styles",e.type="text/css",e.innerHTML=n.print(),document.head.appendChild(e)}return this},mc.prototype.format=function(t){return this._formatFunction=t,this},mc.prototype.getContainer=function(){return this._container},mc.prototype.visible=function(t){return void 0===t?this._visible:(this._visible=t,this)},mc.prototype.allowSingleEntry=function(t){return void 0===t?this._allow_single_entry:(this._allow_single_entry=t,this)},mc.prototype.autoTitle=function(t){return void 0===t?this._auto_title:(this._auto_title=t,this)},mc.prototype._updateTitle=function(){var t=this,e="auto"==t._state.title_mode?t.autoTitle():t._state.title;this._container.select(".fl-legend-title").text(e).style("display",(function(){return e.trim()?void 0===t._state.orientation||"horizontal"==t._state.orientation?"inline-block":"block":"none"})).style("padding-inline-start",0).style("padding-inline-end",bc)},mc.prototype.data=function(t,e){return this._colorFunction=e,t||e?(e?Array.isArray(t)?this._legend_items=t.slice().map((function(t,n){var r="object"==typeof t?t?.label||"":t;return r?{label:r,color:e(r),index:n}:null})).filter((function(t){return null!==t})):this._legend_items=[]:this._legend_items=Array.isArray(t)?t.slice():[],this):this._legend_items.slice()},mc.prototype.filtered=function(t){return t?(this._filtered_items=Array.isArray(t)?t.slice():[],this):this._filtered_items.slice()},mc.prototype._isFilteredItem=function(t){return this._filtered_items.includes(t.label)},mc.prototype.on=function(t,e){if(!this._container)return this;if(e&&this._eventListeners.indexOf(t)<0?this._eventListeners.push(t):e||this._eventListeners.splice(this._eventListeners.indexOf[t],1),this._container.classed("interactive",this._isInteractive()),e){const n=()=>{if("keydown"===Q.type&&"Enter"!==Q.key&&" "!==Q.key)return;const t=Q.target,n=t.parentNode,r=t.classList.contains("fl-legend-item")?t:n.classList.contains("fl-legend-item")?n:null;if(r){const t=ut(r).datum();this._last_clicked_item=t,r.matches(":focus-visible")&&setTimeout((()=>{r.blur(),r.focus()}),100),e.call(r,t,t.index)}};this._container.on(t,n),"click"==t&&this._container.on("keydown",n)}else this._container.on(t,null),"click"==t&&this._container.on("keydown",null);return this},mc.prototype.update=function(){const t=this._allow_single_entry?1:2,e=this._state.show_legend&&this._visible&&this._legend_items.length>=t;return this._container.style("display",e?"":"none"),e?(this._updateTitle(),this._updateLegend(),this):this},mc.prototype._isInteractive=function(){return this._eventListeners.length>0},mc.prototype._updateAnnouncements=function(){const t=this._isInteractive(),e=this._last_clicked_item,n=e&&this._isFilteredItem(e),r=this._legend_items.length,i=this._legend_items.filter((t=>!this._isFilteredItem(t))).length;this._container.attr("aria-label",t&&r>0?this._state.screenreader_instructions||"Select the legend items to toggle visibility of data series.":null);const a=`There are ${i} of ${r} series visible.`;let o;if(t&&i!==r)if(0===i)o="All series are hidden.";else if(1===i){o=`${this._legend_items.find((t=>!this._isFilteredItem(t))).label} series is visible. All other series are hidden.`}else o=e?`${e.label} series now ${n?"hidden":"visible"}. ${a}`:a;else o="All series are visible.";ut("#fl-legend-announcement").text(o).attr("aria-live","assertive")},mc.prototype._updateLegend=function(){const t=this,e=this._formatFunction,n=this._isInteractive();var r;this._updateAnnouncements(),this._container.style("max-width",gc(this._state.max_width)+"px").style("display","inline-flex").style("flex-wrap","wrap").style("align-items","horizontal"==this._state.orientation?"center":"start").style("align-content","horizontal"==this._state.orientation?"center":null).style("flex-direction","horizontal"==this._state.orientation?null:"column").style("max-height",.5*window.innerHeight+"px").style("overflow-y","auto").attr("role","group"),r=this._state.order_override.trim()?function(t,e){for(var n={},r=e.split(/\s*\n\s*/),i=0;i<r.length;i++)n[r[i]]=i;for(var a=[],o=0;o<t.length;o++){var l=t[o],s=n[l.label];void 0!==s&&(a[s]=l)}return a.filter((function(t){return void 0!==t}))}(this._legend_items,this._state.order_override):this._legend_items;var i=this._container.selectAll(".fl-legend-item").data(r),a=i.enter().append("div").attr("class","fl-legend-item");a.append("div").attr("class","fl-legend-swatch");let o=a.append("div").attr("class","fl-legend-icon-container");o.append("svg").attr("class","fl-legend-icon fl-ignore-svg-download").append("path"),o.append("img").attr("class","fl-legend-icon"),o.append("div").attr("class","fl-legend-icon"),a.append("p").attr("class","fl-legend-label");var l=i.merge(a);l.style("display","horizontal"==this._state.orientation?"inline-flex":"flex").style("flex-direction",(function(t){return t.reverse?"row-reverse":"row"})).style("opacity",(function(e){return t._isFilteredItem(e)?.2:""})).style("align-items","center").style("padding-inline-end","horizontal"==this._state.orientation?this._state.legend_items_padding+"rem":0).style("padding-inline-start",0).attr("tabindex",n?"0":null).attr("role",n?"button":null).attr("aria-pressed",(function(e){return n?(!t._isFilteredItem(e)).toString():null})).attr("aria-label",(function(e){return n?`Toggle ${e.label} series visibility, currently ${t._isFilteredItem(e)?"hidden":"visible"}`:null})),l.select(".fl-legend-swatch").style("height",this._state.swatch_height+"rem").style("width",this._state.swatch_width+"rem").style("border-radius",this._state.swatch_radius+"px").style("background-color",(function(t){return t.color})).style("border",(()=>this._state.swatch_outline?this._state.swatch_outline_color?`1px solid ${this._state.swatch_outline_color}`:"1px solid":"none")).style("box-sizing",this._state.swatch_outline?"border-box":"content-box").style("flex-shrink","0").style("display",(function(t){return t.icon?"none":null}));const s=l.filter((t=>t.icon));return s.each((function(e){let n=Math.ceil(gc(t._state.icon_height)),r="auto";if(e.icon.width){let n=e.icon.width,i=e.icon.height,a=e.outline?i*e.stroke_thickness:0;n+=a,i+=a;let o=n/i,l=gc(t._state.icon_height*o);r=Math.ceil(l)}let i=.25*t._state.text_size+"rem";ut(this).selectAll(".fl-legend-icon").attr("height",n).attr("width",r).style("margin-right",i)})),l.select(".fl-legend-icon-container").style("display",(function(t){return t.icon?null:"none"})),s.each((function(t){ut(this).select("svg.fl-legend-icon").style("display",t.icon.path_string?"inline":"none"),ut(this).select("img.fl-legend-icon").style("display",t.icon.url?"inline":"none"),ut(this).select("div.fl-legend-icon").style("display",t.icon.html?"inline-block":"none")})),s.filter((t=>t.icon.url)).select("img.fl-legend-icon").attr("src",(t=>t.icon.url)),s.filter((t=>t.icon.html)).select("div.fl-legend-icon").html((t=>t.icon.html)).style("font-size",`${Math.ceil(gc(this._state.icon_height))}px`).style("color",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})),s.filter((t=>t.icon.path_string)).select("svg.fl-legend-icon path").attr("d",(function(t){return t.icon?t.icon.path_string:null})).attr("transform",(function(e){if(!e.icon)return null;var n=e.icon.height,r=e.outline?n*e.stroke_thickness:0;n+=r;var i="scale("+gc(t._state.icon_height)/n+")";return i+="translate("+.5*r+","+.5*r+")"})).style("fill",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})).style("fill-opacity",(function(e){return e.outline?0:e.fill_opacity||t._state.icon_fill_opacity})).style("stroke",(function(e){return e.outline||e.stroke?e.stroke||e.color||t._state.icon_color:"none"})).style("stroke-width",(function(t){if(!t.outline&&!t.stroke_width)return 0;var e=t.icon.height*t.stroke_thickness;return t.stroke_width||e})).style("stroke-opacity",(function(e){return e.outline||e.stroke_opacity?e.stroke_opacity||t._state.icon_stroke_opacity:0})),l.select(".fl-legend-label").text((function(t){return e?e(t.label):t.label})).style("margin",0).style("user-select","none").style("-webkit-user-select","none").style("padding-inline-end",0).style("padding-inline-start",bc),i.exit().remove(),this._legend_item_els=l,this},mc.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&this._legend_items.length&&Aa("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".fl-legend-title").addSwatchElements(".fl-legend-swatch",".fl-legend-label").addTextElements(".fl-legend-label")},mc.prototype.clearScreenshotSVG=function(){const t=document.getElementById(this._id+"-svg-screenshot-container");t&&t.remove()};var xc=Array.prototype,kc=xc.map,Mc=xc.slice;function zc(t){return function(){return t}}function Ac(t,e){return function(n){return t+n*e}}function Tc(t,e){var n=e-t;return n?Ac(t,n>180||n<-180?n-360*Math.round(n/360):n):zc(isNaN(t)?e:t)}function Cc(t){return 1==(t=+t)?Ec:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):zc(isNaN(e)?n:e)}}function Ec(t,e){var n=e-t;return n?Ac(t,n):zc(isNaN(t)?e:t)}var Sc=function t(e){var n=Cc(e);function r(t,e){var r=n((t=xr(t)).r,(e=xr(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=Ec(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);var Nc,Fc=(Nc=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,l=r<e-1?t[r+2]:2*a-i;return function(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}((n-r/e)*e,o,i,a,l)}},function(t){var e,n,r=t.length,i=new Array(r),a=new Array(r),o=new Array(r);for(e=0;e<r;++e)n=xr(t[e]),i[e]=n.r||0,a[e]=n.g||0,o[e]=n.b||0;return i=Nc(i),a=Nc(a),o=Nc(o),n.opacity=1,function(t){return n.r=i(t),n.g=a(t),n.b=o(t),n+""}});function Lc(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function Oc(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=qc(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function jc(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function $c(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Dc(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=qc(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Pc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uc=new RegExp(Pc.source,"g");function Bc(t,e){var n,r,i,a=Pc.lastIndex=Uc.lastIndex=0,o=-1,l=[],s=[];for(t+="",e+="";(n=Pc.exec(t))&&(r=Uc.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(r=r[0])?l[o]?l[o]+=r:l[++o]=r:(l[++o]=null,s.push({i:o,x:$c(n,r)})),a=Uc.lastIndex;return a<e.length&&(i=e.slice(a),l[o]?l[o]+=i:l[++o]=i),l.length<2?s[0]?function(t){return function(e){return t(e)+""}}(s[0].x):function(t){return function(){return t}}(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)l[(n=s[r]).i]=n.x(t);return l.join("")})}function qc(t,e){var n,r=typeof e;return null==e||"boolean"===r?zc(e):("number"===r?$c:"string"===r?(n=yr(e))?(e=n,Sc):Bc:e instanceof yr?Sc:e instanceof Date?jc:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Lc:Array.isArray(e)?Oc:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Dc:$c)(t,e)}function Hc(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Yc,Rc,Ic,Wc,Vc=180/Math.PI,Gc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xc(t,e,n,r,i,a){var o,l,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Vc,skewX:Math.atan(s)*Vc,scaleX:o,scaleY:l}}function Zc(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var l=[],s=[];return a=t(a),o=t(o),function(t,r,i,a,o,l){if(t!==i||r!==a){var s=o.push("translate(",null,e,null,n);l.push({i:s-4,x:$c(t,i)},{i:s-2,x:$c(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,l,s),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:$c(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,l,s),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:$c(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,l,s),function(t,e,n,r,a,o){if(t!==n||e!==r){var l=a.push(i(a)+"scale(",null,",",null,")");o.push({i:l-4,x:$c(t,n)},{i:l-2,x:$c(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,l,s),a=o=null,function(t){for(var e,n=-1,r=s.length;++n<r;)l[(e=s[n]).i]=e.x(t);return l.join("")}}}var Jc=Zc((function(t){return"none"===t?Gc:(Yc||(Yc=document.createElement("DIV"),Rc=document.documentElement,Ic=document.defaultView),Yc.style.transform=t,t=Ic.getComputedStyle(Rc.appendChild(Yc),null).getPropertyValue("transform"),Rc.removeChild(Yc),Xc(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}),"px, ","px)","deg)"),Qc=Zc((function(t){return null==t?Gc:(Wc||(Wc=document.createElementNS("http://www.w3.org/2000/svg","g")),Wc.setAttribute("transform",t),(t=Wc.transform.baseVal.consolidate())?Xc((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Gc)}),", ",")",")");var Kc=function(t){return function(e,n){var r=t((e=Er(e)).h,(n=Er(n)).h),i=Ec(e.s,n.s),a=Ec(e.l,n.l),o=Ec(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}(Tc);function td(t,e){var n=Ec((t=qr(t)).l,(e=qr(e)).l),r=Ec(t.a,e.a),i=Ec(t.b,e.b),a=Ec(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}var ed=function(t){return function(e,n){var r=t((e=Vr(e)).h,(n=Vr(n)).h),i=Ec(e.c,n.c),a=Ec(e.l,n.l),o=Ec(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}(Tc);function nd(t){return function e(n){function r(e,r){var i=t((e=ii(e)).h,(r=ii(r)).h),a=Ec(e.s,r.s),o=Ec(e.l,r.l),l=Ec(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}nd(Tc);var rd=nd(Ec);function id(t){return+t}var ad=[0,1];function od(t){return t}function ld(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function sd(t){var e,n=t[0],r=t[t.length-1];return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function ud(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=ld(i,r),a=n(o,a)):(r=ld(r,i),a=n(a,o)),function(t){return a(r(t))}}function cd(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=ld(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=ac(t,e,1,r)-1;return a[n](i[n](e))}}function dd(t,e){return function(){var t,e,n,r,i,a,o=ad,l=ad,s=qc,u=od;function c(){return r=Math.min(o.length,l.length)>2?cd:ud,i=a=null,d}function d(e){return isNaN(e=+e)?n:(i||(i=r(o.map(t),l,s)))(t(u(e)))}return d.invert=function(n){return u(e((a||(a=r(l,o.map(t),$c)))(n)))},d.domain=function(t){return arguments.length?(o=kc.call(t,id),u===od||(u=sd(o)),c()):o.slice()},d.range=function(t){return arguments.length?(l=Mc.call(t),c()):l.slice()},d.rangeRound=function(t){return l=Mc.call(t),s=Hc,c()},d.clamp=function(t){return arguments.length?(u=t?sd(o):od,d):u!==od},d.interpolate=function(t){return arguments.length?(s=t,c()):s},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,r){return t=n,e=r,c()}}()(t,e)}function fd(t,e,n,r){var i,a=function(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=uc?i*=10:a>=cc?i*=5:a>=dc&&(i*=2),e<t?-i:i}(t,e,n);switch((r=gn(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(pn(e)/3)))-pn(Math.abs(t)))}(a,o))||(r.precision=i),kn(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,pn(e)-pn(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-pn(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return xn(r)}function pd(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){var r,i,a,o,l=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((r=e<t)&&(i=t,t=e,e=i),0===(o=fc(t,e,n))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),a=new Array(i=Math.ceil(e-t+1));++l<i;)a[l]=(t+l)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),a=new Array(i=Math.ceil(t-e+1));++l<i;)a[l]=(t-l)/o;return r&&a.reverse(),a}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return fd(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,l=i[a],s=i[o];return s<l&&(r=l,l=s,s=r,r=a,a=o,o=r),(r=fc(l,s,n))>0?r=fc(l=Math.floor(l/r)*r,s=Math.ceil(s/r)*r,n):r<0&&(r=fc(l=Math.ceil(l*r)/r,s=Math.floor(s*r)/r,n)),r>0?(i[a]=Math.floor(l/r)*r,i[o]=Math.ceil(s/r)*r,e(i)):r<0&&(i[a]=Math.ceil(l*r)/r,i[o]=Math.floor(s*r)/r,e(i)),t},t}function hd(){var t=dd(od,od);return t.copy=function(){return e=t,hd().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},vc.apply(t,arguments),pd(t)}function bd(){var t,e=[],n=[],r=[];function i(){var t=0,i=Math.max(1,n.length);for(r=new Array(i-1);++t<i;)r[t-1]=pc(e,t/i);return a}function a(e){return isNaN(e=+e)?t:n[ac(r,e)]}return a.invertExtent=function(t){var i=n.indexOf(t);return i<0?[NaN,NaN]:[i>0?r[i-1]:e[0],i<r.length?r[i]:e[e.length-1]]},a.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,r=0,a=t.length;r<a;++r)null==(n=t[r])||isNaN(n=+n)||e.push(n);return e.sort(ec),i()},a.range=function(t){return arguments.length?(n=Mc.call(t),i()):n.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return r.slice()},a.copy=function(){return bd().domain(e).range(n).unknown(t)},vc.apply(a,arguments)}function gd(){var t,e=0,n=1,r=1,i=[.5],a=[0,1];function o(e){return e<=e?a[ac(i,e,0,r)]:t}function l(){var t=-1;for(i=new Array(r);++t<r;)i[t]=((t+1)*n-(t-r)*e)/(r+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],n=+t[1],l()):[e,n]},o.range=function(t){return arguments.length?(r=(a=Mc.call(t)).length-1,l()):a.slice()},o.invertExtent=function(t){var o=a.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,i[0]]:o>=r?[i[r-1],n]:[i[o-1],i[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return i.slice()},o.copy=function(){return gd().domain([e,n]).range(a).unknown(t)},vc.apply(pd(o),arguments)}function _d(){var t,e=[.5],n=[0,1],r=1;function i(i){return i<=i?n[ac(e,i,0,r)]:t}return i.domain=function(t){return arguments.length?(e=Mc.call(t),r=Math.min(e.length,n.length-1),i):e.slice()},i.range=function(t){return arguments.length?(n=Mc.call(t),r=Math.min(e.length,n.length-1),i):n.slice()},i.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},i.unknown=function(e){return arguments.length?(t=e,i):t},i.copy=function(){return _d().domain(e).range(n).unknown(t)},vc.apply(i,arguments)}function yd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function md(){var t=pd(function(){var t,e,n,r,i,a=0,o=1,l=od,s=!1;function u(e){return isNaN(e=+e)?i:l(0===n?.5:(e=(r(e)-t)*n,s?Math.max(0,Math.min(1,e)):e))}return u.domain=function(i){return arguments.length?(t=r(a=+i[0]),e=r(o=+i[1]),n=t===e?0:1/(e-t),u):[a,o]},u.clamp=function(t){return arguments.length?(s=!!t,u):s},u.interpolator=function(t){return arguments.length?(l=t,u):l},u.unknown=function(t){return arguments.length?(i=t,u):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),u}}()(od));return t.copy=function(){return yd(t,md())},wc.apply(t,arguments)}function vd(){var t=pd(function(){var t,e,n,r,i,a,o,l=0,s=.5,u=1,c=od,d=!1;function f(t){return isNaN(t=+t)?o:(t=.5+((t=+a(t))-e)*(t<e?r:i),c(d?Math.max(0,Math.min(1,t)):t))}return f.domain=function(o){return arguments.length?(t=a(l=+o[0]),e=a(s=+o[1]),n=a(u=+o[2]),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f):[l,s,u]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(c=t,f):c},f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return a=o,t=o(l),e=o(s),n=o(u),r=t===e?0:.5/(e-t),i=e===n?0:.5/(n-e),f}}()(od));return t.copy=function(){return yd(t,vd())},wc.apply(t,arguments)}var wd,xd,kd,Md,zd=Object.freeze({alignment:"start",orientation:"horizontal",text_color:null,title_weight:"bold",text_weight:"normal",text_size:1,screenreader_instructions:""});function Ad(t){for(var e in this._state=t,zd)void 0===this._state[e]&&(this._state[e]=zd[e]);return this}function Td(){return this.declarations=[],this}function Cd(t){return this.selector=t,this.styles=[],this}Ad.prototype.appendTo=function(t){return this._container=ut(t).append("div").classed("fl-legend-wrapper",!0).style("user-select","none").style("-webkit-user-select","none").node(),ut(this._container).insert("p",":first-child").attr("class","fl-legend-announcement fl-legend-sr-only").attr("id","fl-legend-announcement"),this},Ad.prototype.add=function(t){this._legends=Array.isArray(t)?t:[t];var e=this;return this._legends.forEach((function(t){t&&"function"==typeof t.appendTo?t.appendTo(e._container):console.warn("Please pass in valid legend instances into .add()")})),this},Ad.prototype.update=function(){var t=window.template||void 0,e=t?t.state.layout:void 0;xd=this._state.text_color||t&&e&&e.font_color||"#333333",kd=e?e.body_font.name:window.getComputedStyle(document.body).fontFamily,wd=this._state.text_size,Md=this._state.text_weight;var n={family:kd,weight:Md,size:wd,color:xd};this._legends.forEach((function(t){t&&"function"==typeof t.update&&t.update(n)}));var r="horizontal"===this._state.orientation,i=this._state.alignment,a="center"==i?i:"flex-"+i;return ut(this._container).style("justify-content",r?a:null).style("align-items",r?null:a).style("display","flex").style("flex-direction",r?"row":"column"),ut(this._container).selectAll(".fl-legend-container").style("padding-inline-end",(function(){return r?"0.5rem":0})).style("padding-bottom",(function(){return r?0:"0.25rem"})).style("justify-content",a),ut(this._container).selectAll(".fl-legend-title").style("color",this._state.text_color).style("font-weight",this._state.title_weight).style("font-size",wd+"rem").style("margin-right",.25*wd+"rem").style("line-height","1.25em").style("margin-top",0).style("margin-bottom",0).style("text-align",i),ut(this._container).selectAll(".fl-legend-item").style("display","inline-flex").style("text-align",i),ut(this._container).selectAll(".fl-legend-label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",wd+"rem"),ut(this._container).selectAll(".label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",wd+"rem"),this},Td.prototype.select=function(t){if(!t)return this;var e=new Cd(t);return e.parent=this,this.addDeclaration(e),e},Td.prototype.addDeclaration=function(t){return this.declarations.push(t),this},Td.prototype.print=function(){var t="";return this.declarations.forEach((function(e){t+=e.selector+" {\n",e.styles.forEach((function(e){t+="\t"+e[0]+": "+e[1]+";\n"})),t+="}\n\n"})),t},Td.prototype.clear=function(){return this.declarations=[],this},Cd.prototype.style=function(t,e){var n="function"==typeof value_?e():e;return""!==n&&null!=n&&this.styles.push([t,n]),this},Cd.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};var Ed=Object.freeze({font_size:1,font_weight:"bold",height:2});function Sd(t,e,n){for(var r in this._state=t,Ed)void 0===this._state[r]&&(this._state[r]=Ed[r]);return this._layout=n||{},this._styles=new Td,this._selector=e,this._createStylesheet(),this}Sd.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-controls",document.head.appendChild(this._stylesheet)},Sd.prototype.update=function(){this._styles.clear(),this._styles.select(this._selector+".hidden").style("display","none"),this._styles.select(this._selector).style("vertical-align","middle").style("position","relative").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(".fl-controls-title").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("vertical-align","middle"),this._styles.select(this._selector+".fl-control .button").style("height",this._state.height+"rem").style("padding","0 0.5em"),this._styles.select(this._selector+"-dropdown select").style("height",this._state.height+"rem").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("padding","0 "+.1*this._state.height+"rem"),this._styles.select(this._selector+"-slider .slider-end-labels").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(this._selector+"-slider").style("height",this._state.height+"rem"),this._stylesheet.innerHTML=this._styles.print()};var Nd=Object.freeze({background:null,font_color:null,background_selected:"#333333",font_color_selected:"#ffffff",background_hover:null,font_color_hover:null,border_width:1,border_transparency:.25,border_color:null,border_radius:3});function Fd(t,e,n){for(var r in this._state=t,Nd)void 0===this._state[r]&&(this._state[r]=Nd[r]);return this._layout=n||{},this._styles=new Td,this._selector=e,this._createStylesheet(),this}Fd.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-button",document.head.appendChild(this._stylesheet)},Fd.prototype.update=function(){this._styles.clear();var t=this._state.background||this._layout.background_color_enabled&&this._layout.background_color||"#ffffff",e=this._state.font_color||this._layout.font_color||"#333333",n=Da(this._state.border_color||e,this._state.border_transparency),r=$a();this._styles.select(this._selector+".fl-control.hidden").style("display","none"),this._styles.select(this._selector+".fl-control .button").style("overflow","hidden").style("white-space","nowrap").style("margin","0 2px 0 0 !important").style("background-color",t).style("color",e).style("border",this._state.border_width+"px solid "+n).style("border-radius",this._state.border_radius+"px"),this._styles.select(this._selector+".fl-control .button:hover").style("background-color",this._state.background_hover||t).style("color",this._state.font_color_hover||e),this._styles.select(this._selector+".fl-control .button.selected").style("background-color",this._state.background_selected).style("color",this._state.font_color_selected),this._styles.select(this._selector+".grouped.fl-control .button").style("border-right","none").style("border-radius","0").style("margin","0");var i="rtl"===r,a=i?":last-child":":first-child",o=i?":first-child":":last-child";this._styles.select(this._selector+".grouped.fl-control .button"+a).style("border-radius",this._state.border_radius+"px 0 0 "+this._state.border_radius+"px"),this._styles.select(this._selector+".grouped.fl-control .button"+o).style("border-radius","0 "+this._state.border_radius+"px "+this._state.border_radius+"px 0").style("border-right",this._state.border_width+"px solid "+n),this._styles.select(this._selector+".grouped.fl-control.fixed-width:not(.hidden)").style("width",this._state.grouped_width+"%"),this._stylesheet.innerHTML=this._styles.print()};var Ld=Object.freeze({background:null,font_color:null,border_style:"bottom",border_width:1,border_color:null,border_transparency:.25,border_radius:3});function Od(t,e,n){for(var r in this._state=t,Ld)void 0===this._state[r]&&(this._state[r]=Ld[r]);return this._layout=n||{},this._styles=new Td,this._selector=e,this._createStylesheet(),this}function jd(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}Od.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-dropdown",document.head.appendChild(this._stylesheet)},Od.prototype.update=function(){this._styles.clear();const t=this._state.background||"transparent",e=this._state.font_color||this._layout.font_color,n=e||"inherit";let r;r=this._state.border_color?Da(this._state.border_color,this._state.border_transparency):e?Da(e,this._state.border_transparency):"currentColor",this._styles.select(this._selector+" .heading").style("margin-bottom","0.4em"),this._styles.select(this._selector).style("pointer-events","all"),this._styles.select(this._selector+" select").style("display","inline-block").style("cursor","pointer").style("overflow","hidden").style("white-space","nowrap").style("position","relative").style("font-family","inherit").style("background-color",t).style("color",n).style("border","bottom"==this._state.border_style?this._state.border_width+"px solid transparent":this._state.border_width+"px solid "+r).style("border-bottom","bottom"==this._state.border_style?this._state.border_width+"px solid "+r:null).style("border-radius","bottom"==this._state.border_style?null:this._state.border_radius+"px"),this._styles.select(this._selector+":after").style("right","bottom"==this._state.border_style?null:this._state.border_width+5+"px").style("color",n),this._styles.select(this._selector+" .main .current").style("line-height","1em").style("height","100%").style("max-width","88%").style("display","inline-block").style("overflow","hidden").style("vertical-align","top"),this._styles.select(this._selector+" .list").style("top","2px").style("min-width","100%").style("padding","2px").style("display","none").style("max-height","200px").style("overflow-y","auto").style("box-shadow","0 1px 4px rgba(0, 0, 0, .1)").style("margin-top","2px").select(".list-item").style("line-height","1em").style("cursor","pointer").style("font-weight","normal").style("color",n),this._styles.select(this._selector+".open .list").style("display","block").style("border",this._state.border_width+"px solid "+r).style("background-color",t).style("z-index","1").style("animation","dropdown-out 200ms"),this._styles.select(this._selector+" .list-item:hover").style("opacity","0.6"),this._styles.select(this._selector+" .list-item.selected, "+this._selector+" .list-item.selected:hover").style("opacity","1").style("cursor","default"),"bottom"==this._state.border_style&&this._styles.select(this._selector+" .main").style("padding-left",0).style("padding-right","0.1rem"),this._stylesheet.innerHTML=this._styles.print()};var $d=Object.freeze({play_color:null,handle_color:null,font_color:null,track_color:null,handle_height:1,track_height:.2,margin:4.5,play_button:!0});function Dd(t,e,n){for(var r in this._state=t,$d)void 0===this._state[r]&&(this._state[r]=$d[r]);return this._layout=n||{},this._styles=new Td,this._selector=e,this._createStylesheet(),this}Dd.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-slider",document.head.appendChild(this._stylesheet)},Dd.prototype.update=function(){this._styles.clear();var t=this._state.track_color||"#dddddd",e=this._state.font_color||this._layout.font_color||"currentColor",n=this._state.handle_color||this._layout.font_color||"currentColor",r=this._state.play_color||this._layout.font_color||"currentColor",i=Math.round(jd(this._state.handle_height)),a=jd(this._state.track_height);this._styles.select(this._selector+" .fl-controls-slider").style("height",2*i+"px"),this._styles.select(this._selector+" .slider-play").style("fill",r).style("width",i+"px").style("height",i+"px").style("display",this._state.play_button?null:"none"),this._styles.select(this._selector+" .slider-label").style("padding-inline-start","0.3rem").style("box-sizing","content-box").style("color",e),this._styles.select(this._selector+" input[type=range]").style("-webkit-appearance","none").style("color","currentColor").style("background-color","transparent"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-runnable-track").style("-webkit-appearance","none").style("background",t).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-webkit-slider-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("background",n).style("margin-top",-i/2+a/2+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-track").style("-webkit-appearance","none").style("background",t).style("border-radius","100px").style("height",a+"px"),this._styles.select(this._selector+" input[type=range]::-moz-range-thumb").style("-webkit-appearance","none").style("width",i+"px").style("height",i+"px").style("border-radius","100px").style("border","none").style("background",n),this._stylesheet.innerHTML=this._styles.print()},"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e});var Pd,Ud,Bd={},qd=25,Hd=10,Yd=10,Rd={};function Id(t,e,n,r,i,a,o){var l=n-t/2-Yd,s=n+t/2+Yd,u=t/2+Math.min(0,l-i.left)+Math.max(0,s-i.right);return{pos:[u,o],shape:u-Hd<5?[-u,-15*a,Math.max(Hd,5-u),-10*a]:u+Hd>t-5?[Math.min(-10,t-u-5),-10*a,Math.min(Hd,t-u),-15*a]:[-10,-10*a,Hd,-10*a]}}function Wd(t,e,n,r,i,a,o){var l=r-e/2-Yd,s=r+e/2+Yd,u=e/2+Math.min(0,l-i.top)+Math.max(0,s-i.bottom);return{pos:[o,u],shape:u-Hd<5?[-15*a,-u,-10*a,Math.max(Hd,5-u)]:u+Hd>e-5?[-10*a,Math.min(-10,e-u-5),-15*a,Math.min(Hd,e-u)]:[-10*a,-10,-10*a,Hd]}}function Vd(t,e,n,r,i,a){var o=Rd[t](e,n,r,i,a),l=r-qd-o.pos[0],s=i-qd-o.pos[1];return{left:l,top:s,right:l+e+50,bottom:s+n+50}}function Gd(t,e,n){var r,i=document.createElementNS("http://www.w3.org/2000/svg",t);if(e)for(r in e)i.setAttribute(r,e[r]);var a=i.style;if(n)for(r in n)a[r]=n[r];return i}function Xd(){return Pd||((Pd=document.createElement("div")).id="flourish-popup-constrainer",Pd.setAttribute("aria-hidden",!0),(Ud=Pd.style).overflow="hidden",Ud.pointerEvents="none",Ud.position="absolute",Ud.left="0",Ud.top="0",Ud.margin="0",Ud.padding="0",document.body.appendChild(Pd),this._resizeConstrainer(),Pd)}Rd.bottom=function(t,e){return{shape:[-10,-10,Hd,-10],pos:[t/2,e+Yd]}},Rd.top=function(t,e){return{shape:[-10,Yd,Hd,Yd],pos:[t/2,-10]}},Rd.left=function(t,e){return{shape:[Yd,Hd,Yd,-10],pos:[-10,e/2]}},Rd.right=function(t,e){return{shape:[-10,Hd,-10,-10],pos:[t+Yd,e/2]}},Rd.topLeft=function(t,e){return{shape:[15,Yd,Yd,15],pos:[-10,-10]}},Rd.bottomLeft=function(t,e){return{shape:[15,-10,Yd,-15],pos:[-10,e+Yd]}},Rd.topRight=function(t,e){return{shape:[-15,Yd,-10,15],pos:[t+Yd,-10]}},Rd.bottomRight=function(t,e){return{shape:[-15,-10,-10,-15],pos:[t+Yd,e+Yd]}},Rd.bottomFlexible=function(t,e,n,r,i){return Id(t,0,n,0,i,1,e+Yd)},Rd.topFlexible=function(t,e,n,r,i){return Id(t,0,n,0,i,-1,-10)},Rd.rightFlexible=function(t,e,n,r,i){return Wd(0,e,0,r,i,1,t+Yd)},Rd.leftFlexible=function(t,e,n,r,i){return Wd(0,e,0,r,i,-1,-10)};var Zd={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function Jd(){for(var t in this.unique_id=function(){let t,e;return"Flourish"in window?(t=window.Flourish,e="__popup_next_unique_id"):(t=window,e="__flourish_popup_next_unique_id"),t[e]?(t[e]+=1,t[e]):t[e]=1e3}(),this.is_visible=!0,this.element=null,Zd)this["_"+t]=Zd[t];this.handlers={click:[]}}function Qd(t){Jd.prototype[t]=function(e){return void 0===e?this["_"+t]:(this["_"+t]=e,this)}}for(var Kd in Zd)Qd(Kd);function tf(){return new Jd}Jd.prototype.point=function(t,e){if(void 0===t)return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(void 0!==e)this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},Jd.prototype.directions=function(t){return void 0===t?this._directions:("string"==typeof t&&(t=[t]),this._directions=t.slice(),this)},Jd.prototype.text=function(t){return this._html=t.replace(/[&<>]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[t]})),this},Jd.prototype.on=function(t,e){if(!(t in this.handlers))throw new Error("Popup.on: No such event: "+t);return this.handlers[t].push(e),this},Jd.prototype.fire=function(t,e){if(!(t in this.handlers))throw new Error("Popup.fire: No such event: "+t);for(var n=this.handlers[t],r=0;r<n.length;r++)n[r].call(this,e);return this},Jd.prototype._getElement=function(){var t=this,e=t.element;if(!e){e=t.element=document.createElement("div");var n="flourish-popup-"+t.unique_id;e.className="flourish-popup",e.id=n;var r=e.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",e.addEventListener("click",(function(e){t.fire("click",e)}),!1);var i=Gd("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),a=Gd("filter",{id:"dropshadow-"+t.unique_id,height:"130%"});a.appendChild(Gd("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),a.appendChild(Gd("feOffset",{dx:0,dy:2,result:"offsetblur"}));var o=Gd("feComponentTransfer");o.appendChild(Gd("feFuncA",{type:"linear",slope:.2})),a.appendChild(o);var l=Gd("feMerge");a.appendChild(l),l.appendChild(Gd("feMergeNode")),l.appendChild(Gd("feMergeNode",{in:"SourceGraphic"})),i.appendChild(a);var s=Gd("g",{filter:"url(#dropshadow-"+t.unique_id+")",fill:"white",stroke:"none"});s.appendChild(Gd("rect",{x:qd,y:qd,rx:5})),s.appendChild(Gd("path")),i.appendChild(s),e.appendChild(i);var u=document.createElement("div");u.className="flourish-popup-content",(r=u.style).position="absolute",r.top=r.left="25px",r.padding="10px",e.appendChild(u),t._getConstrainer().appendChild(e)}return t._resizeConstrainer(),e},Jd.prototype._getConstrainer=Xd,Jd.prototype._resizeConstrainer=function(){Pd||Xd.call(this);var t=Ud.display;Ud.display="none",Ud.width=document.documentElement.scrollWidth+"px",Ud.height=document.documentElement.scrollHeight+"px",Ud.display=t},Jd.prototype.draw=function(){var t=this;if(t.is_visible=!0,t._point){var e=document.documentElement.getBoundingClientRect(),n=t._point[0],r=t._point[1],i=t._container.getBoundingClientRect();n<i.left?n=i.left:n>i.right&&(n=i.right),r<i.top?r=i.top:r>i.bottom&&(r=i.bottom);var a=n-e.left,o=r-e.top,l=t._getElement(),s=l.style,u=l.querySelector(".flourish-popup-svg"),c=u.querySelector("g"),d=c.querySelector("rect"),f=c.querySelector("path"),p=l.querySelector(".flourish-popup-content");s.display="block",p.style.maxWidth=function(e){return t._maxWidth.match(/^\d+(?:\.\d+)?%$/)?e.width*parseFloat(t._maxWidth)/100:t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(t._maxWidth):(null!=t._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+t._maxWidth),e.width)}(i)+"px",t._inner_html!=t._html&&(p.innerHTML=t._inner_html=t._html);var h,b,g=p.getBoundingClientRect();do{h=Math.ceil(g.width),b=Math.ceil(g.height),s.width=h+50+"px",s.height=b+50+"px",g=p.getBoundingClientRect()}while(h!=Math.ceil(g.width)||b!=Math.ceil(g.height));d.setAttribute("width",h),d.setAttribute("height",b),u.setAttribute("width",h+50),u.setAttribute("height",b+50);for(var _,y,m=null,v=null,w=null,x=1/0,k=1/0,M=0;M<t._directions.length;M++){var z=t._directions[M],A=Vd(z,h,b,n,r,i),T=Math.max(0,Math.floor(i.left)-A.left-15)+Math.max(0,A.right-Math.ceil(i.right)-15),C=Math.max(0,Math.floor(i.top)-A.top-15)+Math.max(0,A.bottom-Math.ceil(i.bottom)-15);if(0==T&&0==C){m=z;break}(T<x||T==x&&C<_)&&(x=T,_=C,v=z),(C<k||C==k&&T<y)&&(k=C,y=T,w=z)}return m?z=m:"horizontal"==t._fallbackFit?z=v:"vertical"==t._fallbackFit?z=w:(console.warn("Popup: failed to point box of size ("+h+", "+b+") at ("+n+", "+r+") within ("+i.left+", "+i.top+", "+i.right+", "+i.bottom+")"),z=t._directions[0]),function(t,e,n,r,i,a,o,l,s,u){var c=Rd[t](r,i,l,s,u);e.left=a-qd-c.pos[0]+"px",e.top=o-qd-c.pos[1]+"px",n.setAttribute("d","M0,0L"+c.shape.join(",")+"Z"),n.setAttribute("transform","translate("+(c.pos[0]+qd)+","+(c.pos[1]+qd)+")")}(z,s,f,h,b,a,o,n,r,i),t}console.error("Popup: cannot draw popup till point() has been specified")},Jd.prototype.hide=function(){return this.is_visible?(this.is_visible=!1,this._getElement().style.display="none",this):this},tf.version="2.1.5";var ef,nf,rf=0,af=0,of=0,lf=0,sf=0,uf=0,cf="object"==typeof performance&&performance.now?performance:Date,df="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ff(){return sf||(df(pf),sf=cf.now()+uf)}function pf(){sf=0}function hf(){this._call=this._time=this._next=null}function bf(t,e,n){var r=new hf;return r.restart(t,e,n),r}function gf(){ff(),++rf;for(var t,e=ef;e;)(t=sf-e._time)>=0&&e._call.call(null,t),e=e._next;--rf}function _f(){sf=(lf=cf.now())+uf,rf=af=0;try{gf()}finally{rf=0,function(){var t,e,n=ef,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ef=e);nf=t,mf(r)}(),sf=0}}function yf(){var t=cf.now(),e=t-lf;e>1e3&&(uf-=e,lf=t)}function mf(t){rf||(af&&(af=clearTimeout(af)),t-sf>24?(t<1/0&&(af=setTimeout(_f,t-cf.now()-uf)),of&&(of=clearInterval(of))):(of||(lf=cf.now(),of=setInterval(yf,1e3)),rf=1,df(_f)))}function vf(t,e,n){var r=new hf;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}hf.prototype=bf.prototype={constructor:hf,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ff():+n)+(null==e?0:+e),this._next||nf===this||(nf?nf._next=this:ef=this,nf=this),this._call=t,this._time=n,mf()},stop:function(){this._call&&(this._call=null,this._time=1/0,mf())}};var wf={value:function(){}};function xf(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new kf(r)}function kf(t){this._=t}function Mf(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function zf(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=wf,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}kf.prototype=xf.prototype={constructor:kf,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,l=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<l;)if(n=(t=a[o]).type)i[n]=zf(i[n],t.name,e);else if(null==e)for(n in i)i[n]=zf(i[n],t.name,null);return this}for(;++o<l;)if((n=(t=a[o]).type)&&(n=Mf(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new kf(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Af=xf("start","end","cancel","interrupt"),Tf=[];function Cf(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var u,c,d,f;if(1!==n.state)return s();for(u in i)if((f=i[u]).name===n.name){if(3===f.state)return vf(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[u]):+u<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[u])}if(vf((function(){3===n.state&&(n.state=4,n.timer.restart(l,n.delay,n.time),l(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),u=0,c=-1;u<d;++u)(f=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function l(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=bf(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:Af,tween:Tf,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function Ef(t,e){var n=Nf(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function Sf(t,e){var n=Nf(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Nf(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ff(t,e){var n,r;return function(){var i=Sf(this,t),a=i.tween;if(a!==n)for(var o=0,l=(r=n=a).length;o<l;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function Lf(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Sf(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var l={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=l;break}s===u&&i.push(l)}a.tween=i}}function Of(t,e,n){var r=t._id;return t.each((function(){var t=Sf(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Nf(t,r).value[e]}}function jf(t,e){var n;return("number"==typeof e?$c:e instanceof yr?Sc:(n=yr(e))?(e=n,Sc):Bc)(t,e)}function $f(t){return function(){this.removeAttribute(t)}}function Df(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Pf(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Uf(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Bf(t,e,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttribute(t))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,s));this.removeAttribute(t)}}function qf(t,e,n){var r,i,a;return function(){var o,l,s=n(this);if(null!=s)return(o=this.getAttributeNS(t.space,t.local))===(l=s+"")?null:o===r&&l===i?a:(i=l,a=e(r=o,s));this.removeAttributeNS(t.space,t.local)}}function Hf(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Yf(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Rf(t,e){return function(){Ef(this,t).delay=+e.apply(this,arguments)}}function If(t,e){return e=+e,function(){Ef(this,t).delay=e}}function Wf(t,e){return function(){Sf(this,t).duration=+e.apply(this,arguments)}}function Vf(t,e){return e=+e,function(){Sf(this,t).duration=e}}var Gf=st.prototype.constructor;function Xf(t){return function(){this.style.removeProperty(t)}}var Zf=0;function Jf(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Qf(){return++Zf}var Kf=st.prototype;Jf.prototype={constructor:Jf,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=s(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var l,u,c=r[o],d=c.length,f=a[o]=new Array(d),p=0;p<d;++p)(l=c[p])&&(u=t.call(l,l.__data__,p,c))&&("__data__"in l&&(u.__data__=l.__data__),f[p]=u,Cf(f[p],e,n,p,f,Nf(l,n)));return new Jf(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=c(t));for(var r=this._groups,i=r.length,a=[],o=[],l=0;l<i;++l)for(var s,u=r[l],d=u.length,f=0;f<d;++f)if(s=u[f]){for(var p,h=t.call(s,s.__data__,f,u),b=Nf(s,n),g=0,_=h.length;g<_;++g)(p=h[g])&&Cf(p,e,n,g,h,b);a.push(h),o.push(s)}return new Jf(a,o,e,n)},filter:function(t){"function"!=typeof t&&(t=d(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],l=o.length,s=r[i]=[],u=0;u<l;++u)(a=o[u])&&t.call(a,a.__data__,u,o)&&s.push(a);return new Jf(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),l=0;l<a;++l)for(var s,u=e[l],c=n[l],d=u.length,f=o[l]=new Array(d),p=0;p<d;++p)(s=u[p]||c[p])&&(f[p]=s);for(;l<r;++l)o[l]=e[l];return new Jf(o,this._parents,this._name,this._id)},selection:function(){return new Gf(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Qf(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,u=0;u<s;++u)if(o=l[u]){var c=Nf(o,e);Cf(o,t,n,u,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Jf(r,this._parents,t,n)},call:Kf.call,nodes:Kf.nodes,node:Kf.node,size:Kf.size,empty:Kf.empty,each:Kf.each,on:function(t,e){var n=this._id;return arguments.length<2?Nf(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ef:Sf;return function(){var o=a(this,t),l=o.on;l!==r&&(i=(r=l).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=r(t),i="transform"===n?Qc:jf;return this.attrTween(t,"function"==typeof e?(n.local?qf:Bf)(n,i,Of(this,"attr."+t,e)):null==e?(n.local?Df:$f)(n):(n.local?Uf:Pf)(n,i,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var i=r(t);return this.tween(n,(i.local?Hf:Yf)(i,e))},style:function(t,e,n){var r="transform"==(t+="")?Jc:jf;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=T(this,t),o=(this.style.removeProperty(t),T(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Xf(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=T(this,t),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(t),s=l=T(this,t)),o===s?null:o===r&&s===i?a:(i=s,a=e(r=o,l))}}(t,r,Of(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,l="end."+o;return function(){var s=Sf(this,t),u=s.on,c=null==s.value[o]?a||(a=Xf(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(l,i=c),s.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=T(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Of(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Nf(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?Ff:Lf)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Rf:If)(e,t)):Nf(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Wf:Vf)(e,t)):Nf(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){Sf(this,t).ease=e}}(e,t)):Nf(this.node(),e).ease},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var l={value:o},s={value:function(){0==--i&&a()}};n.each((function(){var n=Sf(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),n.on=e}))}))}};var tp={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function ep(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return tp.time=ff(),tp;return n}st.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}(this,t)}))},st.prototype.transition=function(t){var e,n;t instanceof Jf?(e=t._id,t=t._name):(e=Qf(),(n=tp).time=ff(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,l=r[a],s=l.length,u=0;u<s;++u)(o=l[u])&&Cf(o,t,e,u,l,n||ep(o,e));return new Jf(r,this._parents,t,e)};var np=1,rp={container:document.body,point:[window.innerWidth/2,window.innerHeight/2],html:"",open_duration:250,close_duration:250,popup_custom_template:"",position:"overlay",shadow:!0,underlay_color:"rgba(255, 255, 255, 0.75)",width_side:35,height_side:35,width_overlay:80,height_overlay:80,vertical_position:"click",max_width:null,max_height:null,closeable:!0};function ip(){var t=this;for(var e in t.unique_id=np++,t._is_open=!1,t._onclose=null,rp)t["_"+e]=rp[e]}function ap(t){ip.prototype[t]=function(e){return void 0===e?this["_"+t]:(this["_"+t]=e,this)}}for(var op in rp)ap(op);ip.prototype.point=function(t,e){if(void 0===t)return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(void 0!==e)this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Panel: could not understand argument");return this},ip.prototype.container=function(t){return t&&(this._container=t),this},ip.prototype.hide=function(){var t=this;if(t._is_open)return function(t){t._getElement().style.pointerEvents="none",t._is_open=!1;var e=t._close_duration;ut(t._getElement()).transition().duration(e).style("background","rgba(255, 255, 255, 0)").on("interrupt",(function(){ut(this).style("display",t._is_open?"block":"none")})).on("end",(function(){ut(this).style("display","none"),ut(t._content).html("")})).select(".flourish-panel-close").style("opacity","0"),ut(t._inner).transition().duration(e).style("opacity",0),ut(t._content).transition().duration(e/2).style("opacity",0)}(t),t._focusTrap.deactivate(),this},ip.prototype.close=ip.prototype.hide,ip.prototype.draw=function(){var t=this;return t._content.innerHTML=t._html,function(t){var e=t._is_open||t._html==t._default?0:t._open_duration,n=window.innerWidth,r=window.innerHeight,i="overlay"==t._position,a="top"==t._position||"bottom"==t._position,o="left"==t._position||"right"==t._position,l=100*(t._max_width||1/0)/n,s=100*(t._max_height||1/0)/r,u=100*t._point[1]/r,c="click"==t._vertical_position&&!Flourish.fixed_height,d=i?Math.min(t._width_overlay,l):a?100:Math.min(t._width_side,l),f=i?Math.min(t._height_overlay,s):o?100:Math.min(t._height_side,s),p=i?(100-d)/2:"right"==t._position?100-d:0,h=c?Math.max(1,Math.min(u-f/2,99-f)):(100-f)/2,b=i?h:"bottom"==t._position?100-f:0,g=i?0:d,_=i?0:f,y=i?100*t._point[0]/n:"right"==t._position?100:"left"==t._position?-d:0,m=i?u:"bottom"==t._position?100:"top"==t._position?-f:0,v=function(t){var e=t.querySelectorAll("h1, h2, h3, h4, h5, h6");if(e.length>0)return e[0].textContent.trim();var n=t.querySelector(".title, .heading, .panel-title, .popup-title");return n?n.textContent.trim():null}(t._content),w=v?v+" dialog":"Information dialog";ut(t._getElement()).style("display","block").transition().duration(e).delay(.25*e).style("background",i?t._underlay_color:"rgba(255, 255, 255, 0)").style("pointer-events",i?null:"none").attr("aria-label",w),ut(t._inner).style("opacity",1).style("display","block").style("pointer-events","none").style("width",g+"%").style("height",_+"%").style("left",y+"%").style("top",m+"%").transition().duration(e).style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",b+"%").on("end",(function(){ut(t._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",b+"%")})).on("interrupt",(function(){ut(t._inner).style("pointer-events","all").style("width",d+"%").style("height",f+"%").style("left",p+"%").style("top",b+"%")}));var x=o&&c;ut(t._content).transition().duration(e/4).delay(e).style("opacity",1).on("interrupt",(function(){ut(this).style("opacity",1)})),ut(t._content).select(".flourish-panel-content-inner").style("position",x?"absolute":null).style("top",x?u+"%":null).style("transform",x?"translateY(-50%)":null),ut(t._inner).select(".flourish-panel-close").style("opacity",0).transition().duration(e/4).delay(e).style("opacity",t._closeable?1:0).attr("tabindex",t._closeable?"0":"-1"),t._focusTrap||(t._focusTrap=function(){let t=null,e=null,n=null;const r=document.querySelector(".flourish-panel"),i=document.querySelector(".flourish-panel-inner"),a=i.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [role="button"]');a.length&&(e=a[0],n=a[a.length-1]);function o(t){if("Tab"===t.key||9===t.keyCode){if(0===a.length)return;t.shiftKey&&document.activeElement===e?(t.preventDefault(),n.focus()):t.shiftKey||document.activeElement!==n||(t.preventDefault(),e.focus())}}return{activate:function(){t=document.activeElement,i.addEventListener("keydown",o),setTimeout((()=>{r.focus()}),100)},deactivate:function(){i.removeEventListener("keydown",o);Boolean(document.querySelector(":focus-visible"))&&t&&t.focus()}}}());t._focusTrap.activate(),t._is_open=!0,gf()}(t),this},ip.prototype.on=function(t,e){return"close"==t?e&&(this._onclose=e):console.error("Panel .on() method only supports 'close' events"),this},ip.prototype.margins=function(){var t={top:0,right:0,bottom:0,left:0};if(this._is_open&&"overlay"!=this._position){var e=this._getElement().getBoundingClientRect();"top"==this._position&&(t.top=e.top+e.height),"right"==this._position&&(t.right=e.left),"bottom"==this._position&&(t.bottom=e.top),"left"==this._position&&(t.left=e.left+e.width)}return t.css=t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px",t},ip.prototype._getElement=function(){var t=this,e="flourish-panel-"+t.unique_id,n=document.getElementById(e);if(!n){(n=document.createElement("div")).className="flourish-panel",n.role="dialog",n.ariaModal="true",n.tabIndex="-1",n.id=e,n.addEventListener("click",(function(t){t.stopPropagation(),l()})),window.addEventListener("keydown",(function(e){t._is_open&&"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),l())}),!1);var r=n.style;r.position="absolute",r.zIndex="999999",r.pointerEvents="none",r.width="100%",r.height="100%",r.top="0",r.left="0",r.background="rgba(255, 255, 255, 0)";var i=document.createElement("div");i.className="flourish-panel-inner",n.appendChild(i),t._inner=i,function(t){ut(t._inner).append("svg").attr("class","flourish-panel-close fl-ignore-svg-download").attr("viewBox","0 0 40 40").style("width","1.25rem").style("height","1.25rem").style("position","absolute").style("right","1rem").style("top","1rem").style("cursor","pointer").style("opacity",0).attr("tabindex","-1").attr("role","button").attr("aria-label","Close").on("mouseover",(function(){t._closeable&&(this.style.opacity=.66)})).on("mouseout",(function(){t._closeable&&(this.style.opacity=1)})).on("click",(function(){Q.stopPropagation(),t.hide(),t._onclose&&t._onclose()})).on("touch",(function(){Q.stopPropagation(),t.hide(),t._onclose&&t._onclose()})).on("keydown",(function(){"Enter"!=Q.key&&" "!=Q.key||(Q.stopPropagation(),Q.preventDefault(),t.hide(),t._onclose&&t._onclose())})).append("path").attr("stroke","#333333").attr("stroke-width","0.5rem").attr("stroke-linecap","round").attr("d","M 10,10 L 30,30 M 30,10 L 10,30")}(t),(r=i.style).width="0",r.height="0",r.position="absolute",r.boxSizing="border-box";var a=document.createElement("div");a.className="flourish-panel-shadow",i.appendChild(a);var o=document.createElement("div");o.className="flourish-panel-content",i.appendChild(o),t._content=o,(r=o.style).opacity="0",r.overflowY="auto",r.height="100%",t._container.appendChild(n)}function l(){t.hide(),t._onclose&&t._onclose()}return n};var lp={mode:"popup",locked_id:null,popup_is_custom:!1,popup_custom_header:"Popup header",popup_custom_main:"Popup main content. Write your column names in between double curly brackets to display dynamic content.",popup_custom_accessible:"",popup_teaser_default:"Click to see more",popup_text_color:"#333333",popup_align:"start",popup_font_size:1,popup_font_family:null,popup_width:18,popup_background:"#ffffff",popup_background_opacity:1,popup_padding:.5,popup_radius:.2,popup_shadow:!0,popup_pointer:!0,popup_header_background:"#333333",popup_header_text_color:"#ffffff",popup_header_type:"block",popup_list_type:"table",popup_list_label_weight:"normal",popup_list_separator:": ",panel_is_custom:!1,panel_custom_header:"Custom panel header",panel_custom_main:"Custom panel main content",panel_side_default_content:"<h3>Tap or click to explore</h3>",panel_side_fixed:!1,panel_position:"overlay",panel_width_overlay:80,panel_height_overlay:80,panel_vertical_position:"center",panel_width_side:35,panel_height_side:35,panel_max_width:null,panel_max_height:null,panel_text_color:"#333333",panel_align:"start",panel_font_size:1.25,panel_font_family:null,panel_background:"#ffffff",panel_background_opacity:.9,panel_padding:1.2,panel_radius:.2,panel_shadow:!0,panel_open_duration:250,panel_close_duration:250,panel_list_type:"table",panel_list_label_weight:"normal",panel_list_separator:": "};const sp=/\{\{((?:[^}]|\}[^}])*)\}\}/g;function up(t){return!(""!==t&&!Number.isNaN(t)&&null!=t)}function cp(t,e){let n={title:null,subtitle:null,main:{}};var r={};const i=e[t._title_key],a=e[t._subtitle_key];if(i){n.title=i;const e=t._column_names[t._title_key];r[e]=!0}if(a){n.subtitle=a;const e=t._column_names[t._subtitle_key];r[e]=!0}const o=Object.keys(t._column_names);o.includes("metadata")&&o.push(o.splice(o.indexOf("metadata"),1)[0]);for(let i=0;i<o.length;i++){const a=o[i];if(t._column_names_hidden.indexOf(a)>-1)continue;if(a==t._title_key)continue;if(a==t._subtitle_key)continue;const l=t._column_names[a];if(Array.isArray(l))l.forEach((function(t,i){r[t]||up(e[a])||(r[t]=!0,n.main[t]=e[a][i])}));else{if(r[l]||up(e[a]))continue;r[l]=!0,n.main[l]=e[a]}}return n}function dp(t,e){let n="";var r=t._popup_default_template;const i=gp(t,e);if(t._state.popup_is_custom&&t._state.popup_custom_accessible){const e=t._state.popup_custom_accessible;n=bp(e,t,i)}else if(r){var a={};r.match(sp).forEach((e=>{e.replace(sp,(function(e,r){var o;const l=t._column_names[r];if(Array.isArray(l)){if(0==l.length)return;l.forEach((function(t,e){if(a[t])return;a[t]=!0;const n=i[r][e];Ta(n)||up(n)||(o=`${t}: ${n}, `)}))}else{const t=i[r];if(Ta(t)||up(t))return;if(a[l])return;a[l]=!0,o=`${l}: ${t}, `}void 0!==o&&(n+=o)}))}))}else{let e=cp(t,i);for(var o in e.title&&(n+=`${e.title}, `),e.subtitle&&(n+=`${e.subtitle}, `),e.main){const t=e.main[o];up(t)||(n+=`${o}: ${t}, `)}}return n=n.replace(/, $/,""),function(t){const e=document.createElement("div");return e.innerHTML=t,e.innerText}(n)}function fp(t,e,n){var r="<div class='flourish-panel-content-inner'>",i=t["_"+n+"_default_template"],a=t._state[n+"_list_type"],o=t._state[n+"_list_separator"],l="<br />"===o,s=l?"":o,u=l?o:"";if(i)r+=i.replace(sp,(function(n,r){var i,a=t._column_names[r];if(Array.isArray(a)){if(0==a.length)return"";i="<ul>",a.forEach((function(t,n){i+="<li>"+t+o+e[r][n]+"</li>"})),i+="</ul>"}else i=e[r];return void 0!==i?i:""}));else{let n=cp(t,e);if((n.title||n.subtitle)&&(r+="<header>",n.title&&(r+=`<h3>${n.title}</h3>`),n.subtitle&&(r+=`<h4>${n.subtitle}</h4>`),r+="</header>"),Object.keys(n.main).length){let t="";for(var c in n.main){const e=n.main[c];"table"==a?(t+="<tr><td class='table-col-label'><span class='data-heading'>",t+=c+"</span></td><td class='table-col-value'>",t+=e+"</td></tr>"):"ul"==a&&(t+="<li><span class='data-heading'>"+c+s,t+=" </span> "+u+e+"</li>")}r+="<div class='main-content'><"+a+">",r+=t,r+="</"+a+"></div></div>"}}return r}function pp(t,e,n){var r;return Object.keys(t._column_names).some((function(i){if(Array.isArray(t._column_names[i])){var a=t._column_names[i].indexOf(e);if(a>=0)return r=n[i][a],!0}else if(t._column_names[i]==e)return r=n[i],!0})),void 0!==r?r:""}function hp(t,e,n){var r="";const i="popup"===n?t._state.popup_custom_header:t._state.panel_custom_header,a="popup"===n?t._state.popup_custom_main:t._state.panel_custom_main;var o=bp(i,t,e),l=bp(a,t,e);return o&&(r+="<header>"+o+"</header>"),l&&(r+="<div class='main-content'>"+l+"</div>"),r}function bp(t,e,n){return t.replace(/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g,(function(t,r,i){return""==pp(e,r,n)?"":i})).replace(/\{\{(visualisation|story)\/(.*)\}\}/g,(function(t,e,n){var r=n.split("/");if(r.length<1||!["visualisation","story"].includes(e))return t;var i,a={id:r[0],w:r[1]||"100%",h:r[2]||"400px%"},l="https://flo.uri.sh/"+e+"/"+a.id+"/embed?";return(i="iframe",ut(o(i).call(document.documentElement))).attr("src",l).attr("title","Interactive or visual content").attr("class","flourish-embed-iframe").attr("frameborder","0").attr("scrolling","no").attr("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width",a.width).style("height",a.height).node().outerHTML})).replace(sp,(function(t,r){return pp(e,r,n)})).trim()}function gp(t,e){var n=t._formatters,r={};for(var i in e)if(n&&n[i])if(Array.isArray(n[i])){for(var a=[],o=0;o<n[i].length;o++){let t;t=up(e[i][o])?"":n[i][o](e[i][o]),a.push(t)}r[i]=a}else{if(up(e[i]))continue;r[i]=up(e[i])?"":n[i](e[i])}else r[i]=up(e[i])?"":e[i];return r}function _p(t,e,n){var r="",i=gp(t,e);return n&&!t._state.popup_is_custom?r+="<div class='main-content'>"+t._state.popup_teaser_default+"</div>":n||t._state.popup_is_custom?r+=hp(t,i,"popup"):r+=fp(t,i,"popup"),r}function yp(t,e){var n="",r=gp(t,e);return t._state.panel_is_custom?n+=hp(t,r,"panel"):n+=fp(t,r,"panel"),n}function mp(t){var e=t.popup._getElement(),n=e.querySelector(".flourish-popup-content");n.style.padding="0",n.style.textAlign=t._state.popup_align,n.style.color=t._state.popup_text_color,n.style.fontSize=t._state.popup_font_size+"rem",n.style.fontFamily=t._state.popup_font_family?.name||null,n.style.borderRadius=t._state.popup_radius+"rem",n.addEventListener("click",(function(){event.stopPropagation()}));var r=t.panel._getElement(),i=r.querySelector(".flourish-panel-inner"),a=r.querySelector(".flourish-panel-content"),o=Ii(t._state.panel_background);i.style.background="rgba("+o.r+","+o.g+","+o.b+","+t._state.panel_background_opacity+")",i.style.borderRadius=t._state.popup_radius+"rem",i.style.boxShadow="overlay"==t._state.panel_position&&t._state.panel_shadow?"0 0 1.5rem rgba(0,0,0,0.2)":"",i.addEventListener("click",(function(){event.stopPropagation()})),a.style.padding=t._state.panel_padding+"rem",a.style.textAlign=t._state.panel_align,a.style.color=t._state.panel_text_color,a.style.fontSize=t._state.panel_font_size+"rem",a.style.fontFamily=t._state.panel_font_family?.name||null,a.style.boxSizing="border-box";var l=e.querySelector(".flourish-popup-svg g");l.style.fill=t._state.popup_background,l.style.opacity=t._state.popup_background_opacity;var s=r.querySelector(".flourish-panel-close path");s&&(s.style.stroke=t._state.panel_text_color),0==t._state.popup_shadow?l.removeAttribute("filter"):l.setAttribute("filter","url(#dropshadow-"+t.popup.unique_id+")"),l.querySelector("rect").setAttribute("rx",t._state.popup_radius+"rem"),l.querySelector("path").style.display=t._state.popup_pointer?"block":"none",function(t){if(!document.querySelector("#popup-styles")){var e=document.createElement("style");e.id="popup-styles",document.head.appendChild(e)}var n=new Zn,r="block"==t._state.popup_header_type,i=Ii(t._state.popup_header_background||"transparent");i.opacity=t._state.popup_header_background?t._state.popup_background_opacity:0;var a=t._state.panel_position;n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events","none").style("position","absolute").style("display","overlay"!=a&&t._state.panel_shadow?"block":"none").style("top","bottom"==a?"-3rem":"top"==a?"auto":0).style("right","left"==a?"-3rem":"right"==a?"auto":0).style("bottom","top"==a?"-3rem":"bottom"==a?"auto":0).style("left","right"==a?"-3rem":"left"==a?"auto":0).style("width","left"==a||"right"==a?"3rem":"100%").style("height","top"==a||"bottom"==a?"3rem":"100%").style("z-index","-1").style("overflow","hidden"),n.select(".flourish-panel .flourish-panel-shadow:before").style("content","''").style("display","block").style("position","absolute").style("width","left"==a||"right"==a?"1.5rem":"100%").style("height","top"==a||"bottom"==a?"1.5rem":"100%").style("border-radius","50%").style("background","rgba(0,0,0,0.3)").style("bottom","bottom"==a?"-50%":"top"==a?"auto":0).style("left","left"==a?"-50%":"right"==a?"auto":0).style("top","top"==a?"-50%":"bottom"==a?"auto":0).style("right","right"==a?"-50%":"left"==a?"auto":0).style("filter","blur(15px)"),n.select(".flourish-panel-inner:focus-visible").style("outline","none !important"),n.select(".flourish-panel:focus-visible").style("outline","none !important"),n.select(".flourish-panel-close:focus").style("outline","none"),n.select(".flourish-panel-close:focus-visible").style("outline","-webkit-focus-ring-color auto 5px"),n.select(".flourish-popup").style("pointer-events","none").select(".flourish-popup-content").style("pointer-events","auto").style("max-width",null==t._state.popup_width?null:t._state.popup_width+"rem !important"),n.select(".flourish-popup header, .flourish-panel header").style("margin","0"),n.select(".flourish-popup header").style("font-weight","bold").style("color",r?t._state.popup_header_text_color:null).style("background",r?i.rgb():null).style("padding",t._state.popup_padding+"rem").style("border-radius",t._state.popup_radius+"rem "+t._state.popup_radius+"rem 0 0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-panel .flourish-panel-content-inner").style("overflow","auto"),n.select(".flourish-panel header").style("font-weight","bold").style("margin-bottom","0.5em").style("padding-right","1rem"),n.select(".flourish-popup .main-content").style("padding",t._state.popup_padding+"rem"),n.select(".flourish-popup header + .main-content").style("padding",t._state.popup_padding+"rem").style("padding-top",r?null:"0"),n.select(".flourish-popup h3, .flourish-panel h3").style("font-size","1em").style("margin","0"),n.select(".flourish-popup h3, .flourish-popup h4, .flourish-popup ul li").style("text-align",t._state.popup_align),n.select(".flourish-panel h3, .flourish-panel h4, .flourish-panel ul li").style("text-align",t._state.panel_align),n.select(".flourish-popup h4, .flourish-panel h4").style("font-size","1em").style("margin",r?"0":"0 0 0.25em").style("opacity","0.6").style("font-weight","normal"),n.select(".flourish-popup h4:empty, .flourish-panel h4:empty, .flourish-popup h3:empty, .flourish-panel h3:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display","none"),n.select(".flourish-popup p, .flourish-panel p").style("margin","0").style("font-size","inherit").style("font-weight","normal"),n.select(".flourish-popup table, .flourish-panel table").style("margin","0").style("width","100%").style("border-collapse","collapse").style("table-layout","auto"),n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top","1px solid #eee"),n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top","none"),n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em").style("vertical-align","top").style("font-size","inherit").style("text-align","start").style("font-weight","normal").style("overflow","hidden").style("text-overflow","ellipsis"),n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom","0"),n.select(".flourish-popup .data-heading").style("font-weight",t._state.popup_list_label_weight).style("display","inline-block"),n.select(".flourish-panel .data-heading").style("font-weight",t._state.panel_list_label_weight).style("display","inline-block"),n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align","end").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em"),n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom","0"),n.select(".flourish-popup ul, .flourish-panel ul").style("padding","0").style("margin","0"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-type","none"),t._state.popup_is_custom&&(console.log("is custom",t._state.popup_is_custom),n.select(".flourish-popup ul, .flourish-panel ul, .flourish-popup ol").style("padding-inline-start","1.5em").style("padding-inline-end","0.5em"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("list-style-type","disc"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style-position","outside"),n.select(".flourish-popup ol li").style("padding-inline-start","0.5em")),document.head.querySelector("#popup-styles").innerHTML=n.print()}(t)}function vp(t,e,n){var r=this;for(var i in this._state=t,this._popup_default_template=null,this._panel_default_template=null,this._title_key="name",this._subtitle_key=null,this._first_load=!0,this._on_panel_close=null,this._show_default_content_timer=null,this._panel_container=e||document.body,this._popup_container=n||document.body,this._popup_directions=["top","bottom","left","right"],this._column_names=[],this._column_names_hidden=[],this._formatters=null,this._getLockedPosition=function(){return null},lp)null==t[i]&&(t[i]=lp[i]);this.panel=(new ip).container(this._panel_container).on("close",(function(){r._state.locked_id=null,r.popup.hide(),"function"==typeof r._on_panel_close&&r._on_panel_close()})),this.popup=tf().container(this._popup_container).point(0,0).draw().hide()}function wp(t){t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="none"}function xp(t){t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="auto"}function kp(t){return t||0===t}vp.prototype.getLockedPosition=function(t){return"function"!=typeof t?console.error("Invalid function passed to @flourish/info-popup getLockedPosition"):this._getLockedPosition=t,this},vp.prototype.update=function(t){if(null!==this._state.locked_id&&"none"!=this._state.mode){var e=this._getLockedPosition(this._state.locked_id);e?this.click(e[0],e[1],this._state.locked_id,t):console.warn("@flourish/info-popup: failed to return value from getLockedPosition function")}else this.clickout()},vp.prototype.click=function(t,e,n,r){if("none"!=this._state.mode){var i="popup"==this._state.mode?"popup":"panel";this._checkIfPopupIsEmpty(e,i)?"panel"===i?this.hidePanel():this.hidePopup():(this._point(t),null!=n?(this._state.locked_id=n,xp(this)):this._state.locked_id=null,"panel"==i?(clearTimeout(this._show_default_content_timer),this.popup.hide(),this._drawPanel(e,r)):"popup"==i&&(this.panel.hide(),this._drawPopup(e,r)))}},vp.prototype.clickout=function(){this._state.locked_id=null,"both"!=this._state.mode&&"panel"!=this._state.mode||(this.popup.draw(),this.popup.hide(),"overlay"!=this._state.panel_position&&this._state.panel_side_fixed?this._showDefaultPanelContent():this.panel.hide()),"popup"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide()),"none"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide())},vp.prototype.touch=function(t,e,n,r){this.mouseover(t,e,r,!0,n)},vp.prototype.mouseover=function(t,e,n,r,i){var a="panel"==this._state.mode?"panel":"popup";if(this._checkIfPopupIsEmpty(e,a,"both"==this._state.mode))"panel"===a?this.hidePanel():this.hidePopup();else{var o=this;if("both"==this._state.mode)if(this._point(t),this._drawPopup(e,n,!0),r?xp(this):wp(this),r)o.popup._getElement().querySelector(".flourish-popup-content").onclick=function(){o.click(t,e,i,n)};if("popup"==this._state.mode){if(null!==this._state.locked_id)return;wp(this),this._point(t),this._drawPopup(e,n)}if("panel"==this._state.mode){if(null!==this._state.locked_id||"overlay"==this._state.panel_position)return;if(!this._state.panel_side_fixed)return;clearTimeout(this._show_default_content_timer),this._point(t),this._drawPanel(e,n)}}},vp.prototype.mouseout=function(){if("both"==this._state.mode&&this.popup.hide(),"popup"==this._state.mode){if(null!==this._state.locked_id)return;this.popup.hide()}if("panel"==this._state.mode){if(null!==this._state.locked_id)return;if("overlay"==this._state.panel_position||!this._state.panel_side_fixed)return;this._showDefaultPanelContent()}},vp.prototype.locked=function(){return this._state.locked_id},vp.prototype.mode=function(){return this._state.mode},vp.prototype.setColumnNames=function(t){return this._column_names=t,this},vp.prototype.hideColumnNames=function(t){return this._column_names_hidden=t,this},vp.prototype.setFormatters=function(t){var e={};for(var n in t)if("function"==typeof t[n])e[n]=t[n];else if(Array.isArray(t[n])){for(var r=[],i=0;i<t[n].length;i++){var a;a="function"==typeof t[n][i]?t[n][i]:Xn(t[n][i].output_format_id),r.push(a)}e[n]=r}else e[n]=Xn(t[n].output_format_id);return this._formatters=e,this},vp.prototype._showDefaultPanelContent=function(){var t=this;clearTimeout(this._show_default_content_timer),this._show_default_content_timer=setTimeout((function(){t.panel.html(t._state.panel_side_default_content),t._drawPanel()}),100),t._drawPanel()},vp.prototype._checkIfPopupIsEmpty=function(t,e,n){if(this._state.popup_is_custom)return""===("panel"===e?yp(this,t):_p(this,t,n)).trim();if(kp(t[this._title_key]))return!1;for(var r=Object.keys(this._column_names),i=0;i<r.length;i++){var a=r[i];if(!this._column_names_hidden.includes(a)){var o=t[a];if(Array.isArray(o)){for(let t=0;t<o.length;t++)if(kp(o[t]))return!1}else if(kp(o))return!1}}return!0},vp.prototype.getAccessiblePopupContent=function(t){return dp(this,t)},vp.prototype.onPanelClose=function(t){return this._on_panel_close=t,this},vp.prototype._drawPopup=function(t,e,n){return t&&this.popup.html(_p(this,t,n)),mp(this),this.popup.draw(),e&&e(this.popup._getElement(),t),this},vp.prototype._drawPanel=function(t,e){return mp(this),this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable("overlay"==this._state.panel_position||!this._state.panel_side_fixed),void 0===t?this.panel.draw():this.panel.html(yp(this,t)).draw(),e&&e(this.panel._getElement(),t),this},vp.prototype.hidePanel=function(){return this.panel.hide(),this},vp.prototype.hidePopup=function(){return this.popup.hide(),this},vp.prototype.popupDirections=function(t){return t?(this._popup_directions=t,this):this._popup_directions.slice()},vp.prototype.margins=function(){return this.panel.margins()},vp.prototype._getBiggestGap=function(t){var e,n,r=this._popup_container.getBoundingClientRect(),i=0,a={right:(r.width+r.left-(t.width+t.left))/r.width,bottom:(r.height+r.top-(t.height+t.top))/r.height,left:(t.left-r.left)/r.width,top:(t.top-r.top)/r.height},o={right:["left","leftFlexible","topLeft","bottomLeft","bottomFlexible","bottom","topFlexible","top","bottomRight","topRight","rightFlexible","right"],left:["right","rightFlexible","topRight","bottomRight","top","topFlexible","bottom","bottomFlexible","bottomLeft","topLeft","leftFlexible","left"],top:["bottom","bottomFlexible","bottomRight","bottomLeft","rightFlexible","leftFlexible","right","left","topRight","topLeft","topFlexible","top"],bottom:["top","topFlexible","topLeft","topRight","left","right","leftFlexible","rightFlexible","bottomLeft","bottomRight","bottomFlexible","bottom"]};for(var l in a)this._popup_directions.indexOf(l)<0||a[l]>i&&(i=a[l],e=l,n=o[l]);var s=t.left,u=t.top;return"left"==e||"right"==e?u+=.5*t.height:"bottom"==e&&(u+=t.height),"top"==e||"bottom"==e?s+=.5*t.width:"right"==e&&(s+=t.width),{side:e,arrow_directions:n,x:s,y:u}},vp.prototype._point=function(t){var e,n,r=this._popup_directions;if(Array.isArray(t))e=t[0],n=t[1];else{if(!t||!t.getBoundingClientRect)return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is",t),this;var i=t.getBoundingClientRect(),a=this._getBiggestGap(i);e=a.x,n=a.y,r=a.arrow_directions}return this.panel.point(t),this.popup.directions(r).point(e,n),this},vp.prototype.popupDefaultTemplate=function(t){return null!=t?(this._popup_default_template=t,this):this._popup_default_template},vp.prototype.panelDefaultTemplate=function(t){return null!=t?(this._panel_default_template=t,this):this._panel_default_template},vp.prototype.titleKey=function(t){return null!=t?(this._title_key=t,this):this._title_key},vp.prototype.subtitleKey=function(t){return null!=t?(this._subtitle_key=t,this):this._subtitle_key};var Mp={root:null},zp="object"==typeof global&&global&&global.Object===Object&&global,Ap="object"==typeof self&&self&&self.Object===Object&&self,Tp=zp||Ap||Function("return this")(),Cp=Tp.Symbol,Ep=Object.prototype,Sp=Ep.hasOwnProperty,Np=Ep.toString,Fp=Cp?Cp.toStringTag:void 0;var Lp=Object.prototype.toString;var Op=Cp?Cp.toStringTag:void 0;function jp(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Op&&Op in Object(t)?function(t){var e=Sp.call(t,Fp),n=t[Fp];try{t[Fp]=void 0;var r=!0}catch(t){}var i=Np.call(t);return r&&(e?t[Fp]=n:delete t[Fp]),i}(t):function(t){return Lp.call(t)}(t)}function $p(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Dp(t){if(!$p(t))return!1;var e=jp(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}var Pp,Up=Tp["__core-js_shared__"],Bp=(Pp=/[^.]+$/.exec(Up&&Up.keys&&Up.keys.IE_PROTO||""))?"Symbol(src)_1."+Pp:"";var qp=Function.prototype.toString;function Hp(t){if(null!=t){try{return qp.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var Yp=/^\[object .+?Constructor\]$/,Rp=Function.prototype,Ip=Object.prototype,Wp=Rp.toString,Vp=Ip.hasOwnProperty,Gp=RegExp("^"+Wp.call(Vp).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Xp(t){return!(!$p(t)||(e=t,Bp&&Bp in e))&&(Dp(t)?Gp:Yp).test(Hp(t));var e}function Zp(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return Xp(n)?n:void 0}var Jp=Zp(Object,"create");var Qp=Object.prototype.hasOwnProperty;var Kp=Object.prototype.hasOwnProperty;function th(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function eh(t,e){return t===e||t!=t&&e!=e}function nh(t,e){for(var n=t.length;n--;)if(eh(t[n][0],e))return n;return-1}th.prototype.clear=function(){this.__data__=Jp?Jp(null):{},this.size=0},th.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},th.prototype.get=function(t){var e=this.__data__;if(Jp){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Qp.call(e,t)?e[t]:void 0},th.prototype.has=function(t){var e=this.__data__;return Jp?void 0!==e[t]:Kp.call(e,t)},th.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Jp&&void 0===e?"__lodash_hash_undefined__":e,this};var rh=Array.prototype.splice;function ih(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}ih.prototype.clear=function(){this.__data__=[],this.size=0},ih.prototype.delete=function(t){var e=this.__data__,n=nh(e,t);return!(n<0)&&(n==e.length-1?e.pop():rh.call(e,n,1),--this.size,!0)},ih.prototype.get=function(t){var e=this.__data__,n=nh(e,t);return n<0?void 0:e[n][1]},ih.prototype.has=function(t){return nh(this.__data__,t)>-1},ih.prototype.set=function(t,e){var n=this.__data__,r=nh(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var ah=Zp(Tp,"Map");function oh(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function lh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}lh.prototype.clear=function(){this.size=0,this.__data__={hash:new th,map:new(ah||ih),string:new th}},lh.prototype.delete=function(t){var e=oh(this,t).delete(t);return this.size-=e?1:0,e},lh.prototype.get=function(t){return oh(this,t).get(t)},lh.prototype.has=function(t){return oh(this,t).has(t)},lh.prototype.set=function(t,e){var n=oh(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};function sh(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new lh;++e<n;)this.add(t[e])}function uh(t){return t!=t}function ch(t,e){return!!(null==t?0:t.length)&&function(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):function(t,e,n){for(var r=t.length,i=n+-1;++i<r;)if(e(t[i],i,t))return i;return-1}(t,uh,n)}(t,e,0)>-1}function dh(t,e){return t.has(e)}sh.prototype.add=sh.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},sh.prototype.has=function(t){return this.__data__.has(t)};var fh=Zp(Tp,"Set");function ph(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var hh=fh&&1/ph(new fh([,-0]))[1]==1/0?function(t){return new fh(t)}:function(){};function bh(t,e,n){var r=-1,i=ch,a=t.length,o=!0,l=[],s=l;if(a>=200){var u=e?null:hh(t);if(u)return ph(u);o=!1,i=dh,s=new sh}else s=e?[]:l;t:for(;++r<a;){var c=t[r],d=e?e(c):c;if(c=0!==c?c:0,o&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue t;e&&s.push(d),l.push(c)}else i(s,d,n)||(s!==l&&s.push(d),l.push(c))}return l}function gh(t){return t&&t.length?bh(t):[]}function _h(t){var e=this.__data__=new ih(t);this.size=e.size}function yh(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}_h.prototype.clear=function(){this.__data__=new ih,this.size=0},_h.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},_h.prototype.get=function(t){return this.__data__.get(t)},_h.prototype.has=function(t){return this.__data__.has(t)},_h.prototype.set=function(t,e){var n=this.__data__;if(n instanceof ih){var r=n.__data__;if(!ah||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new lh(r)}return n.set(t,e),this.size=n.size,this};function mh(t,e,n,r,i,a){var o=1&n,l=t.length,s=e.length;if(l!=s&&!(o&&s>l))return!1;var u=a.get(t),c=a.get(e);if(u&&c)return u==e&&c==t;var d=-1,f=!0,p=2&n?new sh:void 0;for(a.set(t,e),a.set(e,t);++d<l;){var h=t[d],b=e[d];if(r)var g=o?r(b,h,d,e,t,a):r(h,b,d,t,e,a);if(void 0!==g){if(g)continue;f=!1;break}if(p){if(!yh(e,(function(t,e){if(!dh(p,e)&&(h===t||i(h,t,n,r,a)))return p.push(e)}))){f=!1;break}}else if(h!==b&&!i(h,b,n,r,a)){f=!1;break}}return a.delete(t),a.delete(e),f}var vh=Tp.Uint8Array;function wh(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}var xh=Cp?Cp.prototype:void 0,kh=xh?xh.valueOf:void 0;var Mh=Array.isArray;var zh=Object.prototype.propertyIsEnumerable,Ah=Object.getOwnPropertySymbols,Th=Ah?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}(Ah(t),(function(e){return zh.call(t,e)})))}:function(){return[]};function Ch(t){return null!=t&&"object"==typeof t}function Eh(t){return Ch(t)&&"[object Arguments]"==jp(t)}var Sh=Object.prototype,Nh=Sh.hasOwnProperty,Fh=Sh.propertyIsEnumerable,Lh=Eh(function(){return arguments}())?Eh:function(t){return Ch(t)&&Nh.call(t,"callee")&&!Fh.call(t,"callee")};var Oh="object"==typeof t&&t&&!t.nodeType&&t,jh=Oh&&"object"==typeof module&&module&&!module.nodeType&&module,$h=jh&&jh.exports===Oh?Tp.Buffer:void 0,Dh=($h?$h.isBuffer:void 0)||function(){return!1},Ph=/^(?:0|[1-9]\d*)$/;function Uh(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Ph.test(t))&&t>-1&&t%1==0&&t<e}function Bh(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}var qh={};qh["[object Float32Array]"]=qh["[object Float64Array]"]=qh["[object Int8Array]"]=qh["[object Int16Array]"]=qh["[object Int32Array]"]=qh["[object Uint8Array]"]=qh["[object Uint8ClampedArray]"]=qh["[object Uint16Array]"]=qh["[object Uint32Array]"]=!0,qh["[object Arguments]"]=qh["[object Array]"]=qh["[object ArrayBuffer]"]=qh["[object Boolean]"]=qh["[object DataView]"]=qh["[object Date]"]=qh["[object Error]"]=qh["[object Function]"]=qh["[object Map]"]=qh["[object Number]"]=qh["[object Object]"]=qh["[object RegExp]"]=qh["[object Set]"]=qh["[object String]"]=qh["[object WeakMap]"]=!1;var Hh,Yh="object"==typeof t&&t&&!t.nodeType&&t,Rh=Yh&&"object"==typeof module&&module&&!module.nodeType&&module,Ih=Rh&&Rh.exports===Yh&&zp.process,Wh=function(){try{var t=Rh&&Rh.require&&Rh.require("util").types;return t||Ih&&Ih.binding&&Ih.binding("util")}catch(t){}}(),Vh=Wh&&Wh.isTypedArray,Gh=Vh?(Hh=Vh,function(t){return Hh(t)}):function(t){return Ch(t)&&Bh(t.length)&&!!qh[jp(t)]},Xh=Object.prototype.hasOwnProperty;function Zh(t,e){var n=Mh(t),r=!n&&Lh(t),i=!n&&!r&&Dh(t),a=!n&&!r&&!i&&Gh(t),o=n||r||i||a,l=o?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],s=l.length;for(var u in t)!Xh.call(t,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Uh(u,s))||l.push(u);return l}var Jh=Object.prototype;var Qh=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),Kh=Object.prototype.hasOwnProperty;function tb(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||Jh))return Qh(t);var e,n,r=[];for(var i in Object(t))Kh.call(t,i)&&"constructor"!=i&&r.push(i);return r}function eb(t){return null!=(e=t)&&Bh(e.length)&&!Dp(e)?Zh(t):tb(t);var e}function nb(t){return function(t,e,n){var r=e(t);return Mh(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,eb,Th)}var rb=Object.prototype.hasOwnProperty;var ib=Zp(Tp,"DataView"),ab=Zp(Tp,"Promise"),ob=Zp(Tp,"WeakMap"),lb="[object Map]",sb="[object Promise]",ub="[object Set]",cb="[object WeakMap]",db="[object DataView]",fb=Hp(ib),pb=Hp(ah),hb=Hp(ab),bb=Hp(fh),gb=Hp(ob),_b=jp;(ib&&_b(new ib(new ArrayBuffer(1)))!=db||ah&&_b(new ah)!=lb||ab&&_b(ab.resolve())!=sb||fh&&_b(new fh)!=ub||ob&&_b(new ob)!=cb)&&(_b=function(t){var e=jp(t),n="[object Object]"==e?t.constructor:void 0,r=n?Hp(n):"";if(r)switch(r){case fb:return db;case pb:return lb;case hb:return sb;case bb:return ub;case gb:return cb}return e});var yb="[object Arguments]",mb="[object Array]",vb="[object Object]",wb=Object.prototype.hasOwnProperty;function xb(t,e,n,r,i,a){var o=Mh(t),l=Mh(e),s=o?mb:_b(t),u=l?mb:_b(e),c=(s=s==yb?vb:s)==vb,d=(u=u==yb?vb:u)==vb,f=s==u;if(f&&Dh(t)){if(!Dh(e))return!1;o=!0,c=!1}if(f&&!c)return a||(a=new _h),o||Gh(t)?mh(t,e,n,r,i,a):function(t,e,n,r,i,a,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!a(new vh(t),new vh(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return eh(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var l=wh;case"[object Set]":var s=1&r;if(l||(l=ph),t.size!=e.size&&!s)return!1;var u=o.get(t);if(u)return u==e;r|=2,o.set(t,e);var c=mh(l(t),l(e),r,i,a,o);return o.delete(t),c;case"[object Symbol]":if(kh)return kh.call(t)==kh.call(e)}return!1}(t,e,s,n,r,i,a);if(!(1&n)){var p=c&&wb.call(t,"__wrapped__"),h=d&&wb.call(e,"__wrapped__");if(p||h){var b=p?t.value():t,g=h?e.value():e;return a||(a=new _h),i(b,g,n,r,a)}}return!!f&&(a||(a=new _h),function(t,e,n,r,i,a){var o=1&n,l=nb(t),s=l.length;if(s!=nb(e).length&&!o)return!1;for(var u=s;u--;){var c=l[u];if(!(o?c in e:rb.call(e,c)))return!1}var d=a.get(t),f=a.get(e);if(d&&f)return d==e&&f==t;var p=!0;a.set(t,e),a.set(e,t);for(var h=o;++u<s;){var b=t[c=l[u]],g=e[c];if(r)var _=o?r(g,b,c,e,t,a):r(b,g,c,t,e,a);if(!(void 0===_?b===g||i(b,g,n,r,a):_)){p=!1;break}h||(h="constructor"==c)}if(p&&!h){var y=t.constructor,m=e.constructor;y==m||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof m&&m instanceof m||(p=!1)}return a.delete(t),a.delete(e),p}(t,e,n,r,i,a))}function kb(t,e,n,r,i){return t===e||(null==t||null==e||!Ch(t)&&!Ch(e)?t!=t&&e!=e:xb(t,e,n,r,kb,i))}function Mb(t){return t==t&&!$p(t)}function zb(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function Ab(t){var e=function(t){for(var e=eb(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Mb(i)]}return e}(t);return 1==e.length&&e[0][2]?zb(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,a=i;if(null==t)return!a;for(t=Object(t);i--;){var o=n[i];if(o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++i<a;){var l=(o=n[i])[0],s=t[l],u=o[1];if(o[2]){if(void 0===s&&!(l in t))return!1}else if(!kb(u,s,3,r,new _h))return!1}return!0}(n,0,e)}}function Tb(t){return"symbol"==typeof t||Ch(t)&&"[object Symbol]"==jp(t)}var Cb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Eb=/^\w*$/;function Sb(t,e){if(Mh(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Tb(t))||(Eb.test(t)||!Cb.test(t)||null!=e&&t in Object(e))}function Nb(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Nb.Cache||lh),n}Nb.Cache=lh;var Fb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Lb=/\\(\\)?/g,Ob=function(t){var e=Nb(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Fb,(function(t,n,r,i){e.push(r?i.replace(Lb,"$1"):n||t)})),e}));var jb=Cp?Cp.prototype:void 0,$b=jb?jb.toString:void 0;function Db(t){if("string"==typeof t)return t;if(Mh(t))return function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(t,Db)+"";if(Tb(t))return $b?$b.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Pb(t,e){return Mh(t)?t:Sb(t,e)?[t]:Ob(function(t){return null==t?"":Db(t)}(t))}function Ub(t){if("string"==typeof t||Tb(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Bb(t,e){for(var n=0,r=(e=Pb(e,t)).length;null!=t&&n<r;)t=t[Ub(e[n++])];return n&&n==r?t:void 0}function qb(t,e){return null!=t&&e in Object(t)}function Hb(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=Pb(e,t)).length,a=!1;++r<i;){var o=Ub(e[r]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++r!=i?a:!!(i=null==t?0:t.length)&&Bh(i)&&Uh(o,i)&&(Mh(t)||Lh(t))}(t,e,qb)}function Yb(t,e){return Sb(t)&&Mb(e)?zb(Ub(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:Bb(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?Hb(n,t):kb(e,r,3)}}function Rb(t){return t}function Ib(t){return Sb(t)?(e=Ub(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Bb(e,t)}}(t);var e}function Wb(t,e){return t&&t.length?bh(t,"function"==typeof(n=e)?n:null==n?Rb:"object"==typeof n?Mh(n)?Yb(n[0],n[1]):Ab(n):Ib(n)):[];var n}function Vb(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Gb(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Zb)):void 0===e&&(e=Xb);for(var n,r,i,a,o,l=new Kb(t),s=[l];n=s.pop();)if((i=e(n.data))&&(o=(i=Array.from(i)).length))for(n.children=i,a=o-1;a>=0;--a)s.push(r=i[a]=new Kb(i[a])),r.parent=n,r.depth=n.depth+1;return l.eachBefore(Qb)}function Xb(t){return t.children}function Zb(t){return Array.isArray(t)?t[1]:null}function Jb(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Qb(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function Kb(t){this.data=t,this.depth=this.height=0,this.parent=null}function tg(t){for(var e,n,r=0,i=(t=function(t){for(var e,n,r=t.length;r;)n=Math.random()*r--|0,e=t[r],t[r]=t[n],t[n]=e;return t}(Array.from(t))).length,a=[];r<i;)e=t[r],n&&rg(n,e)?++r:(n=ag(a=eg(a,e)),r=0);return n}function eg(t,e){var n,r;if(ig(e,t))return[e];for(n=0;n<t.length;++n)if(ng(e,t[n])&&ig(og(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(ng(og(t[n],t[r]),e)&&ng(og(t[n],e),t[r])&&ng(og(t[r],e),t[n])&&ig(lg(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function ng(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function rg(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ig(t,e){for(var n=0;n<e.length;++n)if(!rg(t,e[n]))return!1;return!0}function ag(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return og(t[0],t[1]);case 3:return lg(t[0],t[1],t[2])}var e}function og(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,l=e.r,s=a-n,u=o-r,c=l-i,d=Math.sqrt(s*s+u*u);return{x:(n+a+s/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+l)/2}}function lg(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,l=e.y,s=e.r,u=n.x,c=n.y,d=n.r,f=r-o,p=r-u,h=i-l,b=i-c,g=s-a,_=d-a,y=r*r+i*i-a*a,m=y-o*o-l*l+s*s,v=y-u*u-c*c+d*d,w=p*h-f*b,x=(h*v-b*m)/(2*w)-r,k=(b*g-h*_)/w,M=(p*m-f*v)/(2*w)-i,z=(f*_-p*g)/w,A=k*k+z*z-1,T=2*(a+x*k+M*z),C=x*x+M*M-a*a,E=-(A?(T+Math.sqrt(T*T-4*A*C))/(2*A):C/T);return{x:r+x+k*E,y:i+M+z*E,r:E}}function sg(t,e,n){var r,i,a,o,l=t.x-e.x,s=t.y-e.y,u=l*l+s*s;u?(i=e.r+n.r,i*=i,o=t.r+n.r,i>(o*=o)?(r=(u+o-i)/(2*u),a=Math.sqrt(Math.max(0,o/u-r*r)),n.x=t.x-r*l-a*s,n.y=t.y-r*s+a*l):(r=(u+i-o)/(2*u),a=Math.sqrt(Math.max(0,i/u-r*r)),n.x=e.x+r*l-a*s,n.y=e.y+r*s+a*l)):(n.x=e.x+n.r,n.y=e.y)}function ug(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function cg(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function dg(t){this._=t,this.next=null,this.previous=null}function fg(t){if(!(i=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,n,r,i,a,o,l,s,u,c,d;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;sg(n,e,r=t[2]),e=new dg(e),n=new dg(n),r=new dg(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(l=3;l<i;++l){sg(e._,n._,r=t[l]),r=new dg(r),s=n.next,u=e.previous,c=n._.r,d=e._.r;do{if(c<=d){if(ug(s._,r._)){n=s,e.next=n,n.previous=e,--l;continue t}c+=s._.r,s=s.next}else{if(ug(u._,r._)){(e=u).next=n,n.previous=e,--l;continue t}d+=u._.r,u=u.previous}}while(s!==u.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,a=cg(e);(r=r.next)!==n;)(o=cg(r))<a&&(e=r,a=o);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=tg(e),l=0;l<i;++l)(e=t[l]).x-=r.x,e.y-=r.y;return r.r}function pg(t){if("function"!=typeof t)throw new Error;return t}function hg(){return 0}function bg(t){return function(){return t}}function gg(t){return Math.sqrt(t.value)}function _g(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function yg(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,l=t(n)*e||0;if(l)for(i=0;i<o;++i)r[i].r+=l;if(a=fg(r),l)for(i=0;i<o;++i)r[i].r-=l;n.r=a+l}}}function mg(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function vg(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function wg(t,e,n,r,i){for(var a,o=t.children,l=-1,s=o.length,u=t.value&&(r-e)/t.value;++l<s;)(a=o[l]).y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}function xg(t,e){return t.parent===e.parent?1:2}function kg(t){var e=t.children;return e?e[0]:t.t}function Mg(t){var e=t.children;return e?e[e.length-1]:t.t}function zg(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ag(t,e,n){return t.a.parent===e.parent?t.a:n}function Tg(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Cg(t,e,n,r,i){for(var a,o=t.children,l=-1,s=o.length,u=t.value&&(i-n)/t.value;++l<s;)(a=o[l]).x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}Kb.prototype=Gb.prototype={constructor:Kb,count:function(){return this.eachAfter(Vb)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,a=this,o=[a],l=[],s=-1;a=o.pop();)if(l.push(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r]);for(;a=l.pop();)t.call(e,a,++s,this);return this},eachBefore:function(t,e){for(var n,r,i=this,a=[i],o=-1;i=a.pop();)if(t.call(e,i,++o,this),n=i.children)for(r=n.length-1;r>=0;--r)a.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter((function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n}))},sort:function(t){return this.eachBefore((function(e){e.children&&e.children.sort(t)}))},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;t=n.pop(),e=r.pop();for(;t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore((function(e){e.children||t.push(e)})),t},links:function(){var t=this,e=[];return t.each((function(n){n!==t&&e.push({source:n.parent,target:n})})),e},copy:function(){return Gb(this).eachBefore(Jb)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,a=[i];do{for(t=a.reverse(),a=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n])}while(a.length)}},Tg.prototype=Object.create(Kb.prototype);var Eg=(1+Math.sqrt(5))/2;function Sg(t,e,n,r,i,a){for(var o,l,s,u,c,d,f,p,h,b,g,_=[],y=e.children,m=0,v=0,w=y.length,x=e.value;m<w;){s=i-n,u=a-r;do{c=y[v++].value}while(!c&&v<w);for(d=f=c,g=c*c*(b=Math.max(u/s,s/u)/(x*t)),h=Math.max(f/g,g/d);v<w;++v){if(c+=l=y[v].value,l<d&&(d=l),l>f&&(f=l),g=c*c*b,(p=Math.max(f/g,g/d))>h){c-=l;break}h=p}_.push(o={value:c,dice:s<u,children:y.slice(m,v)}),o.dice?wg(o,n,r,i,x?r+=u*c/x:a):Cg(o,n,r,x?n+=s*c/x:i,a),x-=c,m=v}return _}var Ng=function t(e){function n(t,n,r,i,a){Sg(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Eg);var Fg=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,l,s,u,c,d=-1,f=o.length,p=t.value;++d<f;){for(s=(l=o[d]).children,u=l.value=0,c=s.length;u<c;++u)l.value+=s[u].value;l.dice?wg(l,n,r,i,p?r+=(a-r)*l.value/p:a):Cg(l,n,r,p?n+=(i-n)*l.value/p:i,a),p-=l.value}else t._squarify=o=Sg(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Eg);let Lg={Count:t=>t.reduce(((t,e)=>t+1),0),Sum:t=>t.reduce(((t,e)=>t+(isNaN(e.value)?0:e.value)),0)};function Og(t,e){if(0===t.length||0===Bd.data.column_names.nest_columns.length)return[];let n=function(t){let e=Bd.data.column_names.nest_columns,n=Bd.data.column_names.size_columns.indexOf(tc.size_by),r=t.map((t=>{let r={};for(let n=0;n<e.length;n++)r[e[n]]=t.nest_columns[n];return r.value=n>-1?t.size_columns[n]:0,r.original_data=t,r}));return r}(t);e&&(n=function(t){var e=t.filter((t=>t.value>=0));return e.length,t.length,e}(n));Bd.data.column_names.size_columns.length>0&&0===n.filter((t=>0!==t.value&&null!==t.value)).length&&(n=[]);let r=ui(),i=Bd.data.column_names.size_columns.length>0?tc.aggregation_type:"Count";return Bd.data.column_names.nest_columns.forEach((t=>{r=r.key((e=>e[t]))})),r=r.rollup((t=>({values:t,rollup_value:Lg[i](t)}))),r=r.entries(n),r}function jg(t){let e=t.ancestors().slice(0,-1).map((t=>t.data.key)).reverse();t.id=0===t.depth?"root":t.depth+"-"+e.join("-"),t.children&&t.children.forEach((t=>{jg(t)}))}function $g(t){t.children&&(t.children.sort(((t,e)=>t.value>e.value?-1:t.value<e.value?1:0)),t.children.forEach($g))}function Dg(t){t.children&&(t.children.sort(((t,e)=>t.data.key>e.data.key?1:t.data.key<e.data.key?-1:0)),t.children.forEach(Dg))}function Pg(t){void 0!==t&&t.forEach((t=>{t.level1_key=t.ancestors()[t.depth-1].data.key,Pg(t.children)}))}function Ug(t){let e;return 0===t.length?(e=Gb({}),e.id="root",e.value=0,e.data.key="",e.data.value=0,e):(e=Gb({values:t},(t=>t.values)),e.descendants().forEach((t=>{t.data.column_name=Bd.data.column_names.nest_columns[t.depth-1]})),e.leaves().forEach((t=>{let e=t.data.value.values;1===e.length&&(t.data.unique_row=e[0].original_data),t.data.value=t.data.value.rollup_value})),e.sum((t=>t.value)),jg(e),"value"===tc.sort_by?$g(e):"name"===tc.sort_by&&Dg(e),Pg(e.children),e)}function Bg(t,e){if(!e)return null;let n=t.descendants();for(let t=0;t<n.length;t++){let r=n[t];if(r.id===e)return r}return null}function qg(t){if(!t)return null;let e=t.ancestors().slice(0,-1);return e=e.map((t=>t.data.key)),e.reverse(),e}function Hg(t,e){let n=t.ancestors(),r=!1;for(let t=0;t<n.length;t++)n[t].id===e.id&&(r=!0);return r}var Yg=Object.freeze({categorical_type:"palette",categorical_palette:["#135ae1","#2197ff","#9852d9","#f54e8b","#fa6502","#f2b90f","#058896","#09aa64","#de2c35","#a7abaf","#808080"],categorical_extend:!0,categorical_custom_palette:"",numeric_type:"sequential",sequential_palette:"FlourishBlues",sequential_custom_min:"#F5F7FF",sequential_custom_max:"#002196",sequential_color_space:"rgb",sequential_reverse:!1,sequential_custom_domain:!1,sequential_domain_min:0,sequential_domain_max:1,diverging_palette:"RdBu",diverging_custom_min:"#1AA7EE",diverging_custom_mid:"#F7F7F7",diverging_custom_max:"#FF6283",diverging_color_space:"rgb",diverging_reverse:!1,diverging_custom_domain:!1,diverging_domain_min:0,diverging_domain_mid:.5,diverging_domain_max:1,binning:!1,bin_count:4,bin_mode:"fixed",bin_thresholds:""}),Rg=360/((1+Math.sqrt(5))/2),Ig="#FF0000";function Wg(t,e,n){return function(r,i){Array.isArray(r)||(r=r?[r]:[Ig]),i=void 0!==i?i:Rg;var a=r.map((function(e){return t(e)})).filter((function(t){return!isNaN(t[e])&&!isNaN(t[n])}));a.length||(a=[t(Ig)]);var o,l=a.length,s=a.reduce((function(t,n){return t+n[e]}),0)/l,u=a.reduce((function(t,e){return t+e[n]}),0)/l,c=l;do{o=a[--c].h}while(isNaN(o)&&c>0);var d=0;return function(){var e=++d*i;return Ii(t((o+e)%360,s,u)).hex()}}}var Vg={hcl:Wg(ka,"c","l"),hsl:Wg(ia,"s","l")};function Gg(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function Xg(t){return Fc(t[t.length-1])}var Zg=Xg(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Gg)),Jg=Xg(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Gg)),Qg=Xg(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Gg)),Kg=Xg(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Gg)),t_=Xg(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Gg)),e_=Xg(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Gg)),n_=Xg(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Gg)),r_=Xg(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Gg)),i_=Xg(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Gg)),a_=Xg(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Gg)),o_=Xg(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Gg)),l_=Xg(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Gg)),s_=Xg(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Gg)),u_=Xg(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Gg)),c_=Xg(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Gg)),d_=Xg(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Gg)),f_=Xg(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Gg)),p_=Xg(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Gg)),h_=Xg(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Gg)),b_=Xg(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Gg)),g_=Xg(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Gg)),__=rd(ii(300,.5,0),ii(-240,.5,1)),y_=rd(ii(-100,.75,.35),ii(80,1.5,.8)),m_=rd(ii(260,.75,.35),ii(80,1.5,.8));function v_(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}ii();var w_=v_(Gg("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),x_=v_(Gg("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),k_=v_(Gg("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),M_=v_(Gg("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function z_(t,e){return t-e}function A_(t,e){var n=e[0],r=e[e.length-1],i=gd().domain([n,r]),a=Math.floor(t.bin_count);return i.range(sc(a)),i.thresholds()}function T_(t,e,n){var r;return r="fixed"==t.bin_mode?A_(t,e):"quantile"==t.bin_mode?function(t,e,n){var r=bd().domain(n),i=Math.floor(t.bin_count);return r.range(sc(i)),r.quantiles()}(t,0,n):function(t){return t.bin_thresholds.split(";").map(parseFloat).filter((function(t){return!isNaN(t)&&null!==t})).sort(z_)}(t),r}function C_(t,e,n,r,i){for(var a=1+e;a<=t+e;a++)i.push(r(n(a)))}function E_(t,e,n){var r=e.length,i=hd(),a=[];if(1===r)a.push(n(.5));else if(2===t.length)i.domain([1,r]).range([0,1]),C_(r,0,i,n,a);else if(2===r)a.push(n(0)),a.push(n(1));else{var o,l,s=t[1],u=function(t,e){var n;return t.forEach((function(t,r){Math.abs(t-e)<.001&&(n=r)})),n}(e,s);u?(o=u,l=r-u-1,i.domain([1,o+1]).range([0,.5]),C_(o,0,i,n,a),a.push(n(.5)),i.domain([1,l+1]).range([.5,1]),C_(l,1,i,n,a)):(o=function(t,e){var n=0;return t.forEach((function(t){t<e&&n++})),n}(e,s),l=r-o,i.domain([1,o+1]).range([0,.5]),C_(o,0,i,n,a),i.domain([1,l+1]).range([.5,1]),C_(l,1,i,n,a))}return a}function S_(t,e,n,r){var i,a=T_(t,e,n),o=function(t,e,n){var r=[];if(0===e.length)return[.5*(t+n)];r.push(.5*(t+e[0]));for(var i=0;i<e.length-1;i++)r.push(.5*(e[i]+e[i+1]));return r.push(.5*(n+e[e.length-1])),r}(e[0],a,e[e.length-1]),l=E_(e,o,r);(i="quantile"==t.bin_mode?bd().domain(n):_d().domain(a)).range(l);var s=function(t){return isNaN(t)||null===t?null:i(t)};return s.domain=Object.freeze(e),s.thresholds=Object.freeze(a),s.centers=Object.freeze(o),s}function N_(t){return Array.isArray(t)?lc(t):[0,1]}const F_=Object.freeze(["#efeca4","#e9e28f","#dccf64","#e3b23c","#e49547","#e37746","#dc5b36","#cb4144","#bb2244","#972545","#6a2c4f"]),L_=Object.freeze(["rgb(245, 247, 255)","rgb(242, 245, 254)","rgb(239, 243, 254)","rgb(237, 242, 254)","rgb(234, 240, 254)","rgb(231, 239, 254)","rgb(228, 237, 254)","rgb(225, 236, 254)","rgb(222, 234, 254)","rgb(219, 233, 254)","rgb(216, 231, 254)","rgb(213, 230, 254)","rgb(210, 228, 254)","rgb(207, 227, 254)","rgb(204, 225, 254)","rgb(200, 224, 253)","rgb(198, 222, 253)","rgb(195, 221, 253)","rgb(192, 219, 253)","rgb(189, 217, 253)","rgb(186, 216, 253)","rgb(183, 214, 253)","rgb(180, 212, 253)","rgb(177, 211, 253)","rgb(174, 209, 253)","rgb(171, 207, 253)","rgb(168, 206, 253)","rgb(165, 204, 253)","rgb(162, 202, 253)","rgb(159, 201, 253)","rgb(156, 199, 253)","rgb(152, 197, 253)","rgb(149, 195, 253)","rgb(146, 193, 253)","rgb(143, 192, 253)","rgb(140, 190, 253)","rgb(137, 188, 253)","rgb(134, 186, 253)","rgb(130, 184, 253)","rgb(127, 183, 253)","rgb(124, 181, 253)","rgb(121, 179, 253)","rgb(117, 177, 253)","rgb(114, 175, 253)","rgb(111, 173, 253)","rgb(107, 171, 253)","rgb(104, 169, 253)","rgb(100, 167, 253)","rgb(97, 165, 253)","rgb(93, 163, 253)","rgb(90, 161, 252)","rgb(87, 159, 251)","rgb(84, 157, 250)","rgb(81, 155, 248)","rgb(78, 153, 247)","rgb(75, 151, 245)","rgb(72, 149, 244)","rgb(68, 147, 243)","rgb(65, 145, 241)","rgb(61, 143, 240)","rgb(58, 141, 239)","rgb(55, 139, 237)","rgb(51, 136, 236)","rgb(48, 134, 235)","rgb(44, 132, 234)","rgb(41, 130, 233)","rgb(37, 127, 231)","rgb(32, 125, 230)","rgb(28, 123, 229)","rgb(24, 120, 228)","rgb(23, 117, 228)","rgb(21, 114, 227)","rgb(20, 111, 227)","rgb(19, 108, 226)","rgb(18, 105, 226)","rgb(17, 102, 225)","rgb(17, 99, 225)","rgb(17, 96, 225)","rgb(17, 93, 223)","rgb(16, 90, 220)","rgb(16, 88, 217)","rgb(15, 85, 214)","rgb(14, 82, 211)","rgb(13, 80, 208)","rgb(12, 77, 205)","rgb(12, 74, 202)","rgb(10, 71, 198)","rgb(9, 69, 195)","rgb(7, 66, 191)","rgb(6, 63, 187)","rgb(5, 61, 184)","rgb(4, 58, 180)","rgb(3, 55, 176)","rgb(2, 52, 172)","rgb(1, 49, 168)","rgb(1, 46, 164)","rgb(0, 43, 160)","rgb(0, 40, 157)","rgb(0, 36, 153)","rgb(0, 33, 150)"]),O_=Object.freeze(["rgb(224, 255, 236)","rgb(220, 253, 233)","rgb(216, 252, 230)","rgb(213, 251, 227)","rgb(209, 250, 225)","rgb(206, 249, 222)","rgb(202, 247, 219)","rgb(198, 246, 216)","rgb(195, 245, 213)","rgb(191, 244, 210)","rgb(187, 242, 207)","rgb(184, 241, 204)","rgb(180, 240, 201)","rgb(176, 238, 198)","rgb(173, 237, 195)","rgb(169, 236, 192)","rgb(165, 234, 188)","rgb(161, 233, 186)","rgb(157, 232, 183)","rgb(153, 230, 180)","rgb(149, 229, 178)","rgb(145, 228, 175)","rgb(141, 226, 172)","rgb(137, 225, 169)","rgb(132, 223, 167)","rgb(128, 222, 164)","rgb(123, 221, 161)","rgb(119, 219, 158)","rgb(114, 218, 156)","rgb(111, 216, 153)","rgb(107, 214, 151)","rgb(104, 212, 148)","rgb(101, 210, 146)","rgb(97, 209, 143)","rgb(94, 207, 141)","rgb(90, 205, 138)","rgb(87, 203, 136)","rgb(83, 201, 133)","rgb(79, 199, 131)","rgb(76, 198, 128)","rgb(73, 196, 126)","rgb(70, 194, 124)","rgb(66, 191, 122)","rgb(63, 189, 120)","rgb(59, 187, 118)","rgb(56, 185, 116)","rgb(52, 183, 114)","rgb(48, 181, 111)","rgb(43, 179, 109)","rgb(39, 177, 107)","rgb(37, 175, 105)","rgb(34, 172, 103)","rgb(32, 170, 100)","rgb(30, 168, 98)","rgb(27, 166, 96)","rgb(24, 163, 94)","rgb(21, 161, 92)","rgb(18, 159, 89)","rgb(14, 156, 87)","rgb(11, 154, 85)","rgb(11, 151, 82)","rgb(11, 149, 79)","rgb(11, 146, 77)","rgb(11, 144, 74)","rgb(11, 141, 72)","rgb(11, 139, 69)","rgb(11, 136, 66)","rgb(11, 134, 64)","rgb(11, 131, 61)","rgb(11, 128, 59)","rgb(10, 126, 56)","rgb(10, 123, 54)","rgb(10, 120, 51)","rgb(10, 118, 49)","rgb(9, 115, 46)","rgb(9, 112, 44)","rgb(8, 109, 41)","rgb(8, 107, 39)","rgb(7, 104, 36)","rgb(7, 101, 34)","rgb(6, 98, 31)","rgb(6, 95, 28)","rgb(5, 93, 25)","rgb(5, 90, 23)","rgb(5, 87, 21)","rgb(6, 84, 20)","rgb(6, 80, 18)","rgb(6, 77, 17)","rgb(6, 74, 15)","rgb(6, 71, 14)","rgb(5, 68, 12)","rgb(5, 65, 10)","rgb(4, 61, 8)","rgb(4, 58, 7)","rgb(3, 55, 5)","rgb(2, 52, 4)","rgb(1, 48, 2)","rgb(1, 45, 1)","rgb(0, 41, 0)","rgb(0, 38, 0)"]),j_=Object.freeze(["rgb(248, 247, 248)","rgb(245, 245, 246)","rgb(243, 243, 244)","rgb(241, 241, 242)","rgb(239, 239, 240)","rgb(237, 237, 238)","rgb(234, 235, 236)","rgb(232, 232, 234)","rgb(230, 230, 232)","rgb(228, 228, 231)","rgb(226, 226, 229)","rgb(223, 224, 227)","rgb(221, 222, 225)","rgb(219, 220, 223)","rgb(217, 218, 221)","rgb(214, 216, 219)","rgb(212, 214, 217)","rgb(210, 212, 215)","rgb(208, 210, 213)","rgb(206, 208, 211)","rgb(203, 206, 209)","rgb(201, 204, 207)","rgb(199, 202, 205)","rgb(197, 199, 202)","rgb(195, 197, 200)","rgb(192, 195, 198)","rgb(190, 193, 196)","rgb(188, 191, 194)","rgb(186, 189, 192)","rgb(184, 187, 190)","rgb(181, 184, 188)","rgb(179, 182, 186)","rgb(177, 180, 184)","rgb(175, 178, 182)","rgb(172, 175, 179)","rgb(170, 173, 177)","rgb(168, 171, 175)","rgb(166, 169, 172)","rgb(164, 166, 170)","rgb(162, 164, 168)","rgb(160, 162, 165)","rgb(157, 160, 163)","rgb(155, 157, 160)","rgb(153, 155, 158)","rgb(151, 153, 155)","rgb(149, 150, 153)","rgb(146, 148, 151)","rgb(144, 146, 148)","rgb(142, 143, 146)","rgb(140, 141, 143)","rgb(137, 138, 141)","rgb(135, 136, 138)","rgb(133, 134, 135)","rgb(131, 131, 133)","rgb(129, 129, 130)","rgb(127, 126, 127)","rgb(125, 124, 125)","rgb(122, 121, 122)","rgb(120, 119, 120)","rgb(117, 116, 117)","rgb(115, 114, 115)","rgb(112, 111, 112)","rgb(110, 109, 110)","rgb(107, 106, 107)","rgb(105, 104, 105)","rgb(102, 101, 102)","rgb(99, 98, 99)","rgb(97, 96, 97)","rgb(94, 93, 94)","rgb(92, 91, 92)","rgb(89, 88, 89)","rgb(86, 85, 86)","rgb(84, 83, 83)","rgb(81, 80, 80)","rgb(78, 77, 77)","rgb(75, 74, 74)","rgb(73, 72, 72)","rgb(70, 69, 69)","rgb(67, 66, 66)","rgb(64, 63, 63)","rgb(61, 60, 60)","rgb(58, 57, 57)","rgb(55, 54, 54)","rgb(52, 51, 51)","rgb(49, 48, 48)","rgb(45, 45, 45)","rgb(42, 42, 42)","rgb(38, 38, 38)","rgb(35, 35, 35)","rgb(32, 32, 32)","rgb(28, 28, 28)","rgb(25, 25, 25)","rgb(21, 21, 21)","rgb(17, 17, 17)","rgb(13, 13, 13)","rgb(9, 9, 9)","rgb(5, 5, 5)","rgb(2, 2, 2)","rgb(1, 1, 1)","rgb(0, 0, 0)"]),$_=Object.freeze(["rgb(254, 235, 222)","rgb(253, 232, 218)","rgb(253, 230, 215)","rgb(253, 228, 211)","rgb(253, 226, 208)","rgb(253, 224, 204)","rgb(253, 222, 201)","rgb(253, 220, 197)","rgb(253, 218, 194)","rgb(253, 216, 190)","rgb(253, 214, 187)","rgb(252, 211, 183)","rgb(252, 209, 180)","rgb(252, 207, 177)","rgb(252, 205, 173)","rgb(252, 203, 170)","rgb(252, 201, 167)","rgb(251, 198, 163)","rgb(251, 196, 160)","rgb(251, 194, 156)","rgb(251, 191, 153)","rgb(251, 189, 149)","rgb(251, 187, 146)","rgb(251, 184, 141)","rgb(252, 181, 136)","rgb(252, 179, 132)","rgb(253, 176, 127)","rgb(253, 173, 122)","rgb(253, 170, 117)","rgb(254, 168, 112)","rgb(254, 165, 107)","rgb(254, 162, 103)","rgb(254, 159, 98)","rgb(254, 156, 93)","rgb(255, 153, 88)","rgb(255, 151, 84)","rgb(255, 148, 79)","rgb(255, 144, 73)","rgb(255, 141, 68)","rgb(255, 138, 63)","rgb(255, 135, 57)","rgb(255, 132, 52)","rgb(255, 129, 46)","rgb(254, 125, 40)","rgb(253, 123, 38)","rgb(252, 121, 36)","rgb(251, 118, 34)","rgb(249, 116, 32)","rgb(248, 113, 30)","rgb(247, 111, 27)","rgb(245, 108, 25)","rgb(244, 105, 23)","rgb(242, 103, 20)","rgb(241, 100, 18)","rgb(239, 98, 15)","rgb(238, 95, 13)","rgb(236, 93, 10)","rgb(235, 90, 7)","rgb(233, 87, 4)","rgb(231, 85, 2)","rgb(230, 82, 0)","rgb(227, 80, 0)","rgb(225, 78, 0)","rgb(223, 76, 0)","rgb(220, 74, 0)","rgb(218, 72, 0)","rgb(215, 70, 0)","rgb(213, 68, 0)","rgb(210, 66, 0)","rgb(208, 65, 0)","rgb(205, 63, 0)","rgb(203, 61, 0)","rgb(200, 59, 0)","rgb(197, 58, 0)","rgb(195, 56, 0)","rgb(192, 54, 0)","rgb(189, 52, 0)","rgb(186, 50, 0)","rgb(183, 49, 0)","rgb(180, 47, 0)","rgb(177, 46, 0)","rgb(174, 45, 0)","rgb(171, 44, 0)","rgb(168, 42, 0)","rgb(164, 41, 0)","rgb(161, 40, 1)","rgb(158, 39, 1)","rgb(154, 38, 2)","rgb(151, 37, 3)","rgb(147, 36, 3)","rgb(144, 34, 4)","rgb(140, 33, 4)","rgb(137, 32, 4)","rgb(133, 31, 4)","rgb(130, 30, 5)","rgb(126, 28, 6)","rgb(123, 27, 6)","rgb(119, 26, 7)","rgb(115, 25, 7)","rgb(112, 24, 8)"]),D_=Object.freeze(["rgb(255, 245, 250)","rgb(254, 242, 249)","rgb(254, 239, 248)","rgb(254, 237, 247)","rgb(254, 234, 246)","rgb(253, 232, 245)","rgb(253, 229, 244)","rgb(253, 226, 243)","rgb(253, 224, 241)","rgb(253, 221, 240)","rgb(253, 218, 239)","rgb(253, 216, 238)","rgb(253, 213, 236)","rgb(254, 210, 235)","rgb(254, 207, 233)","rgb(254, 204, 232)","rgb(254, 201, 230)","rgb(254, 198, 229)","rgb(254, 195, 227)","rgb(254, 192, 225)","rgb(254, 189, 224)","rgb(254, 186, 222)","rgb(254, 183, 220)","rgb(254, 180, 218)","rgb(255, 177, 216)","rgb(255, 174, 214)","rgb(255, 171, 211)","rgb(254, 168, 209)","rgb(254, 165, 207)","rgb(254, 162, 204)","rgb(254, 158, 202)","rgb(254, 155, 199)","rgb(254, 152, 196)","rgb(254, 149, 194)","rgb(254, 146, 191)","rgb(253, 142, 188)","rgb(253, 139, 186)","rgb(253, 135, 183)","rgb(253, 131, 180)","rgb(253, 128, 178)","rgb(253, 124, 175)","rgb(252, 120, 172)","rgb(252, 117, 169)","rgb(252, 113, 166)","rgb(251, 109, 163)","rgb(250, 106, 160)","rgb(249, 102, 157)","rgb(248, 98, 155)","rgb(248, 94, 152)","rgb(247, 91, 149)","rgb(246, 87, 146)","rgb(244, 83, 143)","rgb(243, 79, 140)","rgb(242, 75, 137)","rgb(239, 72, 135)","rgb(237, 70, 134)","rgb(235, 67, 132)","rgb(232, 65, 130)","rgb(230, 62, 129)","rgb(227, 59, 127)","rgb(224, 56, 125)","rgb(222, 53, 124)","rgb(219, 50, 122)","rgb(217, 48, 119)","rgb(214, 46, 116)","rgb(211, 43, 113)","rgb(208, 41, 110)","rgb(205, 39, 107)","rgb(202, 36, 104)","rgb(199, 34, 101)","rgb(197, 31, 98)","rgb(194, 29, 95)","rgb(190, 26, 91)","rgb(187, 24, 88)","rgb(184, 21, 85)","rgb(181, 18, 82)","rgb(178, 15, 78)","rgb(174, 12, 75)","rgb(171, 8, 72)","rgb(168, 4, 69)","rgb(164, 2, 65)","rgb(160, 2, 62)","rgb(156, 2, 58)","rgb(152, 2, 55)","rgb(148, 1, 51)","rgb(144, 1, 48)","rgb(140, 1, 45)","rgb(136, 1, 42)","rgb(132, 1, 39)","rgb(128, 1, 36)","rgb(123, 1, 33)","rgb(119, 0, 31)","rgb(114, 0, 28)","rgb(110, 0, 26)","rgb(105, 0, 23)","rgb(101, 0, 21)","rgb(96, 0, 18)","rgb(91, 0, 16)","rgb(86, 0, 14)","rgb(82, 0, 12)"]),P_=Object.freeze(["rgb(253, 245, 254)","rgb(251, 242, 253)","rgb(250, 240, 253)","rgb(249, 238, 253)","rgb(248, 236, 253)","rgb(246, 234, 253)","rgb(245, 231, 253)","rgb(244, 229, 253)","rgb(242, 227, 253)","rgb(241, 225, 252)","rgb(240, 223, 252)","rgb(239, 220, 252)","rgb(237, 218, 252)","rgb(236, 216, 252)","rgb(235, 213, 252)","rgb(234, 211, 251)","rgb(233, 209, 251)","rgb(231, 206, 251)","rgb(230, 204, 251)","rgb(229, 202, 251)","rgb(228, 199, 250)","rgb(227, 197, 250)","rgb(225, 195, 250)","rgb(224, 192, 250)","rgb(223, 190, 250)","rgb(222, 187, 250)","rgb(221, 185, 249)","rgb(219, 182, 249)","rgb(218, 180, 249)","rgb(217, 177, 249)","rgb(216, 175, 249)","rgb(214, 172, 249)","rgb(213, 170, 249)","rgb(212, 167, 249)","rgb(211, 164, 249)","rgb(209, 162, 249)","rgb(208, 159, 249)","rgb(207, 156, 249)","rgb(206, 154, 249)","rgb(204, 151, 249)","rgb(203, 148, 249)","rgb(202, 145, 249)","rgb(200, 142, 249)","rgb(199, 140, 248)","rgb(197, 138, 247)","rgb(195, 136, 246)","rgb(193, 133, 245)","rgb(191, 131, 244)","rgb(189, 129, 242)","rgb(187, 126, 241)","rgb(185, 124, 240)","rgb(183, 122, 238)","rgb(182, 119, 237)","rgb(180, 117, 235)","rgb(178, 114, 234)","rgb(176, 112, 233)","rgb(174, 109, 231)","rgb(172, 107, 230)","rgb(170, 104, 229)","rgb(168, 102, 227)","rgb(166, 99, 226)","rgb(164, 97, 224)","rgb(162, 94, 223)","rgb(160, 91, 221)","rgb(158, 89, 220)","rgb(156, 86, 219)","rgb(154, 83, 217)","rgb(152, 81, 216)","rgb(149, 79, 213)","rgb(146, 77, 210)","rgb(143, 75, 208)","rgb(141, 73, 205)","rgb(138, 71, 202)","rgb(135, 69, 199)","rgb(132, 67, 197)","rgb(130, 65, 194)","rgb(127, 63, 191)","rgb(124, 61, 188)","rgb(122, 58, 185)","rgb(119, 56, 183)","rgb(117, 53, 180)","rgb(114, 50, 178)","rgb(112, 47, 175)","rgb(109, 44, 173)","rgb(107, 41, 170)","rgb(104, 38, 167)","rgb(102, 35, 164)","rgb(99, 32, 161)","rgb(96, 29, 157)","rgb(93, 26, 153)","rgb(90, 24, 149)","rgb(88, 22, 144)","rgb(85, 20, 139)","rgb(81, 17, 134)","rgb(78, 14, 129)","rgb(75, 12, 125)","rgb(72, 8, 120)","rgb(69, 5, 115)","rgb(66, 2, 110)","rgb(63, 0, 106)"]),U_=Object.freeze(["rgb(219, 252, 255)","rgb(215, 250, 253)","rgb(211, 249, 252)","rgb(208, 248, 251)","rgb(204, 246, 250)","rgb(200, 245, 249)","rgb(196, 244, 248)","rgb(193, 243, 247)","rgb(189, 241, 246)","rgb(185, 240, 245)","rgb(181, 239, 244)","rgb(177, 237, 243)","rgb(173, 236, 242)","rgb(169, 235, 241)","rgb(164, 234, 240)","rgb(160, 232, 239)","rgb(156, 231, 238)","rgb(152, 229, 237)","rgb(149, 228, 236)","rgb(145, 226, 234)","rgb(142, 225, 233)","rgb(138, 223, 232)","rgb(135, 221, 231)","rgb(131, 220, 230)","rgb(128, 218, 229)","rgb(124, 216, 228)","rgb(120, 215, 227)","rgb(116, 213, 226)","rgb(112, 211, 224)","rgb(110, 210, 223)","rgb(108, 208, 221)","rgb(106, 206, 219)","rgb(104, 204, 217)","rgb(102, 202, 216)","rgb(100, 200, 214)","rgb(98, 198, 212)","rgb(96, 196, 210)","rgb(93, 194, 208)","rgb(91, 192, 207)","rgb(89, 190, 205)","rgb(87, 188, 203)","rgb(85, 186, 201)","rgb(82, 184, 199)","rgb(80, 182, 197)","rgb(78, 180, 195)","rgb(75, 178, 193)","rgb(73, 176, 191)","rgb(71, 174, 189)","rgb(68, 172, 187)","rgb(66, 170, 185)","rgb(63, 168, 183)","rgb(60, 166, 180)","rgb(58, 163, 178)","rgb(55, 161, 176)","rgb(52, 159, 174)","rgb(49, 157, 172)","rgb(45, 155, 169)","rgb(42, 153, 167)","rgb(38, 151, 165)","rgb(35, 149, 163)","rgb(33, 147, 161)","rgb(30, 144, 158)","rgb(28, 142, 156)","rgb(26, 140, 154)","rgb(23, 137, 151)","rgb(20, 135, 149)","rgb(17, 133, 147)","rgb(14, 130, 144)","rgb(10, 128, 142)","rgb(8, 126, 140)","rgb(7, 123, 137)","rgb(6, 121, 135)","rgb(6, 118, 132)","rgb(5, 116, 130)","rgb(4, 113, 127)","rgb(3, 111, 125)","rgb(2, 108, 122)","rgb(2, 105, 119)","rgb(2, 103, 117)","rgb(2, 100, 114)","rgb(2, 97, 112)","rgb(2, 95, 109)","rgb(2, 92, 106)","rgb(2, 89, 103)","rgb(2, 87, 101)","rgb(2, 84, 98)","rgb(1, 81, 95)","rgb(1, 78, 92)","rgb(1, 75, 90)","rgb(0, 73, 87)","rgb(0, 70, 84)","rgb(0, 67, 81)","rgb(0, 64, 77)","rgb(0, 61, 73)","rgb(0, 58, 70)","rgb(0, 55, 66)","rgb(0, 52, 62)","rgb(0, 49, 59)","rgb(0, 46, 55)","rgb(0, 43, 51)"]),B_=Object.freeze(["rgb(255, 247, 246)","rgb(254, 244, 243)","rgb(255, 242, 240)","rgb(255, 239, 238)","rgb(255, 237, 235)","rgb(255, 235, 232)","rgb(255, 232, 229)","rgb(255, 230, 227)","rgb(255, 227, 224)","rgb(255, 225, 221)","rgb(255, 222, 218)","rgb(255, 220, 215)","rgb(255, 217, 213)","rgb(255, 215, 210)","rgb(255, 212, 207)","rgb(255, 210, 203)","rgb(255, 207, 200)","rgb(255, 204, 197)","rgb(255, 202, 194)","rgb(255, 199, 191)","rgb(255, 197, 188)","rgb(255, 194, 185)","rgb(255, 191, 182)","rgb(255, 189, 179)","rgb(255, 186, 175)","rgb(255, 183, 172)","rgb(255, 180, 169)","rgb(255, 177, 166)","rgb(255, 174, 162)","rgb(255, 171, 159)","rgb(255, 168, 156)","rgb(255, 165, 153)","rgb(255, 162, 149)","rgb(255, 159, 146)","rgb(255, 156, 143)","rgb(255, 153, 140)","rgb(255, 149, 136)","rgb(255, 146, 133)","rgb(255, 142, 130)","rgb(255, 139, 127)","rgb(255, 135, 124)","rgb(255, 132, 120)","rgb(255, 128, 117)","rgb(255, 125, 114)","rgb(254, 121, 111)","rgb(254, 117, 108)","rgb(253, 114, 105)","rgb(252, 110, 102)","rgb(252, 107, 99)","rgb(251, 103, 96)","rgb(250, 99, 93)","rgb(249, 95, 91)","rgb(248, 92, 88)","rgb(247, 88, 85)","rgb(246, 85, 82)","rgb(244, 81, 80)","rgb(242, 78, 77)","rgb(240, 75, 75)","rgb(239, 72, 72)","rgb(237, 68, 70)","rgb(235, 65, 67)","rgb(233, 61, 65)","rgb(231, 57, 62)","rgb(229, 55, 60)","rgb(226, 52, 58)","rgb(223, 49, 56)","rgb(221, 46, 53)","rgb(218, 44, 51)","rgb(215, 41, 49)","rgb(213, 38, 47)","rgb(210, 35, 45)","rgb(207, 31, 43)","rgb(204, 28, 40)","rgb(201, 26, 38)","rgb(198, 23, 36)","rgb(195, 20, 34)","rgb(191, 17, 32)","rgb(188, 14, 30)","rgb(185, 10, 27)","rgb(181, 6, 25)","rgb(178, 2, 23)","rgb(174, 1, 21)","rgb(170, 1, 18)","rgb(166, 1, 16)","rgb(162, 1, 13)","rgb(158, 1, 11)","rgb(154, 0, 8)","rgb(150, 0, 6)","rgb(146, 0, 4)","rgb(142, 0, 3)","rgb(138, 0, 2)","rgb(133, 0, 2)","rgb(129, 0, 1)","rgb(125, 0, 1)","rgb(120, 0, 0)","rgb(116, 0, 0)","rgb(111, 0, 0)","rgb(107, 0, 0)","rgb(102, 0, 0)","rgb(98, 0, 0)"]),q_=Object.freeze(["rgb(255, 249, 224)","rgb(254, 247, 218)","rgb(253, 245, 212)","rgb(252, 243, 206)","rgb(251, 241, 200)","rgb(251, 239, 194)","rgb(250, 237, 188)","rgb(250, 235, 182)","rgb(250, 233, 176)","rgb(249, 231, 170)","rgb(249, 229, 163)","rgb(249, 227, 157)","rgb(249, 225, 151)","rgb(248, 222, 145)","rgb(248, 220, 139)","rgb(247, 218, 132)","rgb(247, 216, 126)","rgb(247, 214, 120)","rgb(246, 211, 113)","rgb(246, 209, 107)","rgb(245, 207, 100)","rgb(245, 204, 93)","rgb(245, 202, 87)","rgb(244, 200, 80)","rgb(244, 197, 73)","rgb(243, 195, 68)","rgb(241, 193, 64)","rgb(240, 191, 59)","rgb(239, 189, 55)","rgb(237, 187, 50)","rgb(236, 184, 46)","rgb(234, 182, 40)","rgb(233, 180, 35)","rgb(231, 178, 29)","rgb(230, 176, 22)","rgb(229, 174, 13)","rgb(226, 172, 12)","rgb(224, 170, 12)","rgb(222, 168, 11)","rgb(219, 166, 11)","rgb(217, 164, 10)","rgb(215, 163, 9)","rgb(212, 161, 9)","rgb(210, 159, 8)","rgb(208, 157, 8)","rgb(205, 155, 7)","rgb(203, 153, 6)","rgb(200, 151, 6)","rgb(198, 150, 6)","rgb(195, 148, 6)","rgb(193, 146, 6)","rgb(190, 144, 6)","rgb(187, 142, 6)","rgb(185, 141, 5)","rgb(182, 139, 5)","rgb(180, 137, 5)","rgb(177, 135, 5)","rgb(175, 133, 5)","rgb(172, 131, 5)","rgb(170, 129, 5)","rgb(168, 127, 5)","rgb(165, 125, 5)","rgb(163, 123, 6)","rgb(160, 121, 6)","rgb(158, 119, 6)","rgb(156, 116, 6)","rgb(153, 114, 6)","rgb(150, 112, 6)","rgb(148, 110, 6)","rgb(145, 108, 6)","rgb(143, 106, 6)","rgb(140, 104, 6)","rgb(137, 102, 6)","rgb(135, 100, 6)","rgb(132, 98, 6)","rgb(129, 96, 5)","rgb(126, 94, 5)","rgb(123, 92, 4)","rgb(120, 90, 4)","rgb(117, 88, 3)","rgb(114, 86, 3)","rgb(111, 84, 2)","rgb(108, 81, 2)","rgb(105, 79, 1)","rgb(102, 77, 1)","rgb(99, 75, 1)","rgb(96, 73, 1)","rgb(93, 70, 0)","rgb(90, 68, 0)","rgb(87, 66, 0)","rgb(84, 63, 0)","rgb(81, 61, 0)","rgb(78, 58, 0)","rgb(75, 56, 0)","rgb(72, 53, 0)","rgb(69, 51, 0)","rgb(66, 48, 0)","rgb(62, 46, 0)","rgb(59, 43, 0)","rgb(56, 41, 0)"]);var H_=Object.freeze({BuGn:a_,BuPu:o_,Carrots:Fc(F_),Cool:m_,CubehelixDefault:__,FlourishBlues:Fc(L_),FlourishGreens:Fc(O_),FlourishGreys:Fc(j_),FlourishOranges:Fc($_),FlourishPinks:Fc(D_),FlourishPurples:Fc(P_),FlourishReds:Fc(B_),FlourishTeals:Fc(U_),FlourishYellows:Fc(q_),GnBu:l_,Inferno:k_,Magma:x_,OrRd:s_,Plasma:M_,PuBu:c_,PuBuGn:u_,PuRd:d_,RdPu:f_,Viridis:w_,Warm:y_,YlGn:h_,YlGnBu:p_,YlOrBr:b_,YlOrRd:g_}),Y_={hcl:ed,hsl:Kc,lab:td,rgb:Sc};function R_(t,e){var n=t.sequential_custom_domain?[t.sequential_domain_min,t.sequential_domain_max]:N_(e),r=function(e){var n=H_[t.sequential_palette]||function(t){var e=t.sequential_color_space,n=t.sequential_custom_min,r=t.sequential_custom_max;return Y_[e](n,r)}(t);return t.sequential_reverse?n(1-e):n(e)};if(t.binning)return S_(t,n,e,r);var i=md(r).domain(n),a=function(t){return isNaN(t)||null===t?null:i(t)};return a.domain=Object.freeze(n),a}var I_=Object.freeze({BrBG:Zg,PiYG:Qg,PRGn:Jg,PuOr:Kg,RdBu:t_,RdGy:e_,RdYlBu:n_,RdYlGn:r_,Spectral:i_}),W_={hcl:ed,hsl:Kc,lab:td,rgb:Sc};function V_(t){var e=t.diverging_color_space,n=t.diverging_custom_min,r=t.diverging_custom_mid,i=t.diverging_custom_max;return function(t,e){for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return a[e](t-e)}}(W_[e],[n,r,i])}var G_=function(t){var e=null;for(var n in Yg)void 0===t[n]&&(t[n]=Yg[n]);var r=null,i=function(t){return e&&e(t)||r};return{getColor:i,updateColorScale:function(n){return"number"!=typeof n[0]?e=function(t,e){var n={},r=gi(e).values(),i=t.categorical_palette,a=i.length;if(t.categorical_extend){var o=Yg.rotation_angle,l=Vg.hcl(i,o);r.forEach((function(t,e){n[t]=e<a?i[e]:l()}))}else r.forEach((function(t,e){n[t]=i[e%a]}));t.categorical_custom_palette.split("\n").filter(Boolean).forEach((function(t){var e=t.lastIndexOf(":");if(-1!==e){var r=t.slice(0,e).trim(),i=t.slice(e+1).trim();r&&i&&(n[r]=i)}}));var s=function(t){return n[t]};return s.domain=r.slice(),s.colors=r.map((function(t){return n[t]})),s.items=r.map((function(t){return{label:t,color:n[t]}})),s}(t,n):"sequential"===t.numeric_type?e=R_(t,n):"diverging"===t.numeric_type&&(e=function(t,e){var n=N_(e),r=n[0]<0&&n[1]>0?0:(n[0]+n[1])/2,i=[n[0],r,n[1]];t.diverging_custom_domain&&(i=[t.diverging_domain_min,t.diverging_domain_mid,t.diverging_domain_max]);var a=function(e){var n=I_[t.diverging_palette]||V_(t);return t.diverging_reverse?n(1-e):n(e)};if(t.binning)return S_(t,i,e,a);var o=vd(a).domain(i),l=function(t){return isNaN(t)||null===t?null:o(t)};return l.domain=Object.freeze(i),l.midpoint=t.diverging_custom_domain?t.diverging_domain_mid:r,l}(t,n)),i.thresholds=e.thresholds,i.centers=e.centers,i.midpoint=e.midpoint,i.domain=e.domain,i.colors=e.colors,i.items=e.items,this},fallback:function(t){return void 0===t?r:(r="default"===t?null:t,this)}}}(tc.color),X_=[];function Z_(t){return 180*t/Math.PI}function J_(t){return t*Math.PI/180}function Q_(t){return t&&t.getTime?t.getTime():null}function K_(){let t=tc.color.categorical_custom_palette,e=[];return t.split("\n").filter(Boolean).forEach((function(t){var n=t.lastIndexOf(":");if(-1!==n){var r=t.slice(0,n).trim();r&&e.push(r)}})),e}function ty(t){return K_().indexOf(t)>-1}function ey(t){return t.depth>1&&ty(t.data.key)}function ny(t,e){return 0===t.depth?"none":1===t.depth||ty(t.data.key)?G_.getColor(t.data.key):e?"white":G_.getColor(t.level1_key)}function ry(t){return ny(t,!0)}function iy(t){return ny(t,!1)}function ay(){return{low:16,medium:24,high:32}[tc.cellPadding]}function oy(t){return"allUpperCase"===tc.label_case||(!(!t||"bottomUpperCase"!==tc.label_case)||!t&&"topUpperCase"===tc.label_case)}function ly(t){return"allBold"===tc.label_weight||t&&"bottomBold"===tc.label_weight?"bold":t||"topBold"!==tc.label_weight?"normal":"bold"}function sy(t,e,n){let r=ja(t+"...",n||"");if(e-r-8>0)return t;let i=Math.floor(t.length*e/r);return i=Math.max(0,i-3),(t=t.slice(0,i)).length>0&&(t+="…"),t}function uy(){return Mp.root.leaves()[0].depth+1}function cy(){return Bg(Mp.root,tc.zoomed_node_id)||Mp.root}function dy(t){if(0===t.depth)return!1;if(!t.display.visible)return!1;if(null===tc.zoomed_node_id)return!0;if(!t.parent)return!1;const e=t.ancestors();for(let t=0;t<e.length;t++)if(e[t].id===tc.zoomed_node_id)return!0;return!1}function fy(t,e,n,r,i,a){let o=10*(e-2*r)/ja(t,"10px "+i+(a?" bold":"")),l=Math.max(0,n-2*r);return Math.min(o,l)}function py(t,e,n,r,i,a){let o=function(t){const e=t.split(/\s+/g);return e[e.length-1]||e.pop(),e[0]||e.shift(),e}(t),l=e&&""!==e;l&&o.push(e);let s=[],u={text:""},c=r+"px "+a;for(let t=0;t<o.length;t++){if(s.length*r>i)return[];let e=o[t];if(ja(e,c)>n)return[];if(l&&t===o.length-1)u={text:e},s.push(u);else if(""===u.text)u.text=e,s.push(u);else{let t=u.text+" "+e;ja(t,c)<=n?u.text=t:(u={text:e},s.push(u))}}return s=s.map((function(t){return t.text})),s}function hy(t,e,n,r,i,a){let o=py(t,e,n,r,i,a).length;return o>0?o*r:1/0}function by(t,e,n,r,i,a,o,l,s){let u=.5*(n+r),c=hy(t,e,i,Math.pow(2,u),a,s);return c<=a&&u>o&&(o=u),0===l?o:c<a?by(t,e,u,r,i,a,o,l-1,s):by(t,e,n,u,i,a,o,l-1,s)}function gy(t,e,n,r,i,a,o,l,s){let u=Math.max(0,n-2*i),c=Math.max(0,r-2*i);if(hy(t,e,u,o,c,s)<=c){return{lines:py(t,e,u,o,c,s),size:o}}if(a>c)return{lines:[],size:a};if(hy(t,"",u,a,c,s)>c){let e=function(t,e,n,r,i){let a=py(t,null,e,n,1/0,i);if(0===a.length)return[];let o=Math.floor(r/n);if(0===o)return[];let l=a.slice(0,o),s=l.slice(-1)[0].slice(0,-3)+"…";return l[l.length-1]=s,l}(t,u,a,c,s);if(0===e.length)e=[sy(t,u,a+"px "+s)];return{lines:e,size:a}}let d=hy(t,e,u,a,c,s)<=c?e:"",f=Math.log(a)/Math.log(2),p=by(t,d,f,Math.log(o)/Math.log(2),u,c,f,2,s),h=Math.pow(2,p);return{lines:py(t,d,u,h,c,s),size:h}}function _y(){return tc.bar_axis_labels_above?Oa(tc.bar_axis_label_size):0}function yy(t,e){let n=t/e-tc.bar_bar_padding-_y();return n=Math.min(n,tc.bar_max_bar_thickness),n=Math.max(n,tc.bar_min_bar_thickness),n}function my(t){return"never"!==t&&("editor"!==t||"editor"===Flourish.environment||"story_editor"===Flourish.environment)}function vy(t,e){const n=e?.classList?.contains("zoomout-button");if(document.activeElement.classList.contains("zoomout-button"))return;let r=cy();e&&!n&&(r=e);let i="bar"===tc.hierarchy_layout?"rect":".node";document.activeElement?.blur();let a=!0;null===tc.zoomed_node_id&&r.depth>tc.num_of_visible_levels&&(a=!1),!1===r.display?.visible&&(a=!1),null===tc.zoomed_node_id&&"root"===r.id&&(a=!1),n&&(a=!1);let o=null;if(a)o=r;else if("zoomOut"!==t||n){if("zoomIn"===t||n){let t=r.children?.find((t=>!0===t.display.visible));!t&&r.children&&(t=r.children[0].children.find((t=>!0===t.display.visible))),t||console.error("https://open.spotify.com/track/5cxnSTLzGD1t9xcdmJYFVB?si=25437ee5bc19400f"),o=t}}else o=r.parent;o&&function(t){return"string"==typeof t?new lt([document.querySelectorAll(t)],[document.documentElement]):new lt([null==t?[]:t],ot)}(i).filter((t=>t?.id===o.id)).node()?.focus()}const wy=Gn(tc.size_by_number_formatter),xy=Gn(tc.filter_number_formatter);let ky,My,zy,Ay,Ty=t=>t,Cy=t=>t;function Ey(){!function(){let t=Bd.data.column_names.size_columns.indexOf(tc.size_by);if(-1===t)return;let e=Bd.data.metadata.size_columns;Ty=wy(e[t].output_format_id)}(),function(){let t=Bd.data.metadata.filter;if(void 0===t)return;let e=t.output_format_id;switch(t.type){case"datetime":Cy=Xn(e);break;case"number":Cy=xy(e);break;default:Cy=t=>t}}()}function Sy(){let t=Bd.data.metadata.filter;return void 0===t?[]:Wb(Bd.data.map((function(t){return t.filter})),"datetime"===t.type?Q_:t=>t)}function Ny(t){return tc.filter_include_all?[tc.filter_all_label].concat(t):t}function Fy(){zy="filter"in Bd.data.column_names;let t=zy&&my(tc.filter_control_visibility);if(ww.visible(t),ky&&!zy&&(ww.remove(),ky=!1,tc.filter=null),!zy)return;ky||(Ew.add([ww]),ww.on("change",(function(t){tc.filter=t,tc.zoomed_node_id=null,iw()})),ky=!0);let e=Sy(),n=Ny(e);var r;ww.options(n).format(Cy,tc.filter_include_all?[tc.filter_all_label]:[]).value(tc.filter),ww.update(),function(t){let e=t.map(Cy);return t.length===gh(e).length}(e)||(r="Two or more filter values result in the same formatted value.",Flourish.warn?Flourish.warn(r):console.warn(r))}function Ly(){Ay=Bd.data.column_names.size_columns.length>1;let t=Ay&&my(tc.size_by_control_visibility);if(xw.visible(t),My&&!Ay&&(xw.remove(),My=!1),!Ay)return;let e=Bd.data.column_names.size_columns.map((t=>t));My||(Ew.add([xw]),xw.on("change",(function(t){tc.size_by=t,iw()})),My=!0),xw.options(e).value(tc.size_by).update()}const Oy={x:10,y:10},jy={x:10,y:10},$y=40,Dy=.2,Py="#ffffff",Uy="#333333",By=10;var qy,Hy,Yy,Ry,Iy,Wy,Vy,Gy,Xy,Zy;const Jy=Qy("(prefers-reduced-motion: reduce)");function Qy(t){if("function"!=typeof window.matchMedia)return()=>!1;const e=window.matchMedia(t);let n=e.matches;return e.addEventListener("change",(t=>{n=t.matches}),!1),function(){return n}}function Ky(t){let e=t.id||t.data.id;t.display&&!1===t.display.visible||Rv||"root"===e||(!function(t,e){let n=Bg(Mp.root,e.id);if(!vw(n))return;let r=gw(n),i=fw(n);sw.locked()||sw.setColumnNames(r.column_names).setFormatters(r.formatters);sw.mouseover(i,r.datum)}(0,t),"popup"!==tc.popup.mode&&"both"!==tc.popup.mode||dw(t.id),sw.locked()||lw("updateHighlightedNode",e))}function tm(t){var e;t.display&&!1===t.display.visible||Rv||(e=Q.relatedTarget,uw.contains(e)||(sw.mouseout(),sw.locked()||(dw(null),lw("updateHighlightedNode",null))))}function em(t){t.display&&!1===t.display.visible||Rv||(Q.stopPropagation(),ut(t).node()!==cy()&&0!==t.height&&lw("zoomToNode",t))}function nm(t){t.display&&!1===t.display.visible||Rv||("both"===tc.popup.mode&&" "===Q.key?mw():"Enter"===Q.key||" "===Q.key?em(t):"Escape"===Q.key&&lw("zoomOut",{node:Q.target.__data__}))}function rm(){ut(this).on("mouseover",Ky).on("mouseout",tm).on("focus",Ky).on("focusout",tm).on("click",em).on("keydown",nm)}Qy("(prefers-color-scheme: dark)");var im={treemapBinary:function(t,e,n,r,i){var a,o,l=t.children,s=l.length,u=new Array(s+1);for(u[0]=o=a=0;a<s;++a)u[a+1]=o+=l[a].value;!function t(e,n,r,i,a,o,s){if(e>=n-1){var c=l[e];return c.x0=i,c.y0=a,c.x1=o,void(c.y1=s)}var d=u[e],f=r/2+d,p=e+1,h=n-1;for(;p<h;){var b=p+h>>>1;u[b]<f?p=b+1:h=b}f-u[p-1]<u[p]-f&&e+1<p&&--p;var g=u[p]-d,_=r-g;if(o-i>s-a){var y=r?(i*_+o*g)/r:o;t(e,p,g,i,a,y,s),t(p,n,_,y,a,o,s)}else{var m=r?(a*_+s*g)/r:s;t(e,p,g,i,a,o,m),t(p,n,_,i,m,o,s)}}(0,s,t.value,e,n,r,i)},treemapResquarify:Fg,treemapSlice:Cg,treemapDice:wg,treemapSliceDice:function(t,e,n,r,i){(1&t.depth?Cg:wg)(t,e,n,r,i)}},am=function(){var t=Ng,e=!1,n=1,r=1,i=[0],a=hg,o=hg,l=hg,s=hg,u=hg;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(d),i=[0],e&&t.eachBefore(vg),t}function d(e){var n=i[e.depth],r=e.x0+n,c=e.y0+n,d=e.x1-n,f=e.y1-n;d<r&&(r=d=(r+d)/2),f<c&&(c=f=(c+f)/2),e.x0=r,e.y0=c,e.x1=d,e.y1=f,e.children&&(n=i[e.depth+1]=a(e)/2,r+=u(e)-n,c+=o(e)-n,(d-=l(e)-n)<r&&(r=d=(r+d)/2),(f-=s(e)-n)<c&&(c=f=(c+f)/2),t(e,r,c,d,f))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],r=+t[1],c):[n,r]},c.tile=function(e){return arguments.length?(t=pg(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(a="function"==typeof t?t:bg(+t),c):a},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:bg(+t),c):o},c.paddingRight=function(t){return arguments.length?(l="function"==typeof t?t:bg(+t),c):l},c.paddingBottom=function(t){return arguments.length?(s="function"==typeof t?t:bg(+t),c):s},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:bg(+t),c):u},c}();function om(t,e,n){t.display.x0=e(t.x0),t.display.x1=e(t.x1),t.display.y0=n(t.y0),t.display.y1=n(t.y1),void 0!==t.children&&t.children.forEach((t=>{om(t,e,n)}))}function lm(t,e,n){t.children.forEach((t=>{t.display.x0=e(t.display.x0),t.display.x1=e(t.display.x1),t.display.y0=n(t.display.y0),t.display.y1=n(t.display.y1),t.display.x1<t.display.x0&&(t.display.x1=t.display.x0),t.display.y1<t.display.y0&&(t.display.y1=t.display.y0),t.children&&lm(t,e,n)}))}function sm(t,e){if(!t.children)return;lm(t,hd().domain([t.display.x0,t.display.x1]).range([t.display.x0+e,t.display.x1-e]),hd().domain([t.display.y0,t.display.y1]).range([t.display.y0+e,t.display.y1-e])),t.children.forEach((t=>{sm(t,e)}))}function um(t,e){if(t.display.top_label="",!1===t.display.visible_leaf&&0!==t.depth){let r=ay(),i=t.display.x1-t.display.x0-2*r,a=t.data.key,o="'"+tc.layout.body_font.name+"'";if(tc.zoomed_node_id&&tc.zoomed_node_id===t.id){var n=qg(t);a=n?n.join(" | "):""}oy(!1)&&(a=a.toUpperCase()),t.display.top_label=sy(a,i,"10px "+o),t.display.top_label_font_size=11;let l=.5*(r-16),s=t.display.x1-t.display.x0,u=4+l;t.display.top_label_x=Ku?s-u:u,t.display.top_label_y=12+l,t.display.top_label_opacity=t.depth<e.depth?0:1}t.display.top_label_weight=ly(!1),t.children&&t.children.forEach((t=>{um(t,e)}))}function cm(t){let e=t.display.x1-t.display.x0,n=t.display.y1-t.display.y0,r=Oa(tc.min_label_size),i=Oa(tc.max_label_size),a=t.data.key,o="'"+tc.layout.body_font.name+"'";if(t.display.multi_line_label=!1,t.display.multi_line_center_label_lines=[],t.display.visible&&t.display.visible_leaf){oy(!0)&&(a=a.toUpperCase());let l=tc.show_value_labels?Ty(t.value):"";if(tc.multi_line_labels||0===tc.size_by_number_formatter.prefix.indexOf(":")||(l=" "+l),tc.multi_line_labels){t.display.multi_line_label=!0;let s=gy(a,l,e,n,Oa(tc.label_padding),r,i,0,o),u=-.5*s.lines.length*s.size;t.display.multi_line_center_label_lines=s.lines.map(((t,e)=>{let n=s.size,r=ly(!0),i=u+(e+.8)*n;if(tc.show_value_labels&&e===s.lines.length-1){n*=tc.value_label_relative_size,r=tc.value_label_bold?"bold":"normal";let t=3;i-=.8*(s.size-n)-t}return{text:t,size:n,weight:r,line_offset:i}}))}else if(r>n)t.display.center_label_text="",t.display.value_text="",t.display.center_label_font_size=0;else{let i=!0,s=fy(a+l,e,n,Oa(tc.label_padding),o);s=Math.min(Oa(tc.max_label_size),s),s<r&&(i=!1,s=fy(a,e,n,Oa(tc.label_padding),o),s=Math.min(Oa(tc.max_label_size),s),s<r&&(a=sy(a,e,r+"px "+o))),t.display.center_label_text=a,t.display.center_value_text=i?l:null,t.display.center_label_font_size=s,t.display.center_label_weight=ly(!0)}}t.display.center_label_x=.5*e,t.display.center_label_y=.5*n,t.children&&t.children.forEach((t=>{cm(t)}))}function dm(t,e,n){let r=[Math.max(e-2,0),Math.max(n-2,0)],i=ay(),a=Math.min(r[0],r[1]);i=Math.min(i,.5*a);var o=im[tc.treemap_type];"treemapResquarify"==tc.treemap_type&&(o=o.ratio(tc.treemap_ratio)),am.size(r).tile(o),am(t);let l=hd(),s=hd();l.domain([0,r[0]]).range([0,r[0]]),s.domain([0,r[1]]).range([0,r[1]]);var u=cy();if("root"!==u.id){if(!u)return lw("zoomOut");l.domain([u.x0,u.x1]),s.domain([u.y0,u.y1])}else l.domain([i,r[0]-i]),s.domain([i,r[1]-i]);om(t,l,s),sm(u||t,i),um(t,u),cm(t)}let fm=null;function pm(t){fm=t}function hm(t){if(null!=tc.label_color)return tc.label_color;var e=iy(t),n="sunburst"===tc.hierarchy_layout?1-tc.sunburst_depth_fade:Dy,r=Math.min(tc.num_of_visible_levels,t.depth+t.height)-1,i=Sc("white",e)(Math.pow(1-n,r));return"none"===e||co(i)?Uy:Py}function bm(t,e){ut(this).style("fill",ry).style("stroke",tc.stroke_color||tc.layout.background_color).style("display",t.display.visible?"inline":"none").style("cursor",t.children&&tc.zoomed_node_id!==t.id?"pointer":"default").transition().duration(e).attr("width",t.display.x1-t.display.x0).attr("height",t.display.y1-t.display.y0)}function gm(t,e){t.display.visible&&!0===t.display.visible_leaf&&(ut(this).attr("dy","0.33em").text(t.display.center_label_text).style("font-weight",t.display.center_label_weight).transition("font-size").duration(e).style("font-size",t.display.center_label_font_size+"px"),ut(this).append("tspan").style("font-weight",tc.value_label_bold?"bold":"normal").style("font-size",tc.value_label_relative_size+"em").text(t.display.center_value_text)),ut(this).transition().duration(e).style("opacity",!0!==t.display.visible||!0!==t.display.visible_leaf||t.display.multi_line_label?0:1).attr("x",t.display.center_label_x).attr("y",t.display.center_label_y)}function _m(t,e){let n=t.display.multi_line_center_label_lines;if(ut(this).transition("label-center").duration(e).attr("transform","translate("+t.display.center_label_x+","+t.display.center_label_y+")"),JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((t=>t.text))))return ut(this).transition("center-label").duration(e).style("opacity",!0===t.display.visible&&!0===t.display.visible_leaf&&t.display.multi_line_label?1:0),void ut(this).selectAll("tspan").data(n).transition("center-label").duration(e).style("font-weight",(t=>t.weight)).style("font-size",(t=>t.size+"px")).attr("y",(t=>t.line_offset));ut(this).transition("center-label").duration(.5*e).style("opacity",0).on("end",(function(){ut(this).transition("center-label").duration(.5*e).style("opacity",!0===t.display.visible&&!0===t.display.visible_leaf&&t.display.multi_line_label?1:0);var r=ut(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(t){return t.text})).transition("center-label").duration(0).style("font-size",(t=>t.size+"px")).style("font-weight",(t=>t.weight)).attr("x",0).attr("y",(t=>t.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((t=>t.text))}))}function ym(t,e){0!==t.depth&&(ut(this).style("display",!0===t.display.visible&&!1===t.display.visible_leaf?"inline":"none").style("fill",hm).style("font-weight",t.display.top_label_weight).transition().duration(e).style("opacity",t.display.top_label_opacity),!1===t.display.visible_leaf&&ut(this).attr("x",t.display.top_label_x).attr("y",t.display.top_label_y).style("font-size",t.display.top_label_font_size+"px").text(t.display.top_label))}function mm(){Iy.selectAll("g").select("rect").style("opacity",(t=>{if(!1===t.display.visible)return 0;var e=ey(t);let n=e||1==t.depth?1:Dy,r=1==t.depth||e?.8:2;return n*(t.id===fm?r:1)}))}function vm(t,e,n){let r=!1===t||Jy()?0:1e3*tc.animation_duration;if(Iy.transition().duration(r).style("opacity","treemap"===tc.hierarchy_layout?1:0).on("end",(function(){"treemap"!==tc.hierarchy_layout&&Iy.selectAll("g").remove()})),"treemap"!==tc.hierarchy_layout)return;dm(Mp.root,e,n);let i=Iy.selectAll("g").data(Mp.root.descendants(),(t=>t.id)),a=i.enter().append("g").attr("class",(t=>window.Flourish.cypress?t.id:null)).classed("node",!0).attr("tabindex",(t=>dy(t)?"0":"-1")).attr("aria-label",_w).attr("transform",(t=>"translate("+[t.display.x0,t.display.y0]+")"));a.append("rect").attr("width",(t=>t.display.x1-t.display.x0)).attr("height",(t=>t.display.y1-t.display.y0)).style("stroke-width",1),a.append("text").classed("text-center",!0).attr("x",(t=>t.display.center_label_x)).attr("y",(t=>t.display.center_label_y)).style("pointer-events","none").style("font-size","0px").style("font-weight","normal").attr("tabindex",-1).style("text-anchor","middle"),a.append("text").classed("text-center-multiline",!0).attr("transform",(t=>"translate("+t.display.center_label_x+","+t.display.center_label_y+")")).style("pointer-events","none").style("font-weight","normal").attr("tabindex",-1).style("text-anchor","middle"),a.append("text").classed("text-top",!0).style("pointer-events","none").attr("tabindex",-1).style("font-size","11px"),a.merge(i).transition().duration(r).attr("transform",(function(t){return"translate("+[t.display.x0,t.display.y0]+")"})).attr("tabindex",(t=>dy(t)?"0":"-1")).attr("aria-label",_w),a.each(rm),a.merge(i).style("pointer-events",(function(t){return t.display.visible?"all":"none"})).select("rect").each((function(t){bm.call(this,t,r)})),a.merge(i).select("text.text-center").style("fill",hm).each((function(t){gm.call(this,t,r)})),a.merge(i).select("text.text-center-multiline").style("fill",hm).each((function(t){_m.call(this,t,r)})),a.merge(i).select("text.text-top").each((function(t){ym.call(this,t,r)})),i.exit().remove(),mm()}function wm(){ut(this).on("mouseover",Ky).on("mouseout",tm).on("keydown",nm).on("focus",Ky).on("focusout",tm).on("click",(t=>{if(t.display.visible&&!Rv){if(Q.stopPropagation(),0===t.height){let e=cy(),n=t.path(e);if(!(n.length>2))return;lw("zoomToNode",n[n.length-2])}lw("zoomToNode",t)}}))}var xm=function(){var t=null,e=1,n=1,r=hg;function i(i){return i.x=e/2,i.y=n/2,t?i.eachBefore(_g(t)).eachAfter(yg(r,.5)).eachBefore(mg(1)):i.eachBefore(_g(gg)).eachAfter(yg(hg,1)).eachAfter(yg(r,i.r/Math.min(e,n))).eachBefore(mg(Math.min(e,n)/(2*i.r))),i}return i.radius=function(e){return arguments.length?(t=function(t){return null==t?null:pg(t)}(e),i):t},i.size=function(t){return arguments.length?(e=+t[0],n=+t[1],i):[e,n]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:bg(+t),i):r},i}();function km(t,e,n,r){t.display.x=e(t.x),t.display.y=n(t.y),t.display.r=r(t.r),void 0!==t.children&&t.children.forEach((t=>{km(t,e,n,r)}))}function Mm(t){let e,n=Math.max(t.display.r-By,0);if(t.children)if(t.display.visible_leaf||!t.display.visible)e=!1;else if(t.display.r<30)e=!1;else if(1===t.children.length){e=t.display.r-t.children[0].display.r>10,e&&(n=.5*(t.display.r+t.children[0].display.r)-3),t.children[0].display.visible_leaf&&(e=!0)}else{let n=hc(t.children.map((t=>t.display.r)));t.display.max_child_r=n,e=t.display.r-n>10}else e=!1;t.display.enough_space_for_top_label=e,t.display.top_label_path_r=n,t.children&&t.children.forEach((t=>{Mm(t)}))}function zm(t){let e;if(t.display.top_label_visible=t.display.visible,0===t.depth)e="";else if(0===t.height)e="";else if(t.display.visible_leaf)e="";else if(t.display.visible)if(tc.zoomed_node_id&&t.depth<cy().depth)e="";else if(t.display.enough_space_for_top_label)if(tc.zoomed_node_id===t.id){e=qg(t).join(" > ")}else{let n=function(t){let e=t.ancestors().slice(1,-1),n=[];for(let t=0;t<e.length;t++){let r=e[t];if(r.display.enough_space_for_top_label)break;n.push(r)}return n}(t);if(n.reverse(),n.length>0){e=n.map((t=>t.data.key)).join(" > ")+" > "+t.data.key}else e=t.data.key}else e="";else e="";let n=sy(e,Math.PI*t.display.r);oy(!1)&&(n=n.toUpperCase()),t.display.top_label_text=n,""===n&&(t.display.top_label_visible=!1),t.display.top_label_weight=ly(!1),t.children&&t.children.forEach((t=>{zm(t)}))}function Am(t){let e=t.display.r,n=2.2*Math.sqrt(e*e/2),r="'"+tc.layout.body_font.name+"'",i=Oa(tc.min_label_size),a=Oa(tc.max_label_size),o=t.data.key;if(t.display.multi_line_label=!1,t.display.multi_line_center_label_lines=[],t.display.visible&&t.display.visible_leaf){oy(!0)&&(o=o.toUpperCase());let l=tc.show_value_labels?Ty(t.value):"";if(tc.multi_line_labels||0===tc.size_by_number_formatter.prefix.indexOf(":")||(l=" "+l),tc.multi_line_labels){t.display.multi_line_label=!0;let e=gy(o,l,n,n,Oa(tc.label_padding),i,a,0,r),s=-.5*e.lines.length*e.size;t.display.multi_line_center_label_lines=e.lines.map(((t,n)=>{let r=e.size,i=ly(!0),a=s+(n+.8)*r;if(tc.show_value_labels&&n===e.lines.length-1){r*=tc.value_label_relative_size,i=tc.value_label_bold?"bold":"normal";let t=3;a-=.8*(e.size-r)-t}return{text:t,size:r,weight:i,line_offset:a}}))}else if(i>2*e)t.display.center_label_text="",t.display.value_text="",t.display.center_label_font_size=0;else{let n=!0,a=fy(o+l,2*e,2*e,Oa(tc.label_padding),r);a=Math.min(Oa(tc.max_label_size),a),a<i&&(n=!1,a=fy(o,2*e,2*e,Oa(tc.label_padding),r),a=Math.min(Oa(tc.max_label_size),a),a<i&&(o=sy(o,2*e,i+"px "+r))),t.display.center_label_text=o,t.display.center_value_text=n?l:null,t.display.center_label_font_size=a,t.display.center_label_weight=ly(!0)}}t.children&&t.children.forEach((t=>{Am(t)}))}function Tm(t,e,n){let r=e-2*Oy.x,i=n-2*Oy.y;r=Math.max(0,r),i=Math.max(0,i);let a=Math.min(4,Math.min(r,i));xm.size([r,i]).padding(a),xm(t),"root"===t.id&&0===t.height&&(t.r=0);let o=hd(),l=hd(),s=hd();o.domain([0,r]).range([0,r]),l.domain([0,i]).range([0,i]);var u=cy();if("root"!==u.id){if(!u)return lw("zoomOut");let t,e;r>i?(e=2*u.r,t=e*(r/i),s.range([0,i/e])):(t=2*u.r,e=t*(i/r),s.range([0,r/t]));let n=u.x-.5*t,a=u.x+.5*t,c=u.y-.5*e,d=u.y+.5*e;o.domain([n,a]),l.domain([c,d])}km(t,o,l,s),Mm(t),zm(t),Am(t)}function Cm(t,e){ut(this).style("fill",ry).style("display",t.display.visible?"inline":"none").style("cursor",t.children&&tc.zoomed_node_id!==t.id?"pointer":"default").transition().duration(e).attr("r",t.display.r)}function Em(t,e){t.display.visible&&!0===t.display.visible_leaf&&(ut(this).attr("dy","0.33em").text(t.display.center_label_text).style("fill",hm).style("font-weight",t.display.center_label_weight).transition("font-size").duration(e).style("font-size",t.display.center_label_font_size+"px"),ut(this).append("tspan").style("font-weight",tc.value_label_bold?"bold":"normal").style("font-size",tc.value_label_relative_size+"em").text(t.display.center_value_text)),ut(this).transition().duration(e).style("opacity",!0===t.display.visible&&!0===t.display.visible_leaf?1:0)}function Sm(t,e){let n=t.display.multi_line_center_label_lines;if(JSON.stringify(this.__current_multi_lines)===JSON.stringify(n.map((t=>t.text))))return ut(this).transition("center-label").duration(e).style("opacity",!0===t.display.visible&&!0===t.display.visible_leaf&&t.display.multi_line_label?1:0),void ut(this).selectAll("tspan").data(n).transition("center-label").duration(e).style("font-weight",(t=>t.weight)).style("font-size",(t=>t.size+"px")).attr("y",(t=>t.line_offset));ut(this).transition("center-label").duration(.5*e).style("opacity",0).on("end",(function(){ut(this).transition("center-label").duration(.5*e).style("opacity",!0===t.display.visible&&!0===t.display.visible_leaf&&t.display.multi_line_label?1:0);var r=ut(this).selectAll("tspan").data(n);r.enter().append("tspan").merge(r).text((function(t){return t.text})).transition("center-label").duration(0).style("font-size",(t=>t.size+"px")).style("font-weight",(t=>t.weight)).attr("x",0).attr("y",(t=>t.line_offset)),r.exit().remove(),this.__current_multi_lines=n.map((t=>t.text))}))}function Nm(t,e){if(0===t.depth)return;let n=t.display.top_label_path_r;ut(this).transition().duration(e).attr("d",`M-0.5,${n} A${n},${n} 0 1,1 0.5,${n}`)}const Fm=hd().domain([30,60]).range([-.1,0]).clamp(!0);function Lm(t,e){0!==t.depth&&(ut(this).transition().duration(e).style("opacity",!0===t.display.top_label_visible?1:0),!1===t.display.visible_leaf&&ut(this).select("textPath").style("fill",hm).style("font-weight",(t=>t.display.top_label_weight)).style("letter-spacing",(t=>Fm(t.display.r)+"em")).text(t.display.top_label_text))}function Om(){Wy.selectAll("g").select("circle").style("opacity",(t=>{if(!1===t.display.visible)return 0;var e=ey(t);let n=e||1==t.depth?1:.2,r=1==t.depth||e?.8:2;return n*(t.id===fm?r:1)}))}function jm(t,e,n){let r=!1===t||Jy()?0:1e3*tc.animation_duration;if(Wy.transition().duration(r).style("opacity","circlePacking"===tc.hierarchy_layout?1:0).on("end",(function(){"circlePacking"!==tc.hierarchy_layout&&Wy.selectAll("g").remove()})),"circlePacking"!==tc.hierarchy_layout)return;Tm(Mp.root,e,n);let i=Wy.selectAll("g").data(Mp.root.descendants(),(t=>t.id)),a=i.enter().append("g").attr("transform",(function(t){return"translate("+[t.display.x,t.display.y]+")"})).attr("tabindex",(t=>dy(t)?"0":"-1")).attr("aria-label",_w).classed("node",!0);a.append("circle"),a.append("text").classed("text-center",!0).style("font-weight","normal").style("text-anchor","middle").style("font-size","0px").style("pointer-events","none"),a.append("text").classed("text-center-multiline",!0).attr("tabindex",-1).style("pointer-events","none").style("font-weight","normal").style("text-anchor","middle"),a.append("path").classed("label-path",!0).attr("id",(t=>"pack-label-path-"+t.id)).attr("d",(()=>{let t=-By;return`M-0.5,${t} A${t},${t} 0 1,1 0.5,${t}`})).style("fill","none"),a.append("text").classed("text-top",!0).style("opacity",0).append("textPath").attr("href",(t=>"#pack-label-path-"+t.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none").style("font-weight","bold").style("font-size","11px"),a.merge(i).transition().duration(r).attr("tabindex",(t=>{const e=function(t){if(null===tc.zoomed_node_id)return dy(t);const e=cy().find((e=>e.id===t.parent?.id));return Boolean(e)}(t);return e?"0":"-1"})).attr("transform",(function(t){return"translate("+[t.display.x,t.display.y]+")"})),a.each(wm),a.merge(i).select("circle").each((function(t){Cm.call(this,t,r)})),a.merge(i).select("text.text-center").attr("tabindex",-1).each((function(t){Em.call(this,t,r)})),a.merge(i).select("text.text-center-multiline").style("fill",hm).each((function(t){Sm.call(this,t,r)})),a.merge(i).select("path.label-path").each((function(t){Nm.call(this,t,r)})),a.merge(i).select("text.text-top").attr("tabindex",-1).each((function(t){Lm.call(this,t,r)})),i.exit().remove(),Om()}function $m(){ut(this).on("mouseover",Ky).on("mouseout",tm).on("focus",Ky).on("focusout",tm).on("click",em).on("keydown",nm)}var Dm=function(){var t=1,e=1,n=0,r=!1;function i(i){var a=i.height+1;return i.x0=i.y0=n,i.x1=t,i.y1=e/a,i.eachBefore(function(t,e){return function(r){r.children&&wg(r,r.x0,t*(r.depth+1)/e,r.x1,t*(r.depth+2)/e);var i=r.x0,a=r.y0,o=r.x1-n,l=r.y1-n;o<i&&(i=o=(i+o)/2),l<a&&(a=l=(a+l)/2),r.x0=i,r.y0=a,r.x1=o,r.y1=l}}(e,a)),r&&i.eachBefore(vg),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(n){return arguments.length?(t=+n[0],e=+n[1],i):[t,e]},i.padding=function(t){return arguments.length?(n=+t,i):n},i}();function Pm(t,e){t.display=t.display||{},t.display.isTopVisibleLevel=t.depth===e,t.display.opacity=Math.pow(tc.sunburst_depth_fade,t.depth-1),void 0!==t.children&&t.children.forEach((t=>{Pm(t,e)}))}function Um(t,e){e&&e.id===t.id||0===t.height?t.display.cursorType="default":t.display.cursorType="pointer",void 0!==t.children&&t.children.forEach((t=>{Um(t,e)}))}function Bm(t,e,n){t.display=t.display||{},t.display.a0=n(t.x0),t.display.a1=n(t.x1),t.display.r0=e(t.y0),t.display.r1=e(t.y1),t.display.rMid=.5*(t.display.r0+t.display.r1),void 0!==t.children&&t.children.forEach((t=>{Bm(t,e,n)}))}function qm(t){let e=t.display.r1-t.display.r0;e*=.9,e=Math.max(e,0);let n=.5*(t.display.r0+t.display.r1)*(t.display.a1-t.display.a0);n*=.9,n=Math.max(n,0);let r=0===t.display.r0&&0===t.display.a0&&t.display.a1===2*Math.PI,i="radial"===tc.sunburst_labelling||"circular"!==tc.sunburst_labelling&&e>n,a=r?"center":i?"radial":"circular",o="'"+tc.layout.body_font.name+"'",l=Oa(tc.min_label_size),s=Oa(tc.max_label_size);t.display.radialLabel="",t.display.circularLabel="",t.display.centerLabel="";let u=t.data.key,c=tc.show_value_labels?Ty(t.value):"";0!==tc.size_by_number_formatter.prefix.indexOf(":")&&(c=" "+c),t.display.radialLabelOpacity=0,t.display.circularLabelOpacity=0,t.display.centerLabelOpacity=0,t.display.fontSize=0;let d=0,f=t.display.isTopVisibleLevel;if(t.depth>0)switch(oy(!f)&&(u=u.toUpperCase()),a){case"radial":t.display.radialLabel=u,t.display.radialValueLabel=c,t.display.radialLabelOpacity=1,d=fy(u+c,e,n,4,o,tc.sunburst_bold_labels);break;case"circular":t.display.circularLabel=u,t.display.circularValueLabel=c,t.display.circularLabelOpacity=1,d=fy(u+c,n,e,4,o,tc.sunburst_bold_labels);break;case"center":t.display.centerLabel=u,t.display.centerValueLabel=c,t.display.centerLabelOpacity=1,d=fy(u+c,2*e,.5*e,Oa(tc.label_padding),o,tc.sunburst_bold_labels)}d=Math.min(s,d),d<l&&(t.display.circularLabel="",t.display.circularValueLabel="",t.display.radialLabel="",t.display.radialValueLabel="",t.display.centerLabel="",t.display.centerValueLabel=""),t.display.fontSize=d,t.display.fontWeight=ly(!f),void 0!==t.children&&t.children.forEach((t=>{qm(t)}))}function Hm(t,e,n){let r=.5*Math.min(e-2*jy.x,n-2*jy.y),i=uy();Dm.size([2*Math.PI,i]),Dm(t);let a=tc.sunburst_show_zoomed_node_in_center?0:r*tc.sunburst_inner_radius/100,o=hd().range([a,r*tc.sunburst_outer_radius/100]).clamp(!0),l=hd().range([0,2*Math.PI]).clamp(!0),s=tc.zoomed_node_id?Bg(t,tc.zoomed_node_id):t,u=s.depth,c=tc.sunburst_show_zoomed_node_in_center?u:Math.max(u,1),d=Math.min(u+tc.num_of_visible_levels+1,i);if(u>0&&!s)return lw("zoomOut");o.domain([c,d]),l.domain([s.x0,s.x1]),Bm(t,o,l),Pm(t,u),Um(t,s),qm(t)}var Ym=Math.PI,Rm=2*Ym,Im=1e-6,Wm=Rm-Im;function Vm(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Gm(){return new Vm}function Xm(t){return function(){return t}}Vm.prototype=Gm.prototype={constructor:Vm,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,l=n-t,s=r-e,u=a-t,c=o-e,d=u*u+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(d>Im)if(Math.abs(c*l-s*u)>Im&&i){var f=n-a,p=r-o,h=l*l+s*s,b=f*f+p*p,g=Math.sqrt(h),_=Math.sqrt(d),y=i*Math.tan((Ym-Math.acos((h+d-b)/(2*g*_)))/2),m=y/_,v=y/g;Math.abs(m-1)>Im&&(this._+="L"+(t+m*u)+","+(e+m*c)),this._+="A"+i+","+i+",0,0,"+ +(c*f>u*p)+","+(this._x1=t+v*l)+","+(this._y1=e+v*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,a){t=+t,e=+e,a=!!a;var o=(n=+n)*Math.cos(r),l=n*Math.sin(r),s=t+o,u=e+l,c=1^a,d=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+u:(Math.abs(this._x1-s)>Im||Math.abs(this._y1-u)>Im)&&(this._+="L"+s+","+u),n&&(d<0&&(d=d%Rm+Rm),d>Wm?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-l)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=u):d>Im&&(this._+="A"+n+","+n+",0,"+ +(d>=Ym)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Zm=Math.abs,Jm=Math.atan2,Qm=Math.cos,Km=Math.max,tv=Math.min,ev=Math.sin,nv=Math.sqrt,rv=1e-12,iv=Math.PI,av=iv/2,ov=2*iv;function lv(t){return t>=1?av:t<=-1?-av:Math.asin(t)}function sv(t){return t.innerRadius}function uv(t){return t.outerRadius}function cv(t){return t.startAngle}function dv(t){return t.endAngle}function fv(t){return t&&t.padAngle}function pv(t,e,n,r,i,a,o){var l=t-n,s=e-r,u=(o?a:-a)/nv(l*l+s*s),c=u*s,d=-u*l,f=t+c,p=e+d,h=n+c,b=r+d,g=(f+h)/2,_=(p+b)/2,y=h-f,m=b-p,v=y*y+m*m,w=i-a,x=f*b-h*p,k=(m<0?-1:1)*nv(Km(0,w*w*v-x*x)),M=(x*m-y*k)/v,z=(-x*y-m*k)/v,A=(x*m+y*k)/v,T=(-x*y+m*k)/v,C=M-g,E=z-_,S=A-g,N=T-_;return C*C+E*E>S*S+N*N&&(M=A,z=T),{cx:M,cy:z,x01:-c,y01:-d,x11:M*(i/w-1),y11:z*(i/w-1)}}var hv=function(){var t=sv,e=uv,n=Xm(0),r=null,i=cv,a=dv,o=fv,l=null;function s(){var s,u,c=+t.apply(this,arguments),d=+e.apply(this,arguments),f=i.apply(this,arguments)-av,p=a.apply(this,arguments)-av,h=Zm(p-f),b=p>f;if(l||(l=s=Gm()),d<c&&(u=d,d=c,c=u),d>rv)if(h>ov-rv)l.moveTo(d*Qm(f),d*ev(f)),l.arc(0,0,d,f,p,!b),c>rv&&(l.moveTo(c*Qm(p),c*ev(p)),l.arc(0,0,c,p,f,b));else{var g,_,y=f,m=p,v=f,w=p,x=h,k=h,M=o.apply(this,arguments)/2,z=M>rv&&(r?+r.apply(this,arguments):nv(c*c+d*d)),A=tv(Zm(d-c)/2,+n.apply(this,arguments)),T=A,C=A;if(z>rv){var E=lv(z/c*ev(M)),S=lv(z/d*ev(M));(x-=2*E)>rv?(v+=E*=b?1:-1,w-=E):(x=0,v=w=(f+p)/2),(k-=2*S)>rv?(y+=S*=b?1:-1,m-=S):(k=0,y=m=(f+p)/2)}var N=d*Qm(y),F=d*ev(y),L=c*Qm(w),O=c*ev(w);if(A>rv){var j,$=d*Qm(m),D=d*ev(m),P=c*Qm(v),U=c*ev(v);if(h<iv&&(j=function(t,e,n,r,i,a,o,l){var s=n-t,u=r-e,c=o-i,d=l-a,f=d*s-c*u;if(!(f*f<rv))return[t+(f=(c*(e-a)-d*(t-i))/f)*s,e+f*u]}(N,F,P,U,$,D,L,O))){var B=N-j[0],q=F-j[1],H=$-j[0],Y=D-j[1],R=1/ev(function(t){return t>1?0:t<-1?iv:Math.acos(t)}((B*H+q*Y)/(nv(B*B+q*q)*nv(H*H+Y*Y)))/2),I=nv(j[0]*j[0]+j[1]*j[1]);T=tv(A,(c-I)/(R-1)),C=tv(A,(d-I)/(R+1))}}k>rv?C>rv?(g=pv(P,U,N,F,d,C,b),_=pv($,D,L,O,d,C,b),l.moveTo(g.cx+g.x01,g.cy+g.y01),C<A?l.arc(g.cx,g.cy,C,Jm(g.y01,g.x01),Jm(_.y01,_.x01),!b):(l.arc(g.cx,g.cy,C,Jm(g.y01,g.x01),Jm(g.y11,g.x11),!b),l.arc(0,0,d,Jm(g.cy+g.y11,g.cx+g.x11),Jm(_.cy+_.y11,_.cx+_.x11),!b),l.arc(_.cx,_.cy,C,Jm(_.y11,_.x11),Jm(_.y01,_.x01),!b))):(l.moveTo(N,F),l.arc(0,0,d,y,m,!b)):l.moveTo(N,F),c>rv&&x>rv?T>rv?(g=pv(L,O,$,D,c,-T,b),_=pv(N,F,P,U,c,-T,b),l.lineTo(g.cx+g.x01,g.cy+g.y01),T<A?l.arc(g.cx,g.cy,T,Jm(g.y01,g.x01),Jm(_.y01,_.x01),!b):(l.arc(g.cx,g.cy,T,Jm(g.y01,g.x01),Jm(g.y11,g.x11),!b),l.arc(0,0,c,Jm(g.cy+g.y11,g.cx+g.x11),Jm(_.cy+_.y11,_.cx+_.x11),b),l.arc(_.cx,_.cy,T,Jm(_.y11,_.x11),Jm(_.y01,_.x01),!b))):l.arc(0,0,c,w,v,b):l.lineTo(L,O)}else l.moveTo(0,0);if(l.closePath(),s)return l=null,s+""||null}return s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-iv/2;return[Qm(r)*n,ev(r)*n]},s.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Xm(+e),s):t},s.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Xm(+t),s):e},s.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Xm(+t),s):n},s.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Xm(+t),s):r},s.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Xm(+t),s):i},s.endAngle=function(t){return arguments.length?(a="function"==typeof t?t:Xm(+t),s):a},s.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Xm(+t),s):o},s.context=function(t){return arguments.length?(l=null==t?null:t,s):l},s}();function bv(t,e){0!==t.depth&&(ut(this).style("cursor",t.display.cursorType).attr("aria-label",_w).attr("tabindex",(t=>dy(t)?"0":"-1")).select("path").style("fill",iy).style("stroke",tc.stroke_color||tc.layout.background_color).style("stroke-width","0.5").style("display",t.display.visible?"inline":"none"),ut(this).select("text.radial-label").style("font-weight",t.display.fontWeight).text(t.display.radialLabel).append("tspan").style("font-weight",tc.value_label_bold?"bold":null).style("font-size",tc.value_label_relative_size+"em").text(t.display.radialValueLabel),ut(this).attr("dy","0.33em").select("text.circular-label textPath").style("font-weight",t.display.fontWeight).text(t.display.circularLabel).append("tspan").style("font-weight",tc.value_label_bold?"bold":null).style("font-size",tc.value_label_relative_size+"em").text(t.display.circularValueLabel),ut(this).select("text.center-label").style("font-weight",t.display.fontWeight).text(t.display.centerLabel).append("tspan").style("font-weight",tc.value_label_bold?"bold":null).style("font-size",tc.value_label_relative_size+"em").text(t.display.centerValueLabel),ut(this).transition().duration(e).tween("sunburst",(function(t){let e=this,n=ut(e).select("path.segment"),r=ut(e).select("text.radial-label"),i=ut(e).select("text.circular-label"),a=ut(e).select("path.label-path"),o=ut(e).select("text.center-label");e.__curTweenState=e.__curTweenState||{a0:t.display.a0,a1:t.display.a1,r0:t.display.r0,r1:t.display.r1,radialLabelOpacity:t.display.radialLabelOpacity,circularLabelOpacity:t.display.circularLabelOpacity,centerLabelOpacity:t.display.centerLabelOpacity,fontSize:t.display.fontSize};let l=e.__curTweenState,s=qc(l.a0,t.display.a0),u=qc(l.a1,t.display.a1),c=qc(l.r0,t.display.r0),d=qc(l.r1,t.display.r1),f=qc(l.radialLabelOpacity,t.display.radialLabelOpacity),p=qc(l.circularLabelOpacity,t.display.circularLabelOpacity),h=qc(l.centerLabelOpacity,t.display.centerLabelOpacity),b=qc(l.fontSize,t.display.fontSize);return function(t){e.__curTweenState.a0=s(t),e.__curTweenState.a1=u(t),e.__curTweenState.r0=c(t),e.__curTweenState.r1=d(t),e.__curTweenState.radialLabelOpacity=f(t),e.__curTweenState.circularLabelOpacity=p(t),e.__curTweenState.centerLabelOpacity=h(t),e.__curTweenState.fontSize=b(t);let l=s(t),g=u(t),_=c(t),y=d(t);n.attr("d",hv({startAngle:l,endAngle:g,innerRadius:_,outerRadius:y})).style("stroke-width",g-l==0?0:.5);let m=Z_(.5*(s(t)+u(t)))-90,v=.5*(_+y);r.style("opacity",f(t)).style("font-size",Math.floor(b(t))+"px").attr("transform",m>90?`rotate(${m-180})translate(${-v}, 0)`:`rotate(${m})translate(${v}, 0)`),i.style("font-size",Math.floor(b(t))+"px").style("opacity",p(t)),o.style("opacity",h(t)).style("font-size",Math.floor(b(t))+"px");let w=v*Math.sin(s(t))+1e-4,x=-v*Math.cos(s(t)),k=v*Math.sin(u(t))-1e-4,M=-v*Math.cos(u(t)),z=u(t)-s(t)>=Math.PI?1:0,A=.5*(s(t)+u(t)),T=A>.5*Math.PI&&A<1.5*Math.PI?`M${k},${M} A${v},${v} 0 ${z},0 ${w},${x}`:`M${w},${x} A${v},${v} 0 ${z},1 ${k},${M}`;a.attr("d",T)}})).on("end",(function(){ut(this).select("text.radial-label").text((t=>t.display.radialLabel)).append("tspan").style("font-weight",tc.value_label_bold?"bold":"normal").style("font-size",tc.value_label_relative_size+"em").text((t=>t.display.radialValueLabel)),ut(this).select("text.circular-label textPath").text((t=>t.display.circularLabel)).append("tspan").style("font-weight",tc.value_label_bold?"bold":"normal").style("font-size",tc.value_label_relative_size+"em").text(t.display.circularValueLabel),ut(this).select("text.center-label").text((t=>t.display.centerLabel)).append("tspan").style("font-weight",tc.value_label_bold?"bold":"normal").style("font-size",tc.value_label_relative_size+"em").text(t.display.centerValueLabel)})))}function gv(){Vy.selectAll("g").select("path").style("opacity",(t=>{if(!1===t.display.visible)return 0;return(ey(t)||1==t.depth?1:t.display.opacity)*(t.id===fm?.8:1)}))}function _v(t,e,n){let r=!1===t||Jy()?0:1e3*tc.animation_duration;if(Vy.transition().duration(r).style("opacity","sunburst"===tc.hierarchy_layout?1:0).on("end",(function(){"sunburst"!==tc.hierarchy_layout&&Vy.selectAll("g").remove()})),"sunburst"!==tc.hierarchy_layout)return;Hm(Mp.root,e,n),Vy.attr("transform",`translate(${.5*e}, ${.5*n})`);let i=Vy.selectAll("g").data(Mp.root.descendants(),(t=>t.id)),a=i.enter().append("g").classed("node",!0).attr("tabindex","-1");a.append("path").classed("segment",!0),a.append("text").classed("radial-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.append("path").classed("label-path",!0).style("fill","none").attr("id",(t=>"sunburst-label-path-"+t.id)),a.append("text").classed("circular-label",!0).attr("dy","0.33em").append("textPath").attr("xlink:xlink:href",(t=>"#sunburst-label-path-"+t.id)).attr("startOffset","50%").style("text-anchor","middle").style("pointer-events","none"),a.append("text").classed("center-label",!0).style("text-anchor","middle").attr("dy","0.33em").style("pointer-events","none"),a.each($m),a.merge(i).each((function(t){bv.call(this,t,r)})),a.merge(i).select(".radial-label").style("fill",hm),a.merge(i).select(".circular-label").style("fill",hm),a.merge(i).select(".center-label").style("fill",hm),i.exit().remove(),gv()}function yv(){ut(this).select("rect").on("mouseover",Ky).on("mouseout",tm).on("focus",Ky).on("focusout",tm).on("click",em).on("keydown",nm),ut(this).select(".axis-label").on("click",(t=>{Rv||(Q.stopPropagation(),lw("zoomToNode",t))}))}function mv(){return.7*tc.bar_axis_label_space*Oa(tc.bar_axis_label_size)}function vv(t){let e="'"+tc.layout.body_font.name+"'",n=t.data.key;n&&oy(!0)&&(n=n.toUpperCase());let r=.2*t.display.thickness;t.display.fontSize=Math.min(Oa(tc.label_size),t.display.thickness-2*r),t.display.fontWeight=ly(!0),t.display.barLabelText=sy(n,.9*t.display.l,t.display.fontSize+"px "+e),t.display.barLabelX=t.display.x+.5*t.display.l,t.display.barLabelY=t.display.y+.5*t.display.thickness,t.display.axisLabelY=tc.bar_axis_labels_above?t.display.y:t.display.barLabelY,t.display.axisLabelDy=tc.bar_axis_labels_above?"-0.2em":"0.33em",t.display.axisLabelDx=tc.bar_axis_labels_above?"0em":"-0.3em",t.display.axisLabelSize=Oa(tc.bar_axis_label_size),t.display.valueLabelX=t.display.x+t.display.l+Oa(.5),t.display.valueLabelY=t.display.barLabelY,t.display.valueLabelText=Ty(t.value)}function wv(t,e,n,r){t.display=t.display||{};let i="",a=uy(),o=Math.min(a-1-e.depth,tc.num_of_visible_levels);if(t.display.visible=Hg(t,e)&&t.depth-e.depth===o,t.depth>0){i=t.data.key,oy(!1)&&(i=i.toUpperCase());let e=tc.bar_axis_labels_above?n:mv(),r="'"+tc.layout.body_font.name+"'";i=sy(i,e,t.display.axisLabelSize+"px "+r)}t.display.axisLabelText=i,t.display.axisLabelVisible=Hg(t,e)&&e.depth===t.depth-1,t.display.axisFontWeight=ly(!1),t.display.valueLabelVisible=tc.show_value_labels&&Hg(t,e)&&e.depth===t.depth-1,t.display.fill=iy(t),t.children&&(!function(t,e){let n=e.ancestors(),r=!1;for(let e=0;e<n.length;e++)n[e].id===t.id&&(r=!0);return r}(t,e)?function(t){let e=hd().domain([0,t.value]).range([0,t.display.l]),n=t.display.x;t.children.forEach((r=>{r.display=r.display||{},r.display.x=n,r.display.l=e(r.value),r.display.y=t.display.y,r.display.thickness=t.display.thickness,vv(r),r.display.barLabelVisible=!0,n+=e(r.value)}))}(t):function(t,e,n){let r,i,a=[0,Math.max(e-5,0)],o=hc(t.children,(t=>t.value)),l=hd().domain([0,o]).range(a);tc.bar_max_value&&l.domain([0,tc.bar_max_value]);let s=_y();if(tc.auto_set_height&&!1===Flourish.fixed_height)r=tc.bar_min_bar_thickness;else{let e=n-$y,i=t.children.length;r=yy(e,i)}i=r+tc.bar_bar_padding+s,t.children.forEach(((t,e)=>{t.display=t.display||{},t.display.x=0,t.display.l=l(t.value),t.display.y=e*i+s,t.display.thickness=r,vv(t),t.display.barLabelVisible=!1}))}(t,n,r),t.children.forEach((t=>{wv(t,e,n,r)})))}function xv(t,e){ut(this).select("rect").transition().duration(e).attr("x",t.display.x).attr("y",t.display.y).attr("width",t.display.l).attr("height",t.display.thickness).style("fill",t.display.fill).style("opacity",t.display.visible?1:0).style("pointer-events",t.display.visible?"all":"none").style("stroke",tc.stroke_color||tc.layout.background_color).attr("tabindex",(t=>dy(t)?"0":"-1")).attr("aria-label",_w),ut(this).select("text.bar-label").transition().duration(e).attr("x",t.display.barLabelX).attr("y",t.display.barLabelY).style("font-size",t.display.fontSize+"px").style("font-weight",t.display.fontWeight).style("opacity",t.display.visible&&t.display.barLabelVisible?1:0).text(t.display.barLabelText),ut(this).select("text.axis-label").transition().duration(e).attr("y",t.display.axisLabelY).attr("dx",t.display.axisLabelDx).attr("dy",t.display.axisLabelDy).style("opacity",t.display.axisLabelVisible?1:0).style("font-size",t.display.axisLabelSize+"px").style("font-weight",t.display.axisFontWeight).style("pointer-events",t.display.axisLabelVisible?"all":"none").style("fill",tc.axis_label_color||tc.layout.font_color).style("text-anchor",tc.bar_axis_labels_above!==Ku?"start":"end").text(t.display.axisLabelText),ut(this).select("text.value-label").transition().duration(e).attr("x",t.display.valueLabelX).attr("y",t.display.valueLabelY).text((t=>t.display.valueLabelText)).style("font-size",t.display.fontSize+"px").style("font-weight",tc.value_label_bold?"bold":"normal").style("opacity",t.display.valueLabelVisible?1:0).style("fill",tc.axis_label_color||tc.layout.font_color).style("text-anchor",Ku?"end":"start")}function kv(t,e,n){let r=!1===t||Jy()?0:1e3*tc.animation_duration;if(Gy.transition().duration(r).style("opacity","bar"===tc.hierarchy_layout?1:0).on("end",(function(){"bar"!==tc.hierarchy_layout&&Gy.select(".bars").selectAll("*").remove()})),"bar"!==tc.hierarchy_layout)return;let i=tc.bar_axis_labels_above?0:mv(),a=e-i-(tc.show_value_labels?Oa(tc.bar_value_label_space):0),o=cy();!function(t,e,n,r){wv(t,e,n,r)}(Mp.root,o,a,n);let l=Mp.root.descendants().slice(1),s=Gy.select(".bars").selectAll("g.node").data(l,(t=>t.id));Gy.select(".bars").transition().duration(r).attr("transform",`translate(${i}, ${$y})`);let u=s.enter().append("g").classed("node",!0).attr("tabindex","-1");u.append("rect").attr("x",(t=>t.display.x)).attr("y",(t=>t.display.y)).attr("width",(t=>t.display.l)).attr("height",(t=>t.display.thickness)).style("fill",(t=>t.display.fill)),u.append("text").classed("bar-label",!0).attr("x",(t=>t.display.barLabelX)).attr("y",(t=>t.display.barLabelY)).attr("dy","0.33em").style("text-anchor","middle").style("opacity",0).style("pointer-events","none"),u.append("text").classed("axis-label",!0).attr("y",(t=>t.display.axisLabelY)).style("opacity",0).style("text-anchor","end"),u.append("text").classed("value-label",!0).attr("x",(t=>t.display.valueLabelX)).attr("y",(t=>t.display.valueLabelY)).attr("dy","0.33em").style("opacity",0).style("pointer-events","none"),u.each(yv),u.merge(s).style("cursor",(t=>t.children?"pointer":"default")).each((function(t){xv.call(this,t,r)})),u.merge(s).select(".bar-label").style("fill",hm),s.exit().remove(),function(t,e,n){let r=t.ancestors().slice(0,-1).reverse(),i=tc.bar_axis_labels_above?0:mv();e.select(".breadcrumb").transition().duration(n).attr("transform",`translate(${i}, 30)`);let a=e.select(".breadcrumb").style("font-weight","allBold"===tc.label_weight||"topBold"===tc.label_weight?"bold":"normal").select("text").selectAll("tspan.item").data(r),o=a.enter().append("tspan").style("opacity",0).style("fill",tc.axis_label_color||tc.layout.font_color).classed("item",!0);o.append("tspan").classed("separator",!0).text(" > "),o.append("tspan").classed("label",!0).on("click",(t=>{Rv||(Q.stopPropagation(),lw("zoomToNode",t))})),o.merge(a).transition().duration(n).style("fill",tc.axis_label_color||tc.layout.font_color).style("opacity",1),a.select("tspan.label").text((t=>"allUpperCase"===tc.label_case||"topUpperCase"===tc.label_case?t.data.key.toUpperCase():t.data.key)),a.exit().transition().duration(n).style("opacity",0).remove()}(o,Gy,r)}function Mv(){Gy.select(".bars").selectAll("g").select("rect").style("opacity",(t=>{let e=t.id===fm;return t.display.visible?e?.7:1:0}))}function zv(t,e){return{x:e*Math.cos(t),y:e*Math.sin(t)}}function Av(t,e,n,r,i,a,o,l,s,u){t.each((function(t){var c,d=Z_(l(t.data.x)),f=s(t.data.y),p=t.data.value,h=t.data.value<0,b=0===t.height||t.depth===e.depth+tc.num_of_visible_levels,g=0===t.depth;t.data.display.rotate=d,t.data.display.translate=f,t.data.display.parent_rotate=Z_(l(t.data.parent_x)),t.data.display.parent_translate=s(t.data.parent_y),t.data.display.cp2_translate=t.depth===e.depth+1?0:(t.data.display.translate+t.data.display.parent_translate)/2,t.data.display.bar_width=i,t.data.display.bar_length=b?Math.abs(u(p)):0,t.data.display.bar_translate=b?p>0?0:-t.data.display.bar_length:0,t.data.display.circle_opacity=b||g?0:1,t.data.display.bar_opacity=b?1:0,function(t,e,n,r,i,a,o,l,s,u){let c={},d=t.data.key;d&&oy(!0)&&(d=d.toUpperCase()),c.normal=n?"translate(4, 0)":"translate(8, 0)",i||(c.normal+="translate("+t.data.display.bar_length+", 0)"),c.reversed=n?"rotate(180)translate(-4, 0)":"rotate(180)translate(-8, 0)",i||(c.reversed+="translate("+-t.data.display.bar_length+", 0)");var f=a>-90&&a<90?"normal":"reversed";t.data.display.name_label_orientation=f,t.data.id===r.data.id&&(t.data.display.name_label_orientation="normal",c.normal="rotate("+-a+")translate(8, 0)",d&&oy(!1)&&(d=d.toUpperCase())),t.data.display.name_label_transform=c;let p="'"+tc.layout.body_font.name+"'",h=l>20?.2*l:.05*l,b=ly(t.data.id!==r.data.id),g=Math.min(Oa(tc.label_size),Math.floor(l-2*h)),_=g+"px "+p,y="bold "+_,m=b+" "+_,v={text:"",y:null,dy:null,x:null},w=[];const x=1.2*g;let k=n?Math.max(Math.floor(.9*l/x),1):3,M=!1;if(n){let e=u-4-t.data.display.bar_length,n=!1;if(tc.show_value_labels){k>1&&(M=!0,k-=1),v.text=Ty(o);let t=ja(v.text+" ",y);t>=e&&(v.text=sy(v.text,e,y),n=!0),n||M||(e-=t)}n&&!M||(w=Pa(d,m,k,e))}else e||(w=Pa(d,m,k,.9*s));const z=w.length+(M?1:0),A=z>1;if(d){const t=z-1,e=.33*g-.5*t*x;w=w.map(((t,n)=>({text:t,y:A?e:null,dy:A?n*x:null,x:A?0:null}))),v.x=A?0:null,v.y=A?e:null,v.dy=A?t*x:null}t.data.display.label_size=g,t.data.display.font_weight=b,t.data.display.name_label=w,t.data.display.value_label=v}(t,g,b,e,h,d,p,i,a,o),t.data.display.color=iy(t),tc.radial_tree_colored_links?(c=Xi(t.data.display.color)).opacity=.25:c=tc.radial_tree_link_color,t.data.display.link_color=c;var _=zv(J_(d),f+(b?t.data.display.bar_length:0));t.data.display.popup={x:.5*n+_.x,y:.5*r+_.y}}))}function Tv(){ut(this).on("mouseover",Ky).on("mouseout",tm).on("focus",Ky).on("focusout",tm).on("keydown",(t=>{nm(Bg(Mp.root,t.data.id))})).on("click",(t=>{em(Bg(Mp.root,t.data.id))}))}function Cv(t,e,n){var r=t.append("g").classed("label-"+n,!0).style("opacity",0).style("fill",(function(t){return t.data.display.color})).style("font-size",(function(t){return t.data.display.label_size+"px"})).style("font-weight",e.data.display.font_weight);!function(t){t.append("tspan").classed("name-label",!0),t.append("tspan").classed("value-label",!0).style("font-weight","bold")}(r.append("text").classed("label-text",!0).attr("dy","0.33em").style("stroke-width","0.5em").style("stroke-linejoin","round").attr("paint-order","stroke"))}function Ev(t,e){var n=ut(this);this._tween={rotate:t.data.display.prev_rotate,translate:t.data.display.prev_translate},n.classed("node",!0).style("opacity",0).transition().duration(.5*e).delay(.5*e).style("opacity",1),n.classed("node",!0).attr("transform",(function(t){return"rotate("+t.data.display.prev_rotate+")"})),(n=n.append("g")).classed("translate-layer",!0).attr("transform",(function(t){return"translate("+t.data.display.prev_translate+")"})),n.append("circle").attr("r",4).style("opacity",0).style("fill",(function(t){return t.data.display.color})),Cv(n,t,"normal"),Cv(n,t,"reversed"),n.append("rect").style("opacity",0).style("fill",(function(t){return t.data.display.color}))}function Sv(t){var e=this,n=this._tween.rotate,r=this._tween.translate,i=qc(n,t.data.display.rotate),a=qc(r,t.data.display.translate);return function(t){ut(e).attr("transform","rotate("+i(t)+")").select(".translate-layer").attr("transform","translate("+a(t)+")"),e._tween.rotate=i(t),e._tween.translate=a(t)}}function Nv(t){ut(this).transition().duration(.5*t).style("opacity",0),ut(this).transition("nodes").duration(t).tween("node",Sv).on("end",(function(){ut(this).remove()}))}function Fv(t,e){Xy.select(".nodes").selectAll("g.node").data(Mp.root.descendants(),(function(t){return t.data.id}));var n=Xy.select(".nodes").selectAll("g.node").data(t.descendants(),(function(t){return t.data.id}));n.enter().append("g").attr("tabindex","0").each((function(t){Ev.call(this,t,e)})).each(Tv).merge(n).transition("nodes").duration(e).tween("node",Sv),n.exit().each((function(){Nv.call(this,e)})),Xy.select(".nodes").selectAll("g.node").transition().delay(e).duration(.1*e).style("opacity",1),Xy.select(".nodes").selectAll("g.node").select("circle").transition("nodes").duration(e).style("fill",(function(t){return t.data.display.color})).style("opacity",(function(t){return t.data.display.circle_opacity})),Xy.select(".nodes").selectAll("g.node").select("rect").transition("nodes").duration(e).style("fill",(function(t){return t.data.display.color})).style("opacity",(function(t){return t.data.display.bar_opacity})).attr("y",(function(t){return-.5*t.data.display.bar_width})).attr("x",(function(t){return t.data.display.bar_translate})).attr("width",(function(t){return t.data.display.bar_length})).attr("height",(function(t){return t.data.display.bar_width})),Xy.select(".nodes").selectAll("g.node").select("g.label-normal").each((function(t){ut(this).select(".label-text").style("stroke",tc.layout.background_color),ut(this).select("tspan.value-label").text(tc.show_value_labels?(Ku?" ":"")+t.data.display.value_label.text:"").attr("x",t.data.display.value_label.x).attr("y",t.data.display.value_label.y).attr("dy",t.data.display.value_label.dy).style("font-weight",tc.value_label_bold?"bold":"normal");var e=ut(this).select("tspan.name-label").text(Ku?"":" ");e.selectAll("tspan.name-label-line").data(t.data.display.name_label).join("tspan").classed("name-label-line",!0).text((t=>t.text)).attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("dy",(t=>t.dy)).style("font-weight",t.data.display.font_weight),Ku?e.lower():e.raise()})).style("text-anchor",Ku?"end":"start").transition().duration(e).style("fill",(function(t){return t.data.display.color})).style("font-size",(function(t){return t.data.display.label_size+"px"})).style("font-weight",(function(t){return t.data.display.font_weight})).attr("transform",(function(t){return t.data.display.name_label_transform.normal})).style("opacity",(function(t){return"normal"===t.data.display.name_label_orientation?1:0})),Xy.select(".nodes").selectAll("g.node").select("g.label-reversed").each((function(t){ut(this).select(".label-text").attr("x","0").style("stroke",tc.layout.background_color),ut(this).select("tspan.name-label").text(Ku?"":" ").selectAll("tspan.name-label-line").data(t.data.display.name_label).join("tspan").classed("name-label-line",!0).text((t=>t.text)).attr("x",(t=>t.x)).attr("y",(t=>t.y)).attr("dy",(t=>t.dy)).style("font-weight",t.data.display.font_weight);var e=ut(this).select("tspan.value-label").text(tc.show_value_labels?t.data.display.value_label.text+(Ku?" ":""):"").attr("x",t.data.display.value_label.x).attr("y",t.data.display.value_label.y).attr("dy",t.data.display.value_label.dy).style("font-weight",tc.value_label_bold?"bold":"normal");Ku?e.lower():e.raise()})).style("text-anchor",Ku?"start":"end").transition().duration(e).style("fill",(function(t){return t.data.display.color})).style("font-size",(function(t){return t.data.display.label_size+"px"})).attr("transform",(function(t){return t.data.display.name_label_transform.reversed})).style("opacity",(function(t){return"normal"===t.data.display.name_label_orientation?0:1}))}function Lv(t,e){var n=ut(this);this._tween={rotate:t.data.display.prev_rotate,translate:t.data.display.prev_translate,parent_rotate:t.data.display.prev_parent_rotate,parent_translate:t.data.display.prev_parent_translate,cp2_translate:t.data.display.cp2_translate},n.classed("link",!0).style("opacity",0).transition().duration(.5*e).delay(.5*e).style("opacity",1)}function Ov(t){var e=this;this._tween=this._tween||{};var n=this._tween.rotate||0,r=this._tween.translate||0,i=this._tween.parent_rotate||0,a=this._tween.parent_translate||0,o=this._tween.cp2_translate||0,l=qc(n,t.data.display.rotate),s=qc(r,t.data.display.translate),u=qc(i,t.data.display.parent_rotate),c=qc(a,t.data.display.parent_translate),d=qc(o,t.data.display.cp2_translate);return function(t){var n=l(t),r=s(t),i=u(t),a=c(t),o=d(t),f=function(t,e,n,r,i){var a=zv(J_(t),e),o=zv(J_(t),(e+r)/2),l=zv(J_(n),i),s=zv(J_(n),r);return"M"+a.x+","+a.y+"C"+o.x+","+o.y+" "+l.x+","+l.y+" "+s.x+","+s.y}(n,r,i,a,o);ut(e).attr("d",f),e._tween.rotate=n,e._tween.translate=r,e._tween.parent_rotate=i,e._tween.parent_translate=a,e._tween.cp2_translate=o}}function jv(t){ut(this).transition().duration(.5*t).style("opacity",0),ut(this).transition("links").duration(t).tween("link",Ov).on("end",(function(){ut(this).remove()}))}function $v(t,e){Xy.select(".links").selectAll("path").data(Mp.root.descendants().slice(1),(function(t){return t.data.id}));var n=Xy.select(".links").selectAll("path").data(t.descendants().slice(1),(function(t){return t.data.id}));n.enter().append("path").each((function(t){Lv.call(this,t,e)})).merge(n).transition("links").duration(e).style("stroke",(function(t){return t.data.display.link_color})).style("fill","none").tween("link",Ov),n.exit().each((function(){jv.call(this,e)})),Xy.select(".links").selectAll("path").transition().delay(e).duration(.1*e).style("opacity",1)}var Dv,Pv,Uv,Bv,qv,Hv,Yv,Rv,Iv=2*Math.PI,Wv={},Vv=function(){var t=xg,e=1,n=1,r=null;function i(i){var s=function(t){for(var e,n,r,i,a,o=new Tg(t,0),l=[o];e=l.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)l.push(n=e.children[i]=new Tg(r[i],i)),n.parent=e;return(o.parent=new Tg(null,0)).children=[o],o}(i);if(s.eachAfter(a),s.parent.m=-s.z,s.eachBefore(o),r)i.eachBefore(l);else{var u=i,c=i,d=i;i.eachBefore((function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>d.depth&&(d=t)}));var f=u===c?1:t(u,c)/2,p=f-u.x,h=e/(c.x+f+p),b=n/(d.depth||1);i.eachBefore((function(t){t.x=(t.x+p)*h,t.y=t.depth*b}))}return i}function a(e){var n=e.children,r=e.parent.children,i=e.i?r[e.i-1]:null;if(n){!function(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(e);var a=(n[0].z+n[n.length-1].z)/2;i?(e.z=i.z+t(e._,i._),e.m=e.z-a):e.z=a}else i&&(e.z=i.z+t(e._,i._));e.parent.A=function(e,n,r){if(n){for(var i,a=e,o=e,l=n,s=a.parent.children[0],u=a.m,c=o.m,d=l.m,f=s.m;l=Mg(l),a=kg(a),l&&a;)s=kg(s),(o=Mg(o)).a=e,(i=l.z+d-a.z-u+t(l._,a._))>0&&(zg(Ag(l,e,r),e,i),u+=i,c+=i),d+=l.m,u+=a.m,f+=s.m,c+=o.m;l&&!Mg(o)&&(o.t=l,o.m+=d-c),a&&!kg(s)&&(s.t=a,s.m+=u-f,r=e)}return r}(e,i,e.parent.A||r[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=e,t.y=t.depth*n}return i.separation=function(e){return arguments.length?(t=e,i):t},i.size=function(t){return arguments.length?(r=!1,e=+t[0],n=+t[1],i):r?null:[e,n]},i.nodeSize=function(t){return arguments.length?(r=!0,e=+t[0],n=+t[1],i):r?[e,n]:null},i}().separation((function(){return 1})),Gv=hd(),Xv=hd(),Zv=hd();function Jv(t){var e=Xv(t),n=2*Math.PI;return e<-n&&(e=-n),e>n&&(e=n),e+=J_(tc.radial_tree_rotation)}function Qv(t,e){var n=t.copy();return n.eachBefore((function(t){t.depth===e&&delete t.children})),n.each((function(t){t.isTruncated=!0,t.id=t.data.id})),n}function Kv(t,e,n){let r=!1===t||Jy()?0:1e3*tc.animation_duration;if(function(t){Xy.attr("aria-label",_w({id:"root"})).transition().duration(t).style("opacity","radialTree"===tc.hierarchy_layout?1:0).on("end",(function(){"radialTree"!==tc.hierarchy_layout&&(Xy.select(".nodes").selectAll("*").remove(),Xy.select(".links").selectAll("*").remove())}))}(r),"radialTree"===tc.hierarchy_layout){var i=cy();Mp.root.each((function(t){t.data.id=t.id,t.data.value=t.value})),function(t){t.each((function(t){if(void 0!==Wv[t.id]){var e=Wv[t.id];t.data.display={prev_rotate:e.rotate,prev_translate:e.translate,prev_parent_rotate:e.parent_rotate,prev_parent_translate:e.parent_translate,cp2_translate:e.cp2_translate}}else t.data.display={prev_rotate:0,prev_translate:0,prev_parent_rotate:0,prev_parent_translate:0,cp2_translate:0}}))}(Mp.root),function(t,e){var n=Qv(t,e);Vv(t),Vv(n);var r,i=(r={},n.each((function(t){r[t.data.id]=t})),r);t.eachBefore((function(t){var e=i[t.data.id];if(t.data.y=t.y,void 0!==e)t.data.x=e.x,t.data.x_delta=e.x-t.x;else{var n=t.parent.data.x_delta;t.data.x=t.x+n,t.data.x_delta=n}0===t.depth?(t.data.parent_x=t.data.x,t.data.parent_y=t.data.y):(t.data.parent_x=t.parent.data.x,t.data.parent_y=t.parent.data.y)}))}(Mp.root,i.depth+tc.num_of_visible_levels);var a=Qv(i,tc.num_of_visible_levels);!function(t,e,n,r){var i=Math.min(t,e),a=tc.num_of_visible_levels;n+tc.num_of_visible_levels>r&&(a=r-n),Dv=.5*tc.radial_tree_outer_radius*i/100,Pv=.5*tc.radial_tree_bar_length*i/100,Uv=Dv/a,Bv=.5*i-Dv,qv=tc.radial_tree_bar_width}(e,n,i.depth,Mp.root.height),function(t){var e=t.leaves().length,n=Dv>0?e*qv/Dv:0;n>=Iv?(Hv=Dv*Iv/e-1,Yv=Iv):(Yv=n,Hv=qv-2),Hv=Math.max(Hv,0),Yv-=(Hv+1)/Dv,Yv=Math.max(Yv,0)}(a),function(t,e){var n=t.leaves(),r=lc(n,(function(t){return t.data.x}));Xv.domain(r).range([-.5*Yv,.5*Yv]),1===n.length&&Xv.range([0,0]);var i=[e.data.y,n[0].data.y];Zv.domain(i).range([0,Dv]),Gv.domain([0,hc(n,(function(t){return Math.abs(t.data.value)}))]).range([0,Pv])}(a,i),Av(Mp.root,i,e,n,Hv,Uv,Bv,Jv,Zv,Gv),Xy.attr("transform",`translate(${.5*e}, ${.5*n})`),Fv(a,r),$v(a,r),function(t){t.each((function(t){Wv[t.id]=t.data.display}))}(Mp.root)}}function tw(){Rv||Xy.select(".nodes").selectAll(".node").style("opacity",(function(t){return t.data&&t.data.id===fm?.7:1}))}function ew(t,e){let n=tc.num_of_visible_levels;t.display={},t.display.visible=t.depth<e+n+1,t.display.leaf=!t.children,t.display.visible_leaf=t.depth===e+n||t.display.leaf&&t.depth<e+n,t.children&&t.children.forEach((t=>{ew(t,e)}))}function nw(){let t=cy(),e=t?t.depth:0;ew(Mp.root,e)}function rw(){var t=K_(),e=cy(),n=function(){let t=K_(),e=cy(),n=[];return e.each((function(r){t.includes(r.data.key)&&r.depth-e.depth<=tc.num_of_visible_levels&&n.push(r.data.key)})),gh(n)}(),r="off"===tc.legend_mode,i=[];i=tc.filter&&tc.filter!==tc.filter_all_label?gh([tc.filter].concat(n)):tc.legend_only_show_custom_overrides?t:gh(X_.concat(t));var a=e.depth>0?i.filter((function(t){return n.includes(t)||e.level1_key===t&&!n.includes(e.data.key)})):i.filter((function(e){return!t.includes(e)||n.includes(e)})),o=i.filter((function(t){return!a.includes(t)}));Tw.data(r?[]:i,G_.getColor).filtered(o),Cw.update()}function iw(t){let e;!function(){let t=Bd.data.column_names.size_columns.map((t=>t));0===t.length?tc.size_by=null:-1===t.indexOf(tc.size_by)&&(tc.size_by=t[0]);let e=Ny(Sy());0===e.length?tc.filter=null:-1===e.indexOf(tc.filter)&&tc.filter!==tc.filter_all_label&&(tc.filter=e[0])}(),Ey(),Fy(),Ly(),(Ay||zy)&&Ew.update(),e=zy?Bd.data.filter((function(t){return tc.filter===tc.filter_all_label||("datetime"===Bd.data.metadata.filter.type?Q_(t.filter)===Q_(tc.filter):t.filter===tc.filter)})):Bd.data;let n=!0;"radialTree"===tc.hierarchy_layout&&(n=!1);let r=Og(e,n);Mp.root=Ug(r),X_=gh(Bd.data.map((t=>t.nest_columns[0]))),G_.updateColorScale(X_),rw(),Qu.update(),Ku="rtl"===$a(),function(){let t=tc.hierarchy_layout,e=Math.max(0,Qu.getPrimaryWidth()),n=Math.max(0,Qu.getPrimaryHeight()),r=n,i=cy(),a=i.children?i.children.length:0;var o=!1;if(tc.auto_set_height&&!1===Flourish.fixed_height)if("treemap"===t){let t=e<tc.responsive_narrow_breakpoint?.01*e*tc.treemap_aspect_ratio_narrow:.01*e*tc.treemap_aspect_ratio_normal;Qu.setHeight(t),r=t}else if("circlePacking"===t||"sunburst"===t||"radialTree"===t)Qu.setHeight(e),r=e;else if("bar"===t){let t=_y(),e=tc.bar_min_bar_thickness+tc.bar_bar_padding+t,n=$y+a*e;Qu.setHeight(n),r=n}else Qu.setHeight(null);else if(Qu.setHeight(null),"bar"===t){let t=yy(n-$y,a),e=_y(),i=a*(t+tc.bar_bar_padding+e)+$y;i>n&&(r=i,o=!0)}Yy.attr("width",e).attr("height",r),Ry.attr("width",e).attr("height",r),qy.select("#fl-layout-primary-container").style("overflow-y",o?"auto":"hidden")}();let i=Math.max(0,Qu.getPrimaryWidth()),a=Math.max(0,Qu.getPrimaryHeight());Mp.w=i,Mp.h=a,function(){let t=sw.locked();if(t){let e=Bg(Mp.root,t);if(!e||!vw(e))return void sw.clickout();{let t=gw(e);sw.setColumnNames(t.column_names).setFormatters(t.formatters)}}sw.update(),ut(".flourish-popup").classed("all-events","popup"===tc.popup.mode||"both"===tc.popup.mode)}(),nw(),vm(t,i,a),jm(t,i,a),_v(t,i,a),kv(t,i,a),Kv(t,i,a),function(t){let e=tc.zoomed_node_id&&my(tc.ascend_button_visibility);const n=document.activeElement===Zy.node();let r=!1===t||Jy()?0:1e3*tc.animation_duration;Zy.style("display",e?"block":"none").style("background",tc.zoom_out_button_color).classed("top-left","right"===tc.popup.panel_position).classed("bottom-right","top"===tc.popup.panel_position).on("touchstart",(()=>{Q.stopPropagation(),lw("zoomOut")})).on("click",(()=>{Q.stopPropagation(),lw("zoomOut")})).select("svg path").style("fill",tc.zoom_out_arrow_color),setTimeout((()=>{if(n&&!e){const t=ut(`.g-${tc.hierarchy_layout.replace(/([A-Z])/g,(t=>`-${t.toLowerCase()}`))} g.node[tabindex="0"]`);t.node()&&t.node().focus()}}),r)}(t),kw.update(),Mw.update(),zw.update(),Aw.update(),Qu.showOverlay(void 0===Mp.root.children?"No data to display":null)}function aw(){iw()}function ow(){mm(),Om(),gv(),Mv(),tw()}function lw(t,e){switch(t){case"updateHighlightedNode":pm(e),ow();break;case"zoomToNode":Rv=!0,e.children&&(tc.zoomed_node_id=e.id),pm(null),aw(),sw.clickout();var n=Jy()?0:1e3*tc.animation_duration+100;setTimeout((function(){Rv=!1,vy("zoomIn")}),n);break;case"zoomOut":let t=null;if(e?.node&&(t=e.node.__data__?e.node.__data__:e.node),null===tc.zoomed_node_id)return void vy("zoomOut",t);Rv=!0;let r=Bg(Mp.root,tc.zoomed_node_id),i=r?r.ancestors():null;tc.zoomed_node_id=i&&2!==i.length?i[1].id:null,pm(null),aw(),sw.clickout(),setTimeout((function(){Rv=!1,vy("zoomOut",t||r)}),1e3*tc.animation_duration+100);break;case"hidePopup":sw.clickout(),pm(null),aw()}}let sw,uw,cw=null;function dw(t){cw=t}function fw(t){if(!t)return;let e,n,r=Yy.node().getBoundingClientRect().left,i=Yy.node().getBoundingClientRect().top;switch(tc.hierarchy_layout){case"treemap":e=.5*(t.display.x1+t.display.x0),n=t.display.visible_leaf?.5*(t.display.y1+t.display.y0)+15:t.display.y0+10;break;case"circlePacking":e=t.display.x+Oy.x,n=t.display.visible_leaf?t.display.y+Oy.y+15:t.display.y-t.display.r+Oy.y+15;break;case"sunburst":let r=.5*(t.display.a0+t.display.a1),i=r>.5*Math.PI&&r<1.5*Math.PI?.4:.6,a=i*t.display.r0+(1-i)*t.display.r1;e=.5*Mp.w+a*Math.sin(r),n=.5*Mp.h-a*Math.cos(r);break;case"bar":e=t.display.x+.5*t.display.l+(tc.bar_axis_labels_above?0:mv()),n=t.display.y+.5*t.display.thickness+$y+10;break;case"radialTree":e=t.data.display.popup.x,n=t.data.display.popup.y+15;break;default:console.log("Missing handler for "+tc.hierarchy_layout+" in popup")}return e+=r,n+=i,[e,n]}function pw(t){let e=Bg(Mp.root,t),n=gw(e);return[fw(e),n.datum]}function hw(t,e,n,r){e.__value="VALUE",r.__value=t.value,n.__value=Ty,e.__size_by="SIZEBY",r.__size_by="Sum"===tc.aggregation_type?tc.size_by:"Count",e.__name="NAME",r.__name=t.data.key}function bw(t,e,n,r){Bd.data.metadata.popup_metadata&&(e.meta=Bd.data.column_names.popup_metadata,r.meta=Bd.data.metadata.popup_metadata.map(((e,n)=>t.popup_metadata[n])),n.meta=Bd.data.metadata.popup_metadata.map((t=>"datetime"===t.type||"number"===t.type?Xn(t.output_format_id):t=>t)))}function gw(t){let e={},n={},r={},i="popup"===tc.popup.mode&&tc.popup.popup_is_custom||"both"===tc.popup.mode&&(tc.popup.popup_is_custom||tc.popup.panel_is_custom),a=t.ancestors().slice(0,-1),o=t.data.unique_row;return t.height>0||0===t.height&&!o?i?(n.ancestors=a.map((t=>t.data.column_name)),e.ancestors=a.map((t=>t.data.key)),n.value=tc.size_by??"Count",e.value=t.value,r.value=Ty,hw(t,n,r,e)):(e.__title=t.data.key,n.ancestors=a.map((t=>t.data.column_name)).slice(1),e.ancestors=a.map((t=>t.data.key)).slice(1),n.value=tc.size_by??"Count",e.value=t.value,r.value=Ty):i?(n.ancestors=a.map((t=>t.data.column_name)),e.ancestors=a.map((t=>t.data.key)),n.value=tc.size_by??"Count",e.value=t.value,r.value=Ty,bw(o,n,r,e),hw(t,n,r,e)):(e.__title=t.data.key,n.ancestors=a.map((t=>t.data.column_name)).slice(1),e.ancestors=a.map((t=>t.data.key)).slice(1),n.value=tc.size_by??"Count",e.value=t.value,r.value=Ty,bw(o,n,r,e)),{datum:e,column_names:n,formatters:r}}function _w(t){const e=gw(Bg(Mp.root,t.id));return sw.setColumnNames(e.column_names).setFormatters(e.formatters),sw.getAccessiblePopupContent(e.datum)}function yw(){lw("updateHighlightedNode",null)}function mw(){if(sw.locked()&&("popup"===tc.popup.mode||"both"===tc.popup.mode))return void sw.clickout();let t=cw,e=Bg(Mp.root,t),n=gw(e),r=fw(e);sw.setColumnNames(n.column_names).setFormatters(n.formatters).click(r,n.datum,t),lw("updateHighlightedNode",t)}function vw(t){let e=cy(),n=t.depth>=e.depth&&t.depth<=e.depth+tc.num_of_visible_levels,r=!tc.popup_active_levels||"all_levels"===tc.popup_active_levels||"top_level"===tc.popup_active_levels&&1===t.depth||"below_top_level"===tc.popup_active_levels&&t.depth>1||"above_bottom_level"===tc.popup_active_levels&&t.height>0||"bottom_level"===tc.popup_active_levels&&0===t.height;return n&&r}Qu=Ju(tc.layout);var ww=Ai(tc.filter_control),xw=Ai(tc.size_by_control),kw=function(t,e,n){return new Sd(t,e,n)}(tc.controls_style,".fl-control",tc.layout),Mw=function(t,e,n){return new Od(t,e,n)}(tc.dropdown_style,".fl-control-dropdown",tc.layout),zw=function(t,e,n){return new Fd(t,e,n)}(tc.button_style,".fl-control-buttons",tc.layout),Aw=function(t,e,n){return new Dd(t,e,n)}(tc.slider_style,".fl-control-slider",tc.layout);const Tw=function(t){return new mc(t)}(tc.legend_categorical);sw=function(t,e,n){return new vp(t,e,n)}(tc.popup),sw.titleKey("__title").subtitleKey("__subtitle").getLockedPosition(pw).onPanelClose(yw),uw=ut(".flourish-popup").node(),ut(".flourish-popup-content").on("click",mw),ut(".flourish-popup").on("mouseleave",(()=>sw.mouseout()));var Cw=function(t){return new Ad(t)}(tc.legend_container).appendTo(Qu.getSection("legend")).add(Tw),Ew=function(t){return new xi(t)}(tc.controls_container).appendTo(Qu.getSection("controls")),Sw=function(){return Tp.Date.now()},Nw=/\s/;var Fw=/^\s+/;function Lw(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Nw.test(t.charAt(e)););return e}(t)+1).replace(Fw,""):t}var Ow=/^[-+]0x[0-9a-f]+$/i,jw=/^0b[01]+$/i,$w=/^0o[0-7]+$/i,Dw=parseInt;function Pw(t){if("number"==typeof t)return t;if(Tb(t))return NaN;if($p(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=$p(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Lw(t);var n=jw.test(t);return n||$w.test(t)?Dw(t.slice(2),n?2:8):Ow.test(t)?NaN:+t}var Uw=Math.max,Bw=Math.min;function qw(t,e,n){var r,i,a,o,l,s,u=0,c=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,a=i;return r=i=void 0,u=e,o=t.apply(a,n)}function h(t){var n=t-s;return void 0===s||n>=e||n<0||d&&t-u>=a}function b(){var t=Sw();if(h(t))return g(t);l=setTimeout(b,function(t){var n=e-(t-s);return d?Bw(n,a-(t-u)):n}(t))}function g(t){return l=void 0,f&&r?p(t):(r=i=void 0,o)}function _(){var t=Sw(),n=h(t);if(r=arguments,i=this,s=t,n){if(void 0===l)return function(t){return u=t,l=setTimeout(b,e),c?p(t):o}(s);if(d)return clearTimeout(l),l=setTimeout(b,e),p(s)}return void 0===l&&(l=setTimeout(b,e)),o}return e=Pw(e)||0,$p(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Uw(Pw(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),_.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0},_.flush=function(){return void 0===l?o:g(Sw())},_}var Hw;function Yw(t,e,n){for(var r in e){var i=e[r];if("object"!=typeof i||null===i||Array.isArray(i))n.indexOf(r)>-1?t[r]=i:Flourish.warn("State property `"+r+"` not whitelisted for use in URL");else{var a=r.length,o=n.filter((function(t){return t.substring(0,a)==r})).map((function(t){return t.substring(a+1)}));Yw(t[r],i,o)}}}function Rw(t,e){var n=location.hash.substring(1);if(""!=n){var r;try{r=JSON.parse(decodeURIComponent(n))}catch(t){Flourish.warn({message:"Invalid JSON passed to template URL hash",explanation:t})}r&&Yw(t,r,e)}}var Iw=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return $p(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),qw(t,e,{leading:r,maxWait:e,trailing:i})}((function(){iw(Hw==window.innerWidth),Hw=window.innerWidth}),500);return t.data=Bd,t.draw=function(){var t,e,n,r;t=tc.url_state,e=tc,n=iw,r=(t.enabled,t.whitelist||"").split(/\n/),Rw(e,r),window.addEventListener("hashchange",(function(){Rw(e,r),n&&n()})),qy=ut(document.body),Hy=ut(Qu.getSection("primary")),Yy=Hy.append("svg").classed("noselect",!0),Ry=Yy.append("rect").classed("background",!0).style("fill","none").style("pointer-events","visible"),Iy=Yy.append("g").classed("g-treemap",!0),Wy=Yy.append("g").classed("g-circle-packing",!0).attr("transform",`translate(${Oy.x},${Oy.y})`),Vy=Yy.append("g").classed("g-sunburst",!0),(Gy=Yy.append("g").classed("g-bar",!0)).append("g").classed("breadcrumb",!0).append("text"),Gy.append("g").classed("bars",!0),(Xy=Yy.append("g").classed("g-radial-tree",!0)).append("g").classed("links",!0),Xy.append("g").classed("nodes",!0),(Zy=Hy.append("div").classed("zoomout-button",!0).attr("title","Go up a level").attr("tabindex","0").attr("role","button").on("click",(()=>{lw("zoomOut",{node:Q.target})})).on("keydown",(()=>{"Enter"!==Q.key&&" "!==Q.key||lw("zoomOut",{node:Q.target})}))).append("svg").append("path").attr("d","M7.285,16.01l4.12,4.119l5.137,-5.137l0,21.201l5.825,0l0,-21.201l5.138,5.137l4.119,-4.119l-12.169,-12.169l-12.17,12.169Z"),Ry.on("click",(()=>{lw("zoomOut")})).on("keydown",(()=>{"Escape"===Q.key&&lw("zoomOut")})),ut(Qu.getWrapper()).on("click",(()=>{event.target.closest&&event.target.closest(".fl-control")||lw("hidePopup")})),Hw=window.innerWidth,window.addEventListener("resize",(function(){Iw()})),Qu.awaitFonts((()=>iw(!1)))},t.state=tc,t.update=aw,t}({});
//# sourceMappingURL=template.js.map
</script><canvas style="position: fixed; left: 1000vw;"></canvas><svg style="position: fixed; left: 1000vw;"><text></text></svg><div id="fl-layout-wrapper-outer" dir="ltr" style="display: flex;"><main id="fl-layout-wrapper" dir="ltr" style="display: flex; flex-grow: 1; flex-direction: column; box-sizing: border-box; overflow: hidden; color: rgb(51, 51, 51); padding: 0.75rem;"><section class="fl-layout-container" id="fl-layout-header-container" style="width: 100%; position: relative; order: 0; padding-bottom: 0.5rem;"><div class="fl-layout-inner" id="fl-layout-header" style="width: 100%; position: relative;"><header class="flourish-header" style="text-align: center; margin: 0px;"><div class="flourish-header-logo-container"></div><hgroup><h2 id="flourish-header-title" style="font-family: inherit; font-size: 2rem; line-height: 1.2; font-weight: bold; color: rgb(51, 51, 51); margin: 0px; padding-top: 0rem;">世博会支付方式</h2><h3 id="flourish-header-subtitle" style="font-family: inherit; font-size: 1.4rem; line-height: 1.2; font-weight: normal; color: rgb(51, 51, 51); margin: 0px; padding-top: 0px;"></h3></hgroup><p id="flourish-header-text" style="font-size: 1.2rem; line-height: 1.2; font-weight: normal; margin: 0px; color: rgb(51, 51, 51); padding-top: 0px;"></p><div class="clearfix" style="clear: both;"></div></header></div></section><section class="fl-layout-container" id="fl-layout-controls-container" style="width: 100%; position: relative; order: 10; padding-top: 0.5rem; padding-bottom: 0.5rem;"><div class="fl-layout-inner" id="fl-layout-controls" style="width: 100%; position: relative;"><div style="display: flex; flex-wrap: wrap; justify-content: flex-start;"><div class="fl-controls-container" style="display: flex; align-items: center; margin-left: 0px; margin-right: 1em;"><div class="fl-controls-title" style="display: none;"></div><div class="fl-control fl-control-dropdown" style="display: none;"><select></select></div><div class="fl-control fl-control-buttons grouped"><div class="button selected" role="button" tabindex="0" aria-pressed="true" style="cursor: pointer;"><span>All</span></div><div class="button" role="button" tabindex="0" aria-pressed="false" style="cursor: pointer;"><span>官方数字钱包</span></div><div class="button" role="button" tabindex="0" aria-pressed="false" style="cursor: pointer;"><span>国际信用卡</span></div><div class="button" role="button" tabindex="0" aria-pressed="false" style="cursor: pointer;"><span>电子货币</span></div><div class="button" role="button" tabindex="0" aria-pressed="false" style="cursor: pointer;"><span>二维码支付</span></div></div><div class="fl-control fl-control-slider" style="flex: 1 1 0%; display: none;"><div class="slider-play" role="button" aria-label="play-button" cursor="pointer" tabindex="0"></div><div class="fl-controls-slider" style="display: flex; align-items: center;"><input type="range" id="slider-range" name="slider-range" value="0"><label class="slider-label" for="slider-range"></label></div></div></div></div></div></section><section class="fl-layout-container" id="fl-layout-legend-container" style="width: 100%; position: relative; order: 20; display: none;"><div class="fl-layout-inner" id="fl-layout-legend" style="width: 100%; position: relative;"><div class="fl-legend-wrapper" style="user-select: none; justify-content: center; display: flex; flex-direction: row;"><p class="fl-legend-announcement fl-legend-sr-only" id="fl-legend-announcement"></p><div class="fl-legend-container" id="fl-legend-discrete-color-0" style="display: none; justify-content: center; padding-inline-end: 0.5rem; padding-bottom: 0px;"><p class="fl-legend-title" style="font-weight: bold; font-size: 1rem; margin-right: 0.25rem; line-height: 1.25em; margin-top: 0px; margin-bottom: 0px; text-align: center;"></p></div></div></div></section><section class="fl-layout-container" id="fl-layout-primary-container" aria-label="primary visualisation container" style="width: 100%; position: relative; order: 30; display: flex; overflow: hidden; padding-top: 0.5rem;"><p id="fl-layout-primary-description" style="border: 0px; height: 1px; width: 1px; margin: -1px; overflow: hidden; padding: 0px; position: absolute; clip: rect(0px, 0px, 0px, 0px);"></p><div class="fl-layout-inner" id="fl-layout-primary" style="width: 100%; position: relative; height: 712.344px;"><svg class="noselect" width="712.3438110351562" height="712.3438110351562"><rect class="background" width="712.3438110351562" height="712.3438110351562" style="fill: none; pointer-events: visible;"></rect><g class="g-treemap" style="opacity: 0;"></g><g class="g-circle-packing" transform="translate(10,10)"><g transform="translate(346.1719055175781, 346.170166015625)" tabindex="-1" aria-label="Count: 15" class="node"><circle r="346.170166015625" style="fill: none; display: inline; cursor: pointer; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" style="font-weight: normal; text-anchor: middle; font-size: 0px; pointer-events: none; opacity: 0;"></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(51, 51, 51); opacity: 0;"></text><path class="label-path" id="pack-label-path-root" d="M-0.5,-10 A-10,-10 0 1,1 0.5,-10" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-root" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(199.06451416015625, 271.3566589355469)" tabindex="0" aria-label="二维码支付, Count: 6" class="node"><circle r="177.38366431736483" style="fill: rgb(228, 63, 119); display: inline; cursor: pointer; opacity: 1;"></circle><text class="text-center" tabindex="-1" style="font-weight: normal; text-anchor: middle; font-size: 0px; pointer-events: none; opacity: 0;"></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-1-二维码支付" d="M-0.5,167.38366431736483 A167.38366431736483,167.38366431736483 0 1,1 0.5,167.38366431736483" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 1;"><textPath href="#pack-label-path-1-二维码支付" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px; fill: rgb(255, 255, 255); letter-spacing: 0em;">二维码支付</textPath></text></g><g transform="translate(526.9610595703125, 271.3566589355469)" tabindex="0" aria-label="国际信用卡, Count: 4" class="node"><circle r="146.7646805851553" style="fill: rgb(19, 84, 217); display: inline; cursor: pointer; opacity: 1;"></circle><text class="text-center" tabindex="-1" style="font-weight: normal; text-anchor: middle; font-size: 0px; pointer-events: none; opacity: 0;"></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-1-国际信用卡" d="M-0.5,136.7646805851553 A136.7646805851553,136.7646805851553 0 1,1 0.5,136.7646805851553" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 1;"><textPath href="#pack-label-path-1-国际信用卡" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px; fill: rgb(255, 255, 255); letter-spacing: 0em;">国际信用卡</textPath></text></g><g transform="translate(392.2021789550781, 536.3358764648438)" tabindex="0" aria-label="电子货币, Count: 4" class="node"><circle r="146.7646805851553" style="fill: rgb(255, 192, 222); display: inline; cursor: pointer; opacity: 1;"></circle><text class="text-center" tabindex="-1" style="font-weight: normal; text-anchor: middle; font-size: 0px; pointer-events: none; opacity: 0;"></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(51, 51, 51); opacity: 0;"></text><path class="label-path" id="pack-label-path-1-电子货币" d="M-0.5,136.7646805851553 A136.7646805851553,136.7646805851553 0 1,1 0.5,136.7646805851553" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 1;"><textPath href="#pack-label-path-1-电子货币" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px; fill: rgb(51, 51, 51); letter-spacing: 0em;">电子货币</textPath></text></g><g transform="translate(383.62457275390625, 124.20953369140625)" tabindex="0" aria-label="官方数字钱包, Count: 1" class="node"><circle r="54.90772938852662" style="fill: rgb(19, 40, 86); display: inline; cursor: pointer; opacity: 1;"></circle><text class="text-center" tabindex="-1" style="font-weight: normal; text-anchor: middle; font-size: 0px; pointer-events: none; opacity: 0;"></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-1-官方数字钱包" d="M-0.5,44.90772938852662 A44.90772938852662,44.90772938852662 0 1,1 0.5,44.90772938852662" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 1;"><textPath href="#pack-label-path-1-官方数字钱包" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px; fill: rgb(255, 255, 255); letter-spacing: -0.0169742em;">官方数字钱包</textPath></text></g><g transform="translate(146.0308837890625, 301.97564697265625)" tabindex="0" aria-label="LINE Pay, 一级类别: 二维码支付, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">LINE Pay<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-二维码支付-LINE Pay" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-二维码支付-LINE Pay" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(252.09815979003906, 301.97564697265625)" tabindex="0" aria-label="PayPay, 一级类别: 二维码支付, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">PayPay<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-二维码支付-PayPay" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-二维码支付-PayPay" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(199.06451416015625, 393.83258056640625)" tabindex="0" aria-label="银联（二维码）, 一级类别: 二维码支付, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 13.0443px; pointer-events: none; fill: rgb(255, 255, 255);">银联（二维码）<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-二维码支付-银联（二维码）" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-二维码支付-银联（二维码）" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(199.06451416015625, 210.11868286132812)" tabindex="0" aria-label="微信支付, 一级类别: 二维码支付, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">微信支付<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-二维码支付-微信支付" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-二维码支付-微信支付" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(92.99724578857422, 210.11868286132812)" tabindex="0" aria-label="支付宝, 一级类别: 二维码支付, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">支付宝<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-二维码支付-支付宝" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-二维码支付-支付宝" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(305.1318054199219, 210.11868286132812)" tabindex="0" aria-label="其他, 一级类别: 二维码支付, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">其他<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-二维码支付-其他" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-二维码支付-其他" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(473.92742919921875, 271.3566589355469)" tabindex="0" aria-label="VISA, 一级类别: 国际信用卡, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">VISA<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-国际信用卡-VISA" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-国际信用卡-VISA" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(579.9946899414062, 271.3566589355469)" tabindex="0" aria-label="JCB, 一级类别: 国际信用卡, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">JCB<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-国际信用卡-JCB" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-国际信用卡-JCB" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(526.9610595703125, 363.2135925292969)" tabindex="0" aria-label="银联（卡组织）, 一级类别: 国际信用卡, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 13.0443px; pointer-events: none; fill: rgb(255, 255, 255);">银联（卡组织）<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-国际信用卡-银联（卡组织）" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-国际信用卡-银联（卡组织）" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(526.9610595703125, 179.49969482421875)" tabindex="0" aria-label="其他, 一级类别: 国际信用卡, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(255, 255, 255);">其他<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-国际信用卡-其他" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-国际信用卡-其他" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(339.1685485839844, 536.3358764648438)" tabindex="0" aria-label="交通卡, 一级类别: 电子货币, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(51, 51, 51);">交通卡<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(51, 51, 51); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-电子货币-交通卡" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-电子货币-交通卡" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(445.2358093261719, 536.3358764648438)" tabindex="0" aria-label="WAON, 一级类别: 电子货币, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(51, 51, 51);">WAON<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(51, 51, 51); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-电子货币-WAON" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-电子货币-WAON" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(392.2021789550781, 628.1928100585938)" tabindex="0" aria-label="ÆON（集团系电子货）, 一级类别: 电子货币, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 9.08924px; pointer-events: none; fill: rgb(51, 51, 51);">ÆON（集团系电子货）<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(51, 51, 51); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-电子货币-ÆON（集团系电子货）" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-电子货币-ÆON（集团系电子货）" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(392.2021789550781, 444.4789123535156)" tabindex="0" aria-label="其他, 一级类别: 电子货币, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 21px; pointer-events: none; fill: rgb(51, 51, 51);">其他<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(51, 51, 51); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-电子货币-其他" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-电子货币-其他" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g><g transform="translate(383.62457275390625, 124.20953369140625)" tabindex="0" aria-label="官方数字支付钱包（示例）, 一级类别: 官方数字钱包, Count: 1" class="node"><circle r="51.15954161209714" style="fill: white; display: inline; cursor: default; opacity: 0.2;"></circle><text class="text-center" tabindex="-1" dy="0.33em" style="font-weight: normal; text-anchor: middle; font-size: 7.69829px; pointer-events: none; fill: rgb(255, 255, 255);">官方数字支付钱包（示例）<tspan style="font-weight: bold; font-size: 0.75em;"> </tspan></text><text class="text-center-multiline" tabindex="-1" style="pointer-events: none; font-weight: normal; text-anchor: middle; fill: rgb(255, 255, 255); opacity: 0;"></text><path class="label-path" id="pack-label-path-2-官方数字钱包-官方数字支付钱包（示例）" d="M-0.5,41.15954161209714 A41.15954161209714,41.15954161209714 0 1,1 0.5,41.15954161209714" style="fill: none;"></path><text class="text-top" tabindex="-1" style="opacity: 0;"><textPath href="#pack-label-path-2-官方数字钱包-官方数字支付钱包（示例）" startOffset="50%" style="text-anchor: middle; pointer-events: none; font-weight: bold; font-size: 11px;"></textPath></text></g></g><g class="g-sunburst" style="opacity: 0;"></g><g class="g-bar" style="opacity: 0;"><g class="breadcrumb"><text></text></g><g class="bars"></g></g><g class="g-radial-tree" aria-label="Count: 15" style="opacity: 0;"><g class="links"></g><g class="nodes"></g></g></svg><div class="zoomout-button" title="Go up a level" tabindex="0" role="button" style="display: none; background: rgb(243, 243, 243);"><svg><path d="M7.285,16.01l4.12,4.119l5.137,-5.137l0,21.201l5.825,0l0,-21.201l5.138,5.137l4.119,-4.119l-12.169,-12.169l-12.17,12.169Z" style="fill: rgb(0, 0, 0);"></path></svg></div></div><div id="fl-layout-overlay" style="position: absolute; display: none; width: 100%; height: 100%; top: 0px; left: 0px; background-color: rgb(200, 200, 200); z-index: 999999; pointer-events: none;"><p class="fl-layout-overlay-message" style="color: rgb(51, 51, 51); font-size: 1.5rem; padding-left: 15%; padding-right: 15%; width: 100%; box-sizing: border-box; position: absolute; top: 50%; transform: translate(0px, -50%); margin: 0px; text-align: center;"></p></div></section><section class="fl-layout-container" id="fl-layout-footer-container" style="width: 100%; position: relative; order: 40; display: none;"><div class="fl-layout-inner" id="fl-layout-footer" style="width: 100%; position: relative;"><footer class="flourish-footer" style="display: flex; height: 0px; width: 100%; font-family: inherit; font-weight: normal; justify-content: space-between; font-size: 1rem; color: rgb(51, 51, 51); align-items: center;"><div class="flourish-footer-text" id="flourish-footer-text"><p></p></div><div class="flourish-footer-logo-container"></div></footer></div></section></main><aside id="fl-layout-sidebar" style="position: relative;"></aside></div><div id="flourish-popup-constrainer" aria-hidden="true" style="overflow: hidden; pointer-events: none; position: absolute; left: 0px; top: 0px; margin: 0px; padding: 0px; width: 733px; height: 914px;"><div class="flourish-popup all-events" id="flourish-popup-1000" style="display: none; padding: 0px; margin: 0px; position: absolute; width: 120px; height: 120px; box-sizing: border-box; left: 311.026px; top: 458.516px;"><svg class="flourish-popup-svg" width="120" height="120" style="position: absolute; inset: 0px;"><filter id="dropshadow-1000" height="130%"><feGaussianBlur in="SourceAlpha" stdDeviation="5"></feGaussianBlur><feOffset dx="0" dy="2" result="offsetblur"></feOffset><feComponentTransfer><feFuncA type="linear" slope="0.2"></feFuncA></feComponentTransfer><feMerge><feMergeNode></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter><g filter="url(#dropshadow-1000)" fill="white" stroke="none" style="fill: rgb(255, 255, 255); opacity: 1;"><rect x="25" y="25" rx="0.2rem" width="70" height="70"></rect><path d="M0,0L-10,10,10,10Z" transform="translate(60,15)" style="display: block;"></path></g></svg><div class="flourish-popup-content" style="position: absolute; left: 25px; top: 25px; padding: 0px; max-width: 513.333px; pointer-events: none; text-align: start; color: rgb(51, 51, 51); font-size: 1rem; border-radius: 0.2rem;"><div class="flourish-panel-content-inner"><header><h3>电子货币</h3></header><div class="main-content"><table><tbody><tr><td class="table-col-label"><span class="data-heading">Count</span></td><td class="table-col-value">4</td></tr></tbody></table></div></div></div></div></div><script src="https://public.flourish.studio/resources/v3/embedded.js"></script><script>
			function _Flourish_unflattenInto(dest, src) {
				dest = dest || {};
				for (var k in src) {
					var t = dest;
					for (var i = k.indexOf("."), p = 0; i >= 0; i = k.indexOf(".", p = i+1)) {
						var s = k.substring(p, i);
						if (!(s in t)) t[s] = {};
						t = t[s];
					}
					t[k.substring(p)] = src[k];
				}
				return dest;
			}
			var _Flourish_settings = {"layout.title":"世博会支付方式","layout.space_between_sections":"1","layout.max_width_target":"none","layout.margin_top":0.75,"popup.mode":"popup","legend_mode":"off","layout.header_align":"center","legend_container.alignment":"center","ascend_button_visibility":"always","hierarchy_layout":"circlePacking","color.categorical_palette":["#132856","#1354d9","#ffc0de","#e43f77"],"filter_control_visibility":"always","filter_control.control_type":"buttons","layout.body_font":{"name":"Source Sans Pro","url":"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"},"show_value_labels":false,"multi_line_labels":false,"layout.background_image_enabled":true,"layout.background_image_src":"https://public.flourish.studio/uploads/1815566/0309ffd5-7597-492d-b1a3-75c324c0a67d.jpg","layout.background_image_size":"auto","layout.background_image_position":"center center"};
			_Flourish_unflattenInto(window.template.state, _Flourish_settings);

			var _Flourish_data_column_names = {"data":{"popup_metadata":[],"size_columns":[],"nest_columns":["一级类别","二级类别/示例"],"filter":"一级类别"}},
				_Flourish_data_metadata = {"data":{"popup_metadata":[],"size_columns":[],"nest_columns":[{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"},{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"}],"filter":{"type":"string","type_id":"string$arbitrary_string","output_format_id":"string$arbitrary_string"}}},
				_Flourish_data_timestamps = {"data":{"last_updated":new Date(1755439043030)}},
				_Flourish_data = {"data":[{"popup_metadata":[],"size_columns":[],"nest_columns":["官方数字钱包","官方数字支付钱包（示例）"],"filter":"官方数字钱包"},{"popup_metadata":[],"size_columns":[],"nest_columns":["国际信用卡","VISA"],"filter":"国际信用卡"},{"popup_metadata":[],"size_columns":[],"nest_columns":["国际信用卡","JCB"],"filter":"国际信用卡"},{"popup_metadata":[],"size_columns":[],"nest_columns":["国际信用卡","银联（卡组织）"],"filter":"国际信用卡"},{"popup_metadata":[],"size_columns":[],"nest_columns":["国际信用卡","其他"],"filter":"国际信用卡"},{"popup_metadata":[],"size_columns":[],"nest_columns":["电子货币","交通卡"],"filter":"电子货币"},{"popup_metadata":[],"size_columns":[],"nest_columns":["电子货币","WAON"],"filter":"电子货币"},{"popup_metadata":[],"size_columns":[],"nest_columns":["电子货币","ÆON（集团系电子货）"],"filter":"电子货币"},{"popup_metadata":[],"size_columns":[],"nest_columns":["电子货币","其他"],"filter":"电子货币"},{"popup_metadata":[],"size_columns":[],"nest_columns":["二维码支付","LINE Pay"],"filter":"二维码支付"},{"popup_metadata":[],"size_columns":[],"nest_columns":["二维码支付","PayPay"],"filter":"二维码支付"},{"popup_metadata":[],"size_columns":[],"nest_columns":["二维码支付","银联（二维码）"],"filter":"二维码支付"},{"popup_metadata":[],"size_columns":[],"nest_columns":["二维码支付","微信支付"],"filter":"二维码支付"},{"popup_metadata":[],"size_columns":[],"nest_columns":["二维码支付","支付宝"],"filter":"二维码支付"},{"popup_metadata":[],"size_columns":[],"nest_columns":["二维码支付","其他"],"filter":"二维码支付"}]},
				_Flourish_visualisation_id = 24715778,
				_Flourish_visualisation_version_number = 83,
				_Flourish_template_id = 91601;
			for (var _Flourish_dataset in _Flourish_data) {
					window.template.data[_Flourish_dataset] = _Flourish_data[_Flourish_dataset];
					window.template.data[_Flourish_dataset].column_names = _Flourish_data_column_names[_Flourish_dataset];
					window.template.data[_Flourish_dataset].metadata = _Flourish_data_metadata[_Flourish_dataset];
					window.template.data[_Flourish_dataset].timestamps = _Flourish_data_timestamps[_Flourish_dataset];
			}

			
			window.template.draw();
		</script><div class="font-samples" style="visibility: hidden; overflow: hidden; height: 0px;"></div><div class="flourish-panel" role="dialog" aria-modal="true" tabindex="-1" id="flourish-panel-1" style="position: absolute; z-index: 999999; pointer-events: none; width: 100%; height: 100%; top: 0px; left: 0px; background: rgba(255, 255, 255, 0);"><div class="flourish-panel-inner" style="width: 0px; height: 0px; position: absolute; box-sizing: border-box; background: rgba(255, 255, 255, 0.9); border-radius: 0.2rem; box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 1.5rem;"><svg class="flourish-panel-close fl-ignore-svg-download" viewBox="0 0 40 40" tabindex="-1" role="button" aria-label="Close" style="width: 1.25rem; height: 1.25rem; position: absolute; right: 1rem; top: 1rem; cursor: pointer; opacity: 0;"><path stroke="#333333" stroke-width="0.5rem" stroke-linecap="round" d="M 10,10 L 30,30 M 30,10 L 10,30" style="stroke: rgb(51, 51, 51);"></path></svg><div class="flourish-panel-shadow"></div><div class="flourish-panel-content" style="opacity: 0; overflow-y: auto; height: 100%; padding: 1.2rem; text-align: start; color: rgb(51, 51, 51); font-size: 1.25rem; box-sizing: border-box;"></div></div></div></body>

<script>
(function () {
  // 只负责强制居中
  function fixJustifyCenter() {
    const el = document.querySelector('#fl-layout-controls > div');
    if (el) {
      el.style.setProperty('display', 'flex', 'important');
      el.style.setProperty('flex-wrap', 'wrap', 'important');
      el.style.setProperty('justify-content', 'center', 'important');
    }
  }

  // 初次执行
  window.addEventListener('load', () => {
    fixJustifyCenter();

    // 监听容器变化，避免脚本改回 flex-start
    const ctrl = document.getElementById('fl-layout-controls');
    if (ctrl) {
      new MutationObserver(fixJustifyCenter)
        .observe(ctrl, { childList: true, subtree: true, attributes: true });
    }
  });
})();
</script>

</html>